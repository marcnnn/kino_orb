var Bu=Object.create;var Ts=Object.defineProperty;var Ru=Object.getOwnPropertyDescriptor;var Zu=Object.getOwnPropertyNames;var Fu=Object.getPrototypeOf,Uu=Object.prototype.hasOwnProperty;var Hu=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports);var Gu=(e,i,o,s)=>{if(i&&typeof i=="object"||typeof i=="function")for(let a of Zu(i))!Uu.call(e,a)&&a!==o&&Ts(e,a,{get:()=>i[a],enumerable:!(s=Ru(i,a))||s.enumerable});return e};var Wu=(e,i,o)=>(o=e!=null?Bu(Fu(e)):{},Gu(i||!e||!e.__esModule?Ts(o,"default",{value:e,enumerable:!0}):o,e));var ll=Hu((to,hl)=>{(function(e,i){typeof to=="object"&&typeof hl!="undefined"?i(to):typeof define=="function"&&define.amd?define(["exports"],i):(e=typeof globalThis!="undefined"?globalThis:e||self,i(e.leaflet={}))})(to,function(e){"use strict";var i="1.8.0";function o(t){var n,r,h,c;for(r=1,h=arguments.length;r<h;r++){c=arguments[r];for(n in c)t[n]=c[n]}return t}var s=Object.create||function(){function t(){}return function(n){return t.prototype=n,new t}}();function a(t,n){var r=Array.prototype.slice;if(t.bind)return t.bind.apply(t,r.call(arguments,1));var h=r.call(arguments,2);return function(){return t.apply(n,h.length?h.concat(r.call(arguments)):arguments)}}var l=0;function u(t){return"_leaflet_id"in t||(t._leaflet_id=++l),t._leaflet_id}function f(t,n,r){var h,c,d,g;return g=function(){h=!1,c&&(d.apply(r,c),c=!1)},d=function(){h?c=arguments:(t.apply(r,arguments),setTimeout(g,n),h=!0)},d}function _(t,n,r){var h=n[1],c=n[0],d=h-c;return t===h&&r?t:((t-c)%d+d)%d+c}function m(){return!1}function p(t,n){if(n===!1)return t;var r=Math.pow(10,n===void 0?6:n);return Math.round(t*r)/r}function b(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function y(t){return b(t).split(/\s+/)}function v(t,n){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?s(t.options):{});for(var r in n)t.options[r]=n[r];return t.options}function I(t,n,r){var h=[];for(var c in t)h.push(encodeURIComponent(r?c.toUpperCase():c)+"="+encodeURIComponent(t[c]));return(!n||n.indexOf("?")===-1?"?":"&")+h.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function N(t,n){return t.replace(C,function(r,h){var c=n[h];if(c===void 0)throw new Error("No value provided for variable "+r);return typeof c=="function"&&(c=c(n)),c})}var T=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function A(t,n){for(var r=0;r<t.length;r++)if(t[r]===n)return r;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var R=0;function H(t){var n=+new Date,r=Math.max(0,16-(n-R));return R=n+r,window.setTimeout(t,r)}var G=window.requestAnimationFrame||E("RequestAnimationFrame")||H,$=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function K(t,n,r){if(r&&G===H)t.call(n);else return G.call(window,a(t,n))}function W(t){t&&$.call(window,t)}var rt={__proto__:null,extend:o,create:s,bind:a,get lastId(){return l},stamp:u,throttle:f,wrapNum:_,falseFn:m,formatNum:p,trim:b,splitWords:y,setOptions:v,getParamString:I,template:N,isArray:T,indexOf:A,emptyImageUrl:Z,requestFn:G,cancelFn:$,requestAnimFrame:K,cancelAnimFrame:W};function st(){}st.extend=function(t){var n=function(){v(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=n.__super__=this.prototype,h=s(r);h.constructor=n,n.prototype=h;for(var c in this)Object.prototype.hasOwnProperty.call(this,c)&&c!=="prototype"&&c!=="__super__"&&(n[c]=this[c]);return t.statics&&o(n,t.statics),t.includes&&(wt(t.includes),o.apply(null,[h].concat(t.includes))),o(h,t),delete h.statics,delete h.includes,h.options&&(h.options=r.options?s(r.options):{},o(h.options,t.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var d=0,g=h._initHooks.length;d<g;d++)h._initHooks[d].call(this)}},n},st.include=function(t){var n=this.prototype.options;return o(this.prototype,t),t.options&&(this.prototype.options=n,this.mergeOptions(t.options)),this},st.mergeOptions=function(t){return o(this.prototype.options,t),this},st.addInitHook=function(t){var n=Array.prototype.slice.call(arguments,1),r=typeof t=="function"?t:function(){this[t].apply(this,n)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(r),this};function wt(t){if(!(typeof L=="undefined"||!L||!L.Mixin)){t=T(t)?t:[t];for(var n=0;n<t.length;n++)t[n]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var w={on:function(t,n,r){if(typeof t=="object")for(var h in t)this._on(h,t[h],n);else{t=y(t);for(var c=0,d=t.length;c<d;c++)this._on(t[c],n,r)}return this},off:function(t,n,r){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var h in t)this._off(h,t[h],n);else{t=y(t);for(var c=arguments.length===1,d=0,g=t.length;d<g;d++)c?this._off(t[d]):this._off(t[d],n,r)}return this},_on:function(t,n,r){if(typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}this._events=this._events||{};var h=this._events[t];h||(h=[],this._events[t]=h),r===this&&(r=void 0);for(var c={fn:n,ctx:r},d=h,g=0,x=d.length;g<x;g++)if(d[g].fn===n&&d[g].ctx===r)return;d.push(c)},_off:function(t,n,r){var h,c,d;if(this._events&&(h=this._events[t],!!h)){if(arguments.length===1){if(this._firingCount)for(c=0,d=h.length;c<d;c++)h[c].fn=m;delete this._events[t];return}if(r===this&&(r=void 0),typeof n!="function"){console.warn("wrong listener type: "+typeof n);return}for(c=0,d=h.length;c<d;c++){var g=h[c];if(g.ctx===r&&g.fn===n){this._firingCount&&(g.fn=m,this._events[t]=h=h.slice()),h.splice(c,1);return}}console.warn("listener not found")}},fire:function(t,n,r){if(!this.listens(t,r))return this;var h=o({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var c=this._events[t];if(c){this._firingCount=this._firingCount+1||1;for(var d=0,g=c.length;d<g;d++){var x=c[d];x.fn.call(x.ctx||this,h)}this._firingCount--}}return r&&this._propagateEvent(h),this},listens:function(t,n){typeof t!="string"&&console.warn('"string" type argument expected');var r=this._events&&this._events[t];if(r&&r.length)return!0;if(n){for(var h in this._eventParents)if(this._eventParents[h].listens(t,n))return!0}return!1},once:function(t,n,r){if(typeof t=="object"){for(var h in t)this.once(h,t[h],n);return this}var c=a(function(){this.off(t,n,r).off(t,c,r)},this);return this.on(t,n,r).on(t,c,r)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[u(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[u(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,o({layer:t.target,propagatedFrom:t.target},t),!0)}};w.addEventListener=w.on,w.removeEventListener=w.clearAllEventListeners=w.off,w.addOneTimeEventListener=w.once,w.fireEvent=w.fire,w.hasEventListeners=w.listens;var D=st.extend(w);function P(t,n,r){this.x=r?Math.round(t):t,this.y=r?Math.round(n):n}var B=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};P.prototype={clone:function(){return new P(this.x,this.y)},add:function(t){return this.clone()._add(O(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(O(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new P(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new P(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=B(this.x),this.y=B(this.y),this},distanceTo:function(t){t=O(t);var n=t.x-this.x,r=t.y-this.y;return Math.sqrt(n*n+r*r)},equals:function(t){return t=O(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=O(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function O(t,n,r){return t instanceof P?t:T(t)?new P(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new P(t.x,t.y):new P(t,n,r)}function z(t,n){if(t)for(var r=n?[t,n]:t,h=0,c=r.length;h<c;h++)this.extend(r[h])}z.prototype={extend:function(t){return t=O(t),!this.min&&!this.max?(this.min=t.clone(),this.max=t.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)),this},getCenter:function(t){return new P((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new P(this.min.x,this.max.y)},getTopRight:function(){return new P(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var n,r;return typeof t[0]=="number"||t instanceof P?t=O(t):t=U(t),t instanceof z?(n=t.min,r=t.max):n=r=t,n.x>=this.min.x&&r.x<=this.max.x&&n.y>=this.min.y&&r.y<=this.max.y},intersects:function(t){t=U(t);var n=this.min,r=this.max,h=t.min,c=t.max,d=c.x>=n.x&&h.x<=r.x,g=c.y>=n.y&&h.y<=r.y;return d&&g},overlaps:function(t){t=U(t);var n=this.min,r=this.max,h=t.min,c=t.max,d=c.x>n.x&&h.x<r.x,g=c.y>n.y&&h.y<r.y;return d&&g},isValid:function(){return!!(this.min&&this.max)}};function U(t,n){return!t||t instanceof z?t:new z(t,n)}function V(t,n){if(t)for(var r=n?[t,n]:t,h=0,c=r.length;h<c;h++)this.extend(r[h])}V.prototype={extend:function(t){var n=this._southWest,r=this._northEast,h,c;if(t instanceof J)h=t,c=t;else if(t instanceof V){if(h=t._southWest,c=t._northEast,!h||!c)return this}else return t?this.extend(q(t)||X(t)):this;return!n&&!r?(this._southWest=new J(h.lat,h.lng),this._northEast=new J(c.lat,c.lng)):(n.lat=Math.min(h.lat,n.lat),n.lng=Math.min(h.lng,n.lng),r.lat=Math.max(c.lat,r.lat),r.lng=Math.max(c.lng,r.lng)),this},pad:function(t){var n=this._southWest,r=this._northEast,h=Math.abs(n.lat-r.lat)*t,c=Math.abs(n.lng-r.lng)*t;return new V(new J(n.lat-h,n.lng-c),new J(r.lat+h,r.lng+c))},getCenter:function(){return new J((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new J(this.getNorth(),this.getWest())},getSouthEast:function(){return new J(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof J||"lat"in t?t=q(t):t=X(t);var n=this._southWest,r=this._northEast,h,c;return t instanceof V?(h=t.getSouthWest(),c=t.getNorthEast()):h=c=t,h.lat>=n.lat&&c.lat<=r.lat&&h.lng>=n.lng&&c.lng<=r.lng},intersects:function(t){t=X(t);var n=this._southWest,r=this._northEast,h=t.getSouthWest(),c=t.getNorthEast(),d=c.lat>=n.lat&&h.lat<=r.lat,g=c.lng>=n.lng&&h.lng<=r.lng;return d&&g},overlaps:function(t){t=X(t);var n=this._southWest,r=this._northEast,h=t.getSouthWest(),c=t.getNorthEast(),d=c.lat>n.lat&&h.lat<r.lat,g=c.lng>n.lng&&h.lng<r.lng;return d&&g},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,n){return t?(t=X(t),this._southWest.equals(t.getSouthWest(),n)&&this._northEast.equals(t.getNorthEast(),n)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function X(t,n){return t instanceof V?t:new V(t,n)}function J(t,n,r){if(isNaN(t)||isNaN(n))throw new Error("Invalid LatLng object: ("+t+", "+n+")");this.lat=+t,this.lng=+n,r!==void 0&&(this.alt=+r)}J.prototype={equals:function(t,n){if(!t)return!1;t=q(t);var r=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return r<=(n===void 0?1e-9:n)},toString:function(t){return"LatLng("+p(this.lat,t)+", "+p(this.lng,t)+")"},distanceTo:function(t){return pt.distance(this,q(t))},wrap:function(){return pt.wrapLatLng(this)},toBounds:function(t){var n=180*t/40075017,r=n/Math.cos(Math.PI/180*this.lat);return X([this.lat-n,this.lng-r],[this.lat+n,this.lng+r])},clone:function(){return new J(this.lat,this.lng,this.alt)}};function q(t,n,r){return t instanceof J?t:T(t)&&typeof t[0]!="object"?t.length===3?new J(t[0],t[1],t[2]):t.length===2?new J(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new J(t.lat,"lng"in t?t.lng:t.lon,t.alt):n===void 0?null:new J(t,n,r)}var ut={latLngToPoint:function(t,n){var r=this.projection.project(t),h=this.scale(n);return this.transformation._transform(r,h)},pointToLatLng:function(t,n){var r=this.scale(n),h=this.transformation.untransform(t,r);return this.projection.unproject(h)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var n=this.projection.bounds,r=this.scale(t),h=this.transformation.transform(n.min,r),c=this.transformation.transform(n.max,r);return new z(h,c)},infinite:!1,wrapLatLng:function(t){var n=this.wrapLng?_(t.lng,this.wrapLng,!0):t.lng,r=this.wrapLat?_(t.lat,this.wrapLat,!0):t.lat,h=t.alt;return new J(r,n,h)},wrapLatLngBounds:function(t){var n=t.getCenter(),r=this.wrapLatLng(n),h=n.lat-r.lat,c=n.lng-r.lng;if(h===0&&c===0)return t;var d=t.getSouthWest(),g=t.getNorthEast(),x=new J(d.lat-h,d.lng-c),S=new J(g.lat-h,g.lng-c);return new V(x,S)}},pt=o({},ut,{wrapLng:[-180,180],R:6371e3,distance:function(t,n){var r=Math.PI/180,h=t.lat*r,c=n.lat*r,d=Math.sin((n.lat-t.lat)*r/2),g=Math.sin((n.lng-t.lng)*r/2),x=d*d+Math.cos(h)*Math.cos(c)*g*g,S=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return this.R*S}}),Lt=6378137,Mt={R:Lt,MAX_LATITUDE:85.0511287798,project:function(t){var n=Math.PI/180,r=this.MAX_LATITUDE,h=Math.max(Math.min(r,t.lat),-r),c=Math.sin(h*n);return new P(this.R*t.lng*n,this.R*Math.log((1+c)/(1-c))/2)},unproject:function(t){var n=180/Math.PI;return new J((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*n,t.x*n/this.R)},bounds:function(){var t=Lt*Math.PI;return new z([-t,-t],[t,t])}()};function pe(t,n,r,h){if(T(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=n,this._c=r,this._d=h}pe.prototype={transform:function(t,n){return this._transform(t.clone(),n)},_transform:function(t,n){return n=n||1,t.x=n*(this._a*t.x+this._b),t.y=n*(this._c*t.y+this._d),t},untransform:function(t,n){return n=n||1,new P((t.x/n-this._b)/this._a,(t.y/n-this._d)/this._c)}};function ei(t,n,r,h){return new pe(t,n,r,h)}var io=o({},pt,{code:"EPSG:3857",projection:Mt,transformation:function(){var t=.5/(Math.PI*Mt.R);return ei(t,.5,-t,.5)}()}),ml=o({},io,{code:"EPSG:900913"});function xr(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function wr(t,n){var r="",h,c,d,g,x,S;for(h=0,d=t.length;h<d;h++){for(x=t[h],c=0,g=x.length;c<g;c++)S=x[c],r+=(c?"L":"M")+S.x+" "+S.y;r+=n?F.svg?"z":"x":""}return r||"M0 0"}var no=document.documentElement.style,Gi="ActiveXObject"in window,pl=Gi&&!document.addEventListener,br="msLaunchUri"in navigator&&!("documentMode"in document),oo=Gt("webkit"),Pr=Gt("android"),Sr=Gt("android 2")||Gt("android 3"),gl=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),vl=Pr&&Gt("Google")&&gl<537&&!("AudioNode"in window),ro=!!window.opera,Er=!br&&Gt("chrome"),Tr=Gt("gecko")&&!oo&&!ro&&!Gi,yl=!Er&&Gt("safari"),Lr=Gt("phantom"),Cr="OTransition"in no,xl=navigator.platform.indexOf("Win")===0,Nr=Gi&&"transition"in no,so="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Sr,Mr="MozPerspective"in no,wl=!window.L_DISABLE_3D&&(Nr||so||Mr)&&!Cr&&!Lr,ii=typeof orientation!="undefined"||Gt("mobile"),bl=ii&&oo,Pl=ii&&so,Ir=!window.PointerEvent&&window.MSPointerEvent,Or=!!(window.PointerEvent||Ir),Ar="ontouchstart"in window||!!window.TouchEvent,Sl=!window.L_NO_TOUCH&&(Ar||Or),El=ii&&ro,Tl=ii&&Tr,Ll=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Cl=function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",m,n),window.removeEventListener("testPassiveEventSupport",m,n)}catch(r){}return t}(),Nl=function(){return!!document.createElement("canvas").getContext}(),ao=!!(document.createElementNS&&xr("svg").createSVGRect),Ml=!!ao&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Il=!ao&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var n=t.firstChild;return n.style.behavior="url(#default#VML)",n&&typeof n.adj=="object"}catch(r){return!1}}();function Gt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var F={ie:Gi,ielt9:pl,edge:br,webkit:oo,android:Pr,android23:Sr,androidStock:vl,opera:ro,chrome:Er,gecko:Tr,safari:yl,phantom:Lr,opera12:Cr,win:xl,ie3d:Nr,webkit3d:so,gecko3d:Mr,any3d:wl,mobile:ii,mobileWebkit:bl,mobileWebkit3d:Pl,msPointer:Ir,pointer:Or,touch:Sl,touchNative:Ar,mobileOpera:El,mobileGecko:Tl,retina:Ll,passiveEvents:Cl,canvas:Nl,svg:ao,vml:Il,inlineSvg:Ml},Dr=F.msPointer?"MSPointerDown":"pointerdown",zr=F.msPointer?"MSPointerMove":"pointermove",kr=F.msPointer?"MSPointerUp":"pointerup",Br=F.msPointer?"MSPointerCancel":"pointercancel",ho={touchstart:Dr,touchmove:zr,touchend:kr,touchcancel:Br},Rr={touchstart:Bl,touchmove:Wi,touchend:Wi,touchcancel:Wi},ke={},Zr=!1;function Ol(t,n,r){return n==="touchstart"&&kl(),Rr[n]?(r=Rr[n].bind(this,r),t.addEventListener(ho[n],r,!1),r):(console.warn("wrong event specified:",n),L.Util.falseFn)}function Al(t,n,r){if(!ho[n]){console.warn("wrong event specified:",n);return}t.removeEventListener(ho[n],r,!1)}function Dl(t){ke[t.pointerId]=t}function zl(t){ke[t.pointerId]&&(ke[t.pointerId]=t)}function Fr(t){delete ke[t.pointerId]}function kl(){Zr||(document.addEventListener(Dr,Dl,!0),document.addEventListener(zr,zl,!0),document.addEventListener(kr,Fr,!0),document.addEventListener(Br,Fr,!0),Zr=!0)}function Wi(t,n){if(n.pointerType!==(n.MSPOINTER_TYPE_MOUSE||"mouse")){n.touches=[];for(var r in ke)n.touches.push(ke[r]);n.changedTouches=[n],t(n)}}function Bl(t,n){n.MSPOINTER_TYPE_TOUCH&&n.pointerType===n.MSPOINTER_TYPE_TOUCH&&bt(n),Wi(t,n)}function Rl(t){var n={},r,h;for(h in t)r=t[h],n[h]=r&&r.bind?r.bind(t):r;return t=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}var Zl=200;function Fl(t,n){t.addEventListener("dblclick",n);var r=0,h;function c(d){if(d.detail!==1){h=d.detail;return}if(!(d.pointerType==="mouse"||d.sourceCapabilities&&!d.sourceCapabilities.firesTouchEvents)){var g=Date.now();g-r<=Zl?(h++,h===2&&n(Rl(d))):h=1,r=g}}return t.addEventListener("click",c),{dblclick:n,simDblclick:c}}function Ul(t,n){t.removeEventListener("dblclick",n.dblclick),t.removeEventListener("click",n.simDblclick)}var lo=ji(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ni=ji(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ur=ni==="webkitTransition"||ni==="OTransition"?ni+"End":"transitionend";function Hr(t){return typeof t=="string"?document.getElementById(t):t}function oi(t,n){var r=t.style[n]||t.currentStyle&&t.currentStyle[n];if((!r||r==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(t,null);r=h?h[n]:null}return r==="auto"?null:r}function it(t,n,r){var h=document.createElement(t);return h.className=n||"",r&&r.appendChild(h),h}function at(t){var n=t.parentNode;n&&n.removeChild(t)}function Vi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Be(t){var n=t.parentNode;n&&n.lastChild!==t&&n.appendChild(t)}function Re(t){var n=t.parentNode;n&&n.firstChild!==t&&n.insertBefore(t,n.firstChild)}function uo(t,n){if(t.classList!==void 0)return t.classList.contains(n);var r=qi(t);return r.length>0&&new RegExp("(^|\\s)"+n+"(\\s|$)").test(r)}function Y(t,n){if(t.classList!==void 0)for(var r=y(n),h=0,c=r.length;h<c;h++)t.classList.add(r[h]);else if(!uo(t,n)){var d=qi(t);co(t,(d?d+" ":"")+n)}}function ct(t,n){t.classList!==void 0?t.classList.remove(n):co(t,b((" "+qi(t)+" ").replace(" "+n+" "," ")))}function co(t,n){t.className.baseVal===void 0?t.className=n:t.className.baseVal=n}function qi(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Ot(t,n){"opacity"in t.style?t.style.opacity=n:"filter"in t.style&&Hl(t,n)}function Hl(t,n){var r=!1,h="DXImageTransform.Microsoft.Alpha";try{r=t.filters.item(h)}catch(c){if(n===1)return}n=Math.round(n*100),r?(r.Enabled=n!==100,r.Opacity=n):t.style.filter+=" progid:"+h+"(opacity="+n+")"}function ji(t){for(var n=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in n)return t[r];return!1}function ge(t,n,r){var h=n||new P(0,0);t.style[lo]=(F.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(r?" scale("+r+")":"")}function ft(t,n){t._leaflet_pos=n,F.any3d?ge(t,n):(t.style.left=n.x+"px",t.style.top=n.y+"px")}function ve(t){return t._leaflet_pos||new P(0,0)}var ri,si,fo;if("onselectstart"in document)ri=function(){j(window,"selectstart",bt)},si=function(){nt(window,"selectstart",bt)};else{var ai=ji(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ri=function(){if(ai){var t=document.documentElement.style;fo=t[ai],t[ai]="none"}},si=function(){ai&&(document.documentElement.style[ai]=fo,fo=void 0)}}function _o(){j(window,"dragstart",bt)}function mo(){nt(window,"dragstart",bt)}var Ki,po;function go(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Xi(),Ki=t,po=t.style.outline,t.style.outline="none",j(window,"keydown",Xi))}function Xi(){Ki&&(Ki.style.outline=po,Ki=void 0,po=void 0,nt(window,"keydown",Xi))}function Gr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function vo(t){var n=t.getBoundingClientRect();return{x:n.width/t.offsetWidth||1,y:n.height/t.offsetHeight||1,boundingClientRect:n}}var Gl={__proto__:null,TRANSFORM:lo,TRANSITION:ni,TRANSITION_END:Ur,get:Hr,getStyle:oi,create:it,remove:at,empty:Vi,toFront:Be,toBack:Re,hasClass:uo,addClass:Y,removeClass:ct,setClass:co,getClass:qi,setOpacity:Ot,testProp:ji,setTransform:ge,setPosition:ft,getPosition:ve,get disableTextSelection(){return ri},get enableTextSelection(){return si},disableImageDrag:_o,enableImageDrag:mo,preventOutline:go,restoreOutline:Xi,getSizedParentNode:Gr,getScale:vo};function j(t,n,r,h){if(n&&typeof n=="object")for(var c in n)xo(t,c,n[c],r);else{n=y(n);for(var d=0,g=n.length;d<g;d++)xo(t,n[d],r,h)}return this}var Wt="_leaflet_events";function nt(t,n,r,h){if(arguments.length===1)Wr(t),delete t[Wt];else if(n&&typeof n=="object")for(var c in n)wo(t,c,n[c],r);else if(n=y(n),arguments.length===2)Wr(t,function(x){return A(n,x)!==-1});else for(var d=0,g=n.length;d<g;d++)wo(t,n[d],r,h);return this}function Wr(t,n){for(var r in t[Wt]){var h=r.split(/\d/)[0];(!n||n(h))&&wo(t,h,null,null,r)}}var yo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function xo(t,n,r,h){var c=n+u(r)+(h?"_"+u(h):"");if(t[Wt]&&t[Wt][c])return this;var d=function(x){return r.call(h||t,x||window.event)},g=d;!F.touchNative&&F.pointer&&n.indexOf("touch")===0?d=Ol(t,n,d):F.touch&&n==="dblclick"?d=Fl(t,d):"addEventListener"in t?n==="touchstart"||n==="touchmove"||n==="wheel"||n==="mousewheel"?t.addEventListener(yo[n]||n,d,F.passiveEvents?{passive:!1}:!1):n==="mouseenter"||n==="mouseleave"?(d=function(x){x=x||window.event,Po(t,x)&&g(x)},t.addEventListener(yo[n],d,!1)):t.addEventListener(n,g,!1):t.attachEvent("on"+n,d),t[Wt]=t[Wt]||{},t[Wt][c]=d}function wo(t,n,r,h,c){c=c||n+u(r)+(h?"_"+u(h):"");var d=t[Wt]&&t[Wt][c];if(!d)return this;!F.touchNative&&F.pointer&&n.indexOf("touch")===0?Al(t,n,d):F.touch&&n==="dblclick"?Ul(t,d):"removeEventListener"in t?t.removeEventListener(yo[n]||n,d,!1):t.detachEvent("on"+n,d),t[Wt][c]=null}function ye(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function bo(t){return xo(t,"wheel",ye),this}function hi(t){return j(t,"mousedown touchstart dblclick contextmenu",ye),t._leaflet_disable_click=!0,this}function bt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function xe(t){return bt(t),ye(t),this}function Vr(t,n){if(!n)return new P(t.clientX,t.clientY);var r=vo(n),h=r.boundingClientRect;return new P((t.clientX-h.left)/r.x-n.clientLeft,(t.clientY-h.top)/r.y-n.clientTop)}var Wl=F.win&&F.chrome?2*window.devicePixelRatio:F.gecko?window.devicePixelRatio:1;function qr(t){return F.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Wl:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Po(t,n){var r=n.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch(h){return!1}return r!==t}var Vl={__proto__:null,on:j,off:nt,stopPropagation:ye,disableScrollPropagation:bo,disableClickPropagation:hi,preventDefault:bt,stop:xe,getMousePosition:Vr,getWheelDelta:qr,isExternalTarget:Po,addListener:j,removeListener:nt},jr=D.extend({run:function(t,n,r,h){this.stop(),this._el=t,this._inProgress=!0,this._duration=r||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=ve(t),this._offset=n.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=K(this._animate,this),this._step()},_step:function(t){var n=+new Date-this._startTime,r=this._duration*1e3;n<r?this._runFrame(this._easeOut(n/r),t):(this._runFrame(1),this._complete())},_runFrame:function(t,n){var r=this._startPos.add(this._offset.multiplyBy(t));n&&r._round(),ft(this._el,r),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),tt=D.extend({options:{crs:io,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,n){n=v(this,n),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),n.maxBounds&&this.setMaxBounds(n.maxBounds),n.zoom!==void 0&&(this._zoom=this._limitZoom(n.zoom)),n.center&&n.zoom!==void 0&&this.setView(q(n.center),n.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ni&&F.any3d&&!F.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),j(this._proxy,Ur,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,r){if(n=n===void 0?this._zoom:this._limitZoom(n),t=this._limitCenter(q(t),n,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&r!==!0){r.animate!==void 0&&(r.zoom=o({animate:r.animate},r.zoom),r.pan=o({animate:r.animate,duration:r.duration},r.pan));var h=this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,r.zoom):this._tryAnimatedPan(t,r.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(t,n),this},setZoom:function(t,n){return this._loaded?this.setView(this.getCenter(),t,{zoom:n}):(this._zoom=t,this)},zoomIn:function(t,n){return t=t||(F.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,n)},zoomOut:function(t,n){return t=t||(F.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,n)},setZoomAround:function(t,n,r){var h=this.getZoomScale(n),c=this.getSize().divideBy(2),d=t instanceof P?t:this.latLngToContainerPoint(t),g=d.subtract(c).multiplyBy(1-1/h),x=this.containerPointToLatLng(c.add(g));return this.setView(x,n,{zoom:r})},_getBoundsCenterZoom:function(t,n){n=n||{},t=t.getBounds?t.getBounds():X(t);var r=O(n.paddingTopLeft||n.padding||[0,0]),h=O(n.paddingBottomRight||n.padding||[0,0]),c=this.getBoundsZoom(t,!1,r.add(h));if(c=typeof n.maxZoom=="number"?Math.min(n.maxZoom,c):c,c===1/0)return{center:t.getCenter(),zoom:c};var d=h.subtract(r).divideBy(2),g=this.project(t.getSouthWest(),c),x=this.project(t.getNorthEast(),c),S=this.unproject(g.add(x).divideBy(2).add(d),c);return{center:S,zoom:c}},fitBounds:function(t,n){if(t=X(t),!t.isValid())throw new Error("Bounds are not valid.");var r=this._getBoundsCenterZoom(t,n);return this.setView(r.center,r.zoom,n)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,n){return this.setView(t,this._zoom,{pan:n})},panBy:function(t,n){if(t=O(t).round(),n=n||{},!t.x&&!t.y)return this.fire("moveend");if(n.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),n.noMoveStart||this.fire("movestart"),n.animate!==!1){Y(this._mapPane,"leaflet-pan-anim");var r=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,r,n.duration||.25,n.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,n,r){if(r=r||{},r.animate===!1||!F.any3d)return this.setView(t,n,r);this._stop();var h=this.project(this.getCenter()),c=this.project(t),d=this.getSize(),g=this._zoom;t=q(t),n=n===void 0?g:n;var x=Math.max(d.x,d.y),S=x*this.getZoomScale(g,n),M=c.distanceTo(h)||1,k=1.42,Q=k*k;function et(dt){var hn=dt?-1:1,Au=dt?S:x,Du=S*S-x*x+hn*Q*Q*M*M,zu=2*Au*Q*M,zo=Du/zu,Es=Math.sqrt(zo*zo+1)-zo,ku=Es<1e-9?-18:Math.log(Es);return ku}function Jt(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function be(dt){return(Math.exp(dt)+Math.exp(-dt))/2}function an(dt){return Jt(dt)/be(dt)}var he=et(0);function Do(dt){return x*(be(he)/be(he+k*dt))}function Nu(dt){return x*(be(he)*an(he+k*dt)-Jt(he))/Q}function Mu(dt){return 1-Math.pow(1-dt,1.5)}var Iu=Date.now(),Ps=(et(1)-he)/k,Ou=r.duration?1e3*r.duration:1e3*Ps*.8;function Ss(){var dt=(Date.now()-Iu)/Ou,hn=Mu(dt)*Ps;dt<=1?(this._flyToFrame=K(Ss,this),this._move(this.unproject(h.add(c.subtract(h).multiplyBy(Nu(hn)/M)),g),this.getScaleZoom(x/Do(hn),g),{flyTo:!0})):this._move(t,n)._moveEnd(!0)}return this._moveStart(!0,r.noMoveStart),Ss.call(this),this},flyToBounds:function(t,n){var r=this._getBoundsCenterZoom(t,n);return this.flyTo(r.center,r.zoom,n)},setMaxBounds:function(t){if(t=X(t),t.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(t){var n=this.options.minZoom;return this.options.minZoom=t,this._loaded&&n!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var n=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&n!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,n){this._enforcingBounds=!0;var r=this.getCenter(),h=this._limitCenter(r,this._zoom,X(t));return r.equals(h)||this.panTo(h,n),this._enforcingBounds=!1,this},panInside:function(t,n){n=n||{};var r=O(n.paddingTopLeft||n.padding||[0,0]),h=O(n.paddingBottomRight||n.padding||[0,0]),c=this.project(this.getCenter()),d=this.project(t),g=this.getPixelBounds(),x=U([g.min.add(r),g.max.subtract(h)]),S=x.getSize();if(!x.contains(d)){this._enforcingBounds=!0;var M=d.subtract(x.getCenter()),k=x.extend(d).getSize().subtract(S);c.x+=M.x<0?-k.x:k.x,c.y+=M.y<0?-k.y:k.y,this.panTo(this.unproject(c),n),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=o({animate:!1,pan:!0},t===!0?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),h=n.divideBy(2).round(),c=r.divideBy(2).round(),d=h.subtract(c);return!d.x&&!d.y?this:(t.animate&&t.pan?this.panBy(d):(t.pan&&this._rawPanBy(d),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=o({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=a(this._handleGeolocationResponse,this),r=a(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,r,t):navigator.geolocation.getCurrentPosition(n,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var n=t.code,r=t.message||(n===1?"permission denied":n===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:n,message:"Geolocation error: "+r+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var n=t.coords.latitude,r=t.coords.longitude,h=new J(n,r),c=h.toBounds(t.coords.accuracy*2),d=this._locateOptions;if(d.setView){var g=this.getBoundsZoom(c);this.setView(h,d.maxZoom?Math.min(g,d.maxZoom):g)}var x={latlng:h,bounds:c,timestamp:t.timestamp};for(var S in t.coords)typeof t.coords[S]=="number"&&(x[S]=t.coords[S]);this.fire("locationfound",x)}},addHandler:function(t,n){if(!n)return this;var r=this[t]=new n(this);return this._handlers.push(r),this.options[t]&&r.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(n){this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),at(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)at(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,n){var r="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),h=it("div",r,n||this._mapPane);return t&&(this._panes[t]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),n=this.unproject(t.getBottomLeft()),r=this.unproject(t.getTopRight());return new V(n,r)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,n,r){t=X(t),r=O(r||[0,0]);var h=this.getZoom()||0,c=this.getMinZoom(),d=this.getMaxZoom(),g=t.getNorthWest(),x=t.getSouthEast(),S=this.getSize().subtract(r),M=U(this.project(x,h),this.project(g,h)).getSize(),k=F.any3d?this.options.zoomSnap:1,Q=S.x/M.x,et=S.y/M.y,Jt=n?Math.max(Q,et):Math.min(Q,et);return h=this.getScaleZoom(Jt,h),k&&(h=Math.round(h/(k/100))*(k/100),h=n?Math.ceil(h/k)*k:Math.floor(h/k)*k),Math.max(c,Math.min(d,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,n){var r=this._getTopLeftPoint(t,n);return new z(r,r.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,n){var r=this.options.crs;return n=n===void 0?this._zoom:n,r.scale(t)/r.scale(n)},getScaleZoom:function(t,n){var r=this.options.crs;n=n===void 0?this._zoom:n;var h=r.zoom(t*r.scale(n));return isNaN(h)?1/0:h},project:function(t,n){return n=n===void 0?this._zoom:n,this.options.crs.latLngToPoint(q(t),n)},unproject:function(t,n){return n=n===void 0?this._zoom:n,this.options.crs.pointToLatLng(O(t),n)},layerPointToLatLng:function(t){var n=O(t).add(this.getPixelOrigin());return this.unproject(n)},latLngToLayerPoint:function(t){var n=this.project(q(t))._round();return n._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(q(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(X(t))},distance:function(t,n){return this.options.crs.distance(q(t),q(n))},containerPointToLayerPoint:function(t){return O(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return O(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var n=this.containerPointToLayerPoint(O(t));return this.layerPointToLatLng(n)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(q(t)))},mouseEventToContainerPoint:function(t){return Vr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var n=this._container=Hr(t);if(n){if(n._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");j(n,"scroll",this._onScroll,this),this._containerId=u(n)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&F.any3d,Y(t,"leaflet-container"+(F.touch?" leaflet-touch":"")+(F.retina?" leaflet-retina":"")+(F.ielt9?" leaflet-oldie":"")+(F.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var n=oi(t,"position");n!=="absolute"&&n!=="relative"&&n!=="fixed"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ft(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Y(t.markerPane,"leaflet-zoom-hide"),Y(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,n){ft(this._mapPane,new P(0,0));var r=!this._loaded;this._loaded=!0,n=this._limitZoom(n),this.fire("viewprereset");var h=this._zoom!==n;this._moveStart(h,!1)._move(t,n)._moveEnd(h),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(t,n){return t&&this.fire("zoomstart"),n||this.fire("movestart"),this},_move:function(t,n,r,h){n===void 0&&(n=this._zoom);var c=this._zoom!==n;return this._zoom=n,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),h?r&&r.pinch&&this.fire("zoom",r):((c||r&&r.pinch)&&this.fire("zoom",r),this.fire("move",r)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ft(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[u(this._container)]=this;var n=t?nt:j;n(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&n(window,"resize",this._onResize,this),F.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=K(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,n){for(var r=[],h,c=n==="mouseout"||n==="mouseover",d=t.target||t.srcElement,g=!1;d;){if(h=this._targets[u(d)],h&&(n==="click"||n==="preclick")&&this._draggableMoved(h)){g=!0;break}if(h&&h.listens(n,!0)&&(c&&!Po(d,t)||(r.push(h),c))||d===this._container)break;d=d.parentNode}return!r.length&&!g&&!c&&this.listens(n,!0)&&(r=[this]),r},_isClickDisabled:function(t){for(;t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var n=t.target||t.srcElement;if(!(!this._loaded||n._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(n))){var r=t.type;r==="mousedown"&&go(n),this._fireDOMEvent(t,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,r){if(t.type==="click"){var h=o({},t);h.type="preclick",this._fireDOMEvent(h,h.type,r)}var c=this._findEventTargets(t,n);if(r){for(var d=[],g=0;g<r.length;g++)r[g].listens(n,!0)&&d.push(r[g]);c=d.concat(c)}if(c.length){n==="contextmenu"&&bt(t);var x=c[0],S={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var M=x.getLatLng&&(!x._radius||x._radius<=10);S.containerPoint=M?this.latLngToContainerPoint(x.getLatLng()):this.mouseEventToContainerPoint(t),S.layerPoint=this.containerPointToLayerPoint(S.containerPoint),S.latlng=M?x.getLatLng():this.layerPointToLatLng(S.layerPoint)}for(g=0;g<c.length;g++)if(c[g].fire(n,S,!0),S.originalEvent._stopped||c[g].options.bubblingMouseEvents===!1&&A(this._mouseEvents,n)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,n=this._handlers.length;t<n;t++)this._handlers[t].disable()},whenReady:function(t,n){return this._loaded?t.call(n||this,{target:this}):this.on("load",t,n),this},_getMapPanePos:function(){return ve(this._mapPane)||new P(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,n){var r=t&&n!==void 0?this._getNewPixelOrigin(t,n):this.getPixelOrigin();return r.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,n){var r=this.getSize()._divideBy(2);return this.project(t,n)._subtract(r)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,n,r){var h=this._getNewPixelOrigin(r,n);return this.project(t,n)._subtract(h)},_latLngBoundsToNewLayerBounds:function(t,n,r){var h=this._getNewPixelOrigin(r,n);return U([this.project(t.getSouthWest(),n)._subtract(h),this.project(t.getNorthWest(),n)._subtract(h),this.project(t.getSouthEast(),n)._subtract(h),this.project(t.getNorthEast(),n)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,n,r){if(!r)return t;var h=this.project(t,n),c=this.getSize().divideBy(2),d=new z(h.subtract(c),h.add(c)),g=this._getBoundsOffset(d,r,n);return g.round().equals([0,0])?t:this.unproject(h.add(g),n)},_limitOffset:function(t,n){if(!n)return t;var r=this.getPixelBounds(),h=new z(r.min.add(t),r.max.add(t));return t.add(this._getBoundsOffset(h,n))},_getBoundsOffset:function(t,n,r){var h=U(this.project(n.getNorthEast(),r),this.project(n.getSouthWest(),r)),c=h.min.subtract(t.min),d=h.max.subtract(t.max),g=this._rebound(c.x,-d.x),x=this._rebound(c.y,-d.y);return new P(g,x)},_rebound:function(t,n){return t+n>0?Math.round(t-n)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(n))},_limitZoom:function(t){var n=this.getMinZoom(),r=this.getMaxZoom(),h=F.any3d?this.options.zoomSnap:1;return h&&(t=Math.round(t/h)*h),Math.max(n,Math.min(r,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ct(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,n){var r=this._getCenterOffset(t)._trunc();return(n&&n.animate)!==!0&&!this.getSize().contains(r)?!1:(this.panBy(r,n),!0)},_createAnimProxy:function(){var t=this._proxy=it("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(n){var r=lo,h=this._proxy.style[r];ge(this._proxy,this.project(n.center,n.zoom),this.getZoomScale(n.zoom,1)),h===this._proxy.style[r]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){at(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),n=this.getZoom();ge(this._proxy,this.project(t,n),this.getZoomScale(n,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,n,r){if(this._animatingZoom)return!0;if(r=r||{},!this._zoomAnimated||r.animate===!1||this._nothingToAnimate()||Math.abs(n-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(n),c=this._getCenterOffset(t)._divideBy(1-1/h);return r.animate!==!0&&!this.getSize().contains(c)?!1:(K(function(){this._moveStart(!0,!1)._animateZoom(t,n,!0)},this),!0)},_animateZoom:function(t,n,r,h){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=n,Y(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:n,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ct(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ql(t,n){return new tt(t,n)}var kt=st.extend({options:{position:"topright"},initialize:function(t){v(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var n=this._map;return n&&n.removeControl(this),this.options.position=t,n&&n.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var n=this._container=this.onAdd(t),r=this.getPosition(),h=t._controlCorners[r];return Y(n,"leaflet-control"),r.indexOf("bottom")!==-1?h.insertBefore(n,h.firstChild):h.appendChild(n),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(at(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),li=function(t){return new kt(t)};tt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},n="leaflet-",r=this._controlContainer=it("div",n+"control-container",this._container);function h(c,d){var g=n+c+" "+n+d;t[c+d]=it("div",g,r)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)at(this._controlCorners[t]);at(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Kr=kt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,n,r,h){return r<h?-1:h<r?1:0}},initialize:function(t,n,r){v(this,r),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var h in t)this._addLayer(t[h],h);for(h in n)this._addLayer(n[h],h,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return kt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,n){return this._addLayer(t,n),this._map?this._update():this},addOverlay:function(t,n){return this._addLayer(t,n,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var n=this._getLayer(u(t));return n&&this._layers.splice(this._layers.indexOf(n),1),this._map?this._update():this},expand:function(){Y(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Y(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ct(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ct(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",n=this._container=it("div",t),r=this.options.collapsed;n.setAttribute("aria-haspopup",!0),hi(n),bo(n);var h=this._section=it("section",t+"-list");r&&(this._map.on("click",this.collapse,this),j(n,{mouseenter:function(){j(h,"click",bt),this.expand(),setTimeout(function(){nt(h,"click",bt)})},mouseleave:this.collapse},this));var c=this._layersLink=it("a",t+"-toggle",n);c.href="#",c.title="Layers",c.setAttribute("role","button"),j(c,"click",bt),j(c,"focus",this.expand,this),r||this.expand(),this._baseLayersList=it("div",t+"-base",h),this._separator=it("div",t+"-separator",h),this._overlaysList=it("div",t+"-overlays",h),n.appendChild(h)},_getLayer:function(t){for(var n=0;n<this._layers.length;n++)if(this._layers[n]&&u(this._layers[n].layer)===t)return this._layers[n]},_addLayer:function(t,n,r){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:n,overlay:r}),this.options.sortLayers&&this._layers.sort(a(function(h,c){return this.options.sortFunction(h.layer,c.layer,h.name,c.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Vi(this._baseLayersList),Vi(this._overlaysList),this._layerControlInputs=[];var t,n,r,h,c=0;for(r=0;r<this._layers.length;r++)h=this._layers[r],this._addItem(h),n=n||h.overlay,t=t||!h.overlay,c+=h.overlay?0:1;return this.options.hideSingleBase&&(t=t&&c>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=n&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var n=this._getLayer(u(t.target)),r=n.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;r&&this._map.fire(r,n)},_createRadioElement:function(t,n){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(n?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=r,h.firstChild},_addItem:function(t){var n=document.createElement("label"),r=this._map.hasLayer(t.layer),h;t.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=r):h=this._createRadioElement("leaflet-base-layers_"+u(this),r),this._layerControlInputs.push(h),h.layerId=u(t.layer),j(h,"click",this._onInputClick,this);var c=document.createElement("span");c.innerHTML=" "+t.name;var d=document.createElement("span");n.appendChild(d),d.appendChild(h),d.appendChild(c);var g=t.overlay?this._overlaysList:this._baseLayersList;return g.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t=this._layerControlInputs,n,r,h=[],c=[];this._handlingClick=!0;for(var d=t.length-1;d>=0;d--)n=t[d],r=this._getLayer(n.layerId).layer,n.checked?h.push(r):n.checked||c.push(r);for(d=0;d<c.length;d++)this._map.hasLayer(c[d])&&this._map.removeLayer(c[d]);for(d=0;d<h.length;d++)this._map.hasLayer(h[d])||this._map.addLayer(h[d]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,n,r,h=this._map.getZoom(),c=t.length-1;c>=0;c--)n=t[c],r=this._getLayer(n.layerId).layer,n.disabled=r.options.minZoom!==void 0&&h<r.options.minZoom||r.options.maxZoom!==void 0&&h>r.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),jl=function(t,n,r){return new Kr(t,n,r)},So=kt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var n="leaflet-control-zoom",r=it("div",n+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,n+"-in",r,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,n+"-out",r,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),r},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,n,r,h,c){var d=it("a",r,h);return d.innerHTML=t,d.href="#",d.title=n,d.setAttribute("role","button"),d.setAttribute("aria-label",n),hi(d),j(d,"click",xe),j(d,"click",c,this),j(d,"click",this._refocusOnMap,this),d},_updateDisabled:function(){var t=this._map,n="leaflet-disabled";ct(this._zoomInButton,n),ct(this._zoomOutButton,n),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Y(this._zoomOutButton,n),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Y(this._zoomInButton,n),this._zoomInButton.setAttribute("aria-disabled","true"))}});tt.mergeOptions({zoomControl:!0}),tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new So,this.addControl(this.zoomControl))});var Kl=function(t){return new So(t)},Xr=kt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var n="leaflet-control-scale",r=it("div",n),h=this.options;return this._addScales(h,n+"-line",r),t.on(h.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),r},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,n,r){t.metric&&(this._mScale=it("div",n,r)),t.imperial&&(this._iScale=it("div",n,r))},_update:function(){var t=this._map,n=t.getSize().y/2,r=t.distance(t.containerPointToLatLng([0,n]),t.containerPointToLatLng([this.options.maxWidth,n]));this._updateScales(r)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var n=this._getRoundNum(t),r=n<1e3?n+" m":n/1e3+" km";this._updateScale(this._mScale,r,n/t)},_updateImperial:function(t){var n=t*3.2808399,r,h,c;n>5280?(r=n/5280,h=this._getRoundNum(r),this._updateScale(this._iScale,h+" mi",h/r)):(c=this._getRoundNum(n),this._updateScale(this._iScale,c+" ft",c/n))},_updateScale:function(t,n,r){t.style.width=Math.round(this.options.maxWidth*r)+"px",t.innerHTML=n},_getRoundNum:function(t){var n=Math.pow(10,(Math.floor(t)+"").length-1),r=t/n;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:1,n*r}}),Xl=function(t){return new Xr(t)},Yl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Eo=kt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(F.inlineSvg?Yl+" ":"")+"Leaflet</a>"},initialize:function(t){v(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=it("div","leaflet-control-attribution"),hi(this._container);for(var n in t._layers)t._layers[n].getAttribution&&this.addAttribution(t._layers[n].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var n in this._attributions)this._attributions[n]&&t.push(n);var r=[];this.options.prefix&&r.push(this.options.prefix),t.length&&r.push(t.join(", ")),this._container.innerHTML=r.join(' <span aria-hidden="true">|</span> ')}}});tt.mergeOptions({attributionControl:!0}),tt.addInitHook(function(){this.options.attributionControl&&new Eo().addTo(this)});var $l=function(t){return new Eo(t)};kt.Layers=Kr,kt.Zoom=So,kt.Scale=Xr,kt.Attribution=Eo,li.layers=jl,li.zoom=Kl,li.scale=Xl,li.attribution=$l;var Vt=st.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Vt.addTo=function(t,n){return t.addHandler(n,this),this};var Jl={Events:w},Yr=F.touch?"touchstart mousedown":"mousedown",se=D.extend({options:{clickTolerance:3},initialize:function(t,n,r,h){v(this,h),this._element=t,this._dragStartTarget=n||t,this._preventOutline=r},enable:function(){this._enabled||(j(this._dragStartTarget,Yr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(se._dragging===this&&this.finishDrag(!0),nt(this._dragStartTarget,Yr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!uo(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){se._dragging===this&&this.finishDrag();return}if(!(se._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(se._dragging=this,this._preventOutline&&go(this._element),_o(),ri(),!this._moving)){this.fire("down");var n=t.touches?t.touches[0]:t,r=Gr(this._element);this._startPoint=new P(n.clientX,n.clientY),this._startPos=ve(this._element),this._parentScale=vo(r);var h=t.type==="mousedown";j(document,h?"mousemove":"touchmove",this._onMove,this),j(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var n=t.touches&&t.touches.length===1?t.touches[0]:t,r=new P(n.clientX,n.clientY)._subtract(this._startPoint);!r.x&&!r.y||Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(r.x/=this._parentScale.x,r.y/=this._parentScale.y,bt(t),this._moved||(this.fire("dragstart"),this._moved=!0,Y(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Y(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ft(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ct(document.body,"leaflet-dragging"),this._lastTarget&&(ct(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),nt(document,"mousemove touchmove",this._onMove,this),nt(document,"mouseup touchend touchcancel",this._onUp,this),mo(),si(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,se._dragging=!1}});function $r(t,n){if(!n||!t.length)return t.slice();var r=n*n;return t=eu(t,r),t=tu(t,r),t}function Jr(t,n,r){return Math.sqrt(ui(t,n,r,!0))}function Ql(t,n,r){return ui(t,n,r)}function tu(t,n){var r=t.length,h=typeof Uint8Array!="undefined"?Uint8Array:Array,c=new h(r);c[0]=c[r-1]=1,To(t,c,n,0,r-1);var d,g=[];for(d=0;d<r;d++)c[d]&&g.push(t[d]);return g}function To(t,n,r,h,c){var d=0,g,x,S;for(x=h+1;x<=c-1;x++)S=ui(t[x],t[h],t[c],!0),S>d&&(g=x,d=S);d>r&&(n[g]=1,To(t,n,r,h,g),To(t,n,r,g,c))}function eu(t,n){for(var r=[t[0]],h=1,c=0,d=t.length;h<d;h++)iu(t[h],t[c])>n&&(r.push(t[h]),c=h);return c<d-1&&r.push(t[d-1]),r}var Qr;function ts(t,n,r,h,c){var d=h?Qr:we(t,r),g=we(n,r),x,S,M;for(Qr=g;;){if(!(d|g))return[t,n];if(d&g)return!1;x=d||g,S=Yi(t,n,x,r,c),M=we(S,r),x===d?(t=S,d=M):(n=S,g=M)}}function Yi(t,n,r,h,c){var d=n.x-t.x,g=n.y-t.y,x=h.min,S=h.max,M,k;return r&8?(M=t.x+d*(S.y-t.y)/g,k=S.y):r&4?(M=t.x+d*(x.y-t.y)/g,k=x.y):r&2?(M=S.x,k=t.y+g*(S.x-t.x)/d):r&1&&(M=x.x,k=t.y+g*(x.x-t.x)/d),new P(M,k,c)}function we(t,n){var r=0;return t.x<n.min.x?r|=1:t.x>n.max.x&&(r|=2),t.y<n.min.y?r|=4:t.y>n.max.y&&(r|=8),r}function iu(t,n){var r=n.x-t.x,h=n.y-t.y;return r*r+h*h}function ui(t,n,r,h){var c=n.x,d=n.y,g=r.x-c,x=r.y-d,S=g*g+x*x,M;return S>0&&(M=((t.x-c)*g+(t.y-d)*x)/S,M>1?(c=r.x,d=r.y):M>0&&(c+=g*M,d+=x*M)),g=t.x-c,x=t.y-d,h?g*g+x*x:new P(c,d)}function Kt(t){return!T(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]!="undefined"}function es(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Kt(t)}var nu={__proto__:null,simplify:$r,pointToSegmentDistance:Jr,closestPointOnSegment:Ql,clipSegment:ts,_getEdgeIntersection:Yi,_getBitCode:we,_sqClosestPointOnSegment:ui,isFlat:Kt,_flat:es};function is(t,n,r){var h,c=[1,4,2,8],d,g,x,S,M,k,Q,et;for(d=0,k=t.length;d<k;d++)t[d]._code=we(t[d],n);for(x=0;x<4;x++){for(Q=c[x],h=[],d=0,k=t.length,g=k-1;d<k;g=d++)S=t[d],M=t[g],S._code&Q?M._code&Q||(et=Yi(M,S,Q,n,r),et._code=we(et,n),h.push(et)):(M._code&Q&&(et=Yi(M,S,Q,n,r),et._code=we(et,n),h.push(et)),h.push(S));t=h}return t}var ou={__proto__:null,clipPolygon:is},Lo={project:function(t){return new P(t.lng,t.lat)},unproject:function(t){return new J(t.y,t.x)},bounds:new z([-180,-90],[180,90])},Co={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var n=Math.PI/180,r=this.R,h=t.lat*n,c=this.R_MINOR/r,d=Math.sqrt(1-c*c),g=d*Math.sin(h),x=Math.tan(Math.PI/4-h/2)/Math.pow((1-g)/(1+g),d/2);return h=-r*Math.log(Math.max(x,1e-10)),new P(t.lng*n*r,h)},unproject:function(t){for(var n=180/Math.PI,r=this.R,h=this.R_MINOR/r,c=Math.sqrt(1-h*h),d=Math.exp(-t.y/r),g=Math.PI/2-2*Math.atan(d),x=0,S=.1,M;x<15&&Math.abs(S)>1e-7;x++)M=c*Math.sin(g),M=Math.pow((1-M)/(1+M),c/2),S=Math.PI/2-2*Math.atan(d*M)-g,g+=S;return new J(g*n,t.x*n/r)}},ru={__proto__:null,LonLat:Lo,Mercator:Co,SphericalMercator:Mt},su=o({},pt,{code:"EPSG:3395",projection:Co,transformation:function(){var t=.5/(Math.PI*Co.R);return ei(t,.5,-t,.5)}()}),ns=o({},pt,{code:"EPSG:4326",projection:Lo,transformation:ei(1/180,1,-1/180,.5)}),au=o({},ut,{projection:Lo,transformation:ei(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,n){var r=n.lng-t.lng,h=n.lat-t.lat;return Math.sqrt(r*r+h*h)},infinite:!0});ut.Earth=pt,ut.EPSG3395=su,ut.EPSG3857=io,ut.EPSG900913=ml,ut.EPSG4326=ns,ut.Simple=au;var Bt=D.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[u(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[u(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var n=t.target;if(n.hasLayer(this)){if(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents){var r=this.getEvents();n.on(r,this),this.once("remove",function(){n.off(r,this)},this)}this.onAdd(n),this.fire("add"),n.fire("layeradd",{layer:this})}}});tt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var n=u(t);return this._layers[n]?this:(this._layers[n]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var n=u(t);return this._layers[n]?(this._loaded&&t.onRemove(this),delete this._layers[n],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return u(t)in this._layers},eachLayer:function(t,n){for(var r in this._layers)t.call(n,this._layers[r]);return this},_addLayers:function(t){t=t?T(t)?t:[t]:[];for(var n=0,r=t.length;n<r;n++)this.addLayer(t[n])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[u(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var n=u(t);this._zoomBoundLayers[n]&&(delete this._zoomBoundLayers[n],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,n=-1/0,r=this._getZoomSpan();for(var h in this._zoomBoundLayers){var c=this._zoomBoundLayers[h].options;t=c.minZoom===void 0?t:Math.min(t,c.minZoom),n=c.maxZoom===void 0?n:Math.max(n,c.maxZoom)}this._layersMaxZoom=n===-1/0?void 0:n,this._layersMinZoom=t===1/0?void 0:t,r!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ze=Bt.extend({initialize:function(t,n){v(this,n),this._layers={};var r,h;if(t)for(r=0,h=t.length;r<h;r++)this.addLayer(t[r])},addLayer:function(t){var n=this.getLayerId(t);return this._layers[n]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var n=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[n]&&this._map.removeLayer(this._layers[n]),delete this._layers[n],this},hasLayer:function(t){var n=typeof t=="number"?t:this.getLayerId(t);return n in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var n=Array.prototype.slice.call(arguments,1),r,h;for(r in this._layers)h=this._layers[r],h[t]&&h[t].apply(h,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,n){for(var r in this._layers)t.call(n,this._layers[r]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return u(t)}}),hu=function(t,n){return new Ze(t,n)},Fe=Ze.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ze.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ze.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new V;for(var n in this._layers){var r=this._layers[n];t.extend(r.getBounds?r.getBounds():r.getLatLng())}return t}}),lu=function(t,n){return new Fe(t,n)},Ue=st.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){v(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,n){var r=this._getIconUrl(t);if(!r){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(r,n&&n.tagName==="IMG"?n:null);return this._setIconStyles(h,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(t,n){var r=this.options,h=r[n+"Size"];typeof h=="number"&&(h=[h,h]);var c=O(h),d=O(n==="shadow"&&r.shadowAnchor||r.iconAnchor||c&&c.divideBy(2,!0));t.className="leaflet-marker-"+n+" "+(r.className||""),d&&(t.style.marginLeft=-d.x+"px",t.style.marginTop=-d.y+"px"),c&&(t.style.width=c.x+"px",t.style.height=c.y+"px")},_createImg:function(t,n){return n=n||document.createElement("img"),n.src=t,n},_getIconUrl:function(t){return F.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function uu(t){return new Ue(t)}var ci=Ue.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof ci.imagePath!="string"&&(ci.imagePath=this._detectIconPath()),(this.options.imagePath||ci.imagePath)+Ue.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var n=function(r,h,c){var d=h.exec(r);return d&&d[c]};return t=n(t,/^url\((['"])?(.+)\1\)$/,2),t&&n(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=it("div","leaflet-default-icon-path",document.body),n=oi(t,"background-image")||oi(t,"backgroundImage");if(document.body.removeChild(t),n=this._stripUrl(n),n)return n;var r=document.querySelector('link[href$="leaflet.css"]');return r?r.href.substring(0,r.href.length-11-1):""}}),os=Vt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new se(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Y(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ct(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var n=this._marker,r=n._map,h=this._marker.options.autoPanSpeed,c=this._marker.options.autoPanPadding,d=ve(n._icon),g=r.getPixelBounds(),x=r.getPixelOrigin(),S=U(g.min._subtract(x).add(c),g.max._subtract(x).subtract(c));if(!S.contains(d)){var M=O((Math.max(S.max.x,d.x)-S.max.x)/(g.max.x-S.max.x)-(Math.min(S.min.x,d.x)-S.min.x)/(g.min.x-S.min.x),(Math.max(S.max.y,d.y)-S.max.y)/(g.max.y-S.max.y)-(Math.min(S.min.y,d.y)-S.min.y)/(g.min.y-S.min.y)).multiplyBy(h);r.panBy(M,{animate:!1}),this._draggable._newPos._add(M),this._draggable._startPos._add(M),ft(n._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=K(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=K(this._adjustPan.bind(this,t)))},_onDrag:function(t){var n=this._marker,r=n._shadow,h=ve(n._icon),c=n._map.layerPointToLatLng(h);r&&ft(r,h),n._latlng=c,t.latlng=c,t.oldLatLng=this._oldLatLng,n.fire("move",t).fire("drag",t)},_onDragEnd:function(t){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),$i=Bt.extend({options:{icon:new ci,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,n){v(this,n),this._latlng=q(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var n=this._latlng;return this._latlng=q(t),this.update(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,n="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),r=t.icon.createIcon(this._icon),h=!1;r!==this._icon&&(this._icon&&this._removeIcon(),h=!0,t.title&&(r.title=t.title),r.tagName==="IMG"&&(r.alt=t.alt||"")),Y(r,n),t.keyboard&&(r.tabIndex="0",r.setAttribute("role","button")),this._icon=r,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&j(r,"focus",this._panOnFocus,this);var c=t.icon.createShadow(this._shadow),d=!1;c!==this._shadow&&(this._removeShadow(),d=!0),c&&(Y(c,n),c.alt=""),this._shadow=c,t.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),c&&d&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nt(this._icon,"focus",this._panOnFocus,this),at(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&at(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ft(this._icon,t),this._shadow&&ft(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(n)},_initInteraction:function(){if(this.options.interactive&&(Y(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),os)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new os(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Ot(this._icon,t),this._shadow&&Ot(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var n=this.options.icon.options,r=n.iconSize?O(n.iconSize):O(0,0),h=n.iconAnchor?O(n.iconAnchor):O(0,0);t.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:r.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function cu(t,n){return new $i(t,n)}var ae=Bt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return v(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ji=ae.extend({options:{fill:!0,radius:10},initialize:function(t,n){v(this,n),this._latlng=q(t),this._radius=this.options.radius},setLatLng:function(t){var n=this._latlng;return this._latlng=q(t),this.redraw(),this.fire("move",{oldLatLng:n,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var n=t&&t.radius||this._radius;return ae.prototype.setStyle.call(this,t),this.setRadius(n),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,n=this._radiusY||t,r=this._clickTolerance(),h=[t+r,n+r];this._pxBounds=new z(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fu(t,n){return new Ji(t,n)}var No=Ji.extend({initialize:function(t,n,r){if(typeof n=="number"&&(n=o({},r,{radius:n})),v(this,n),this._latlng=q(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new V(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ae.prototype.setStyle,_project:function(){var t=this._latlng.lng,n=this._latlng.lat,r=this._map,h=r.options.crs;if(h.distance===pt.distance){var c=Math.PI/180,d=this._mRadius/pt.R/c,g=r.project([n+d,t]),x=r.project([n-d,t]),S=g.add(x).divideBy(2),M=r.unproject(S).lat,k=Math.acos((Math.cos(d*c)-Math.sin(n*c)*Math.sin(M*c))/(Math.cos(n*c)*Math.cos(M*c)))/c;(isNaN(k)||k===0)&&(k=d/Math.cos(Math.PI/180*n)),this._point=S.subtract(r.getPixelOrigin()),this._radius=isNaN(k)?0:S.x-r.project([M,t-k]).x,this._radiusY=S.y-g.y}else{var Q=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=r.latLngToLayerPoint(this._latlng),this._radius=this._point.x-r.latLngToLayerPoint(Q).x}this._updateBounds()}});function du(t,n,r){return new No(t,n,r)}var Xt=ae.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,n){v(this,n),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var n=1/0,r=null,h=ui,c,d,g=0,x=this._parts.length;g<x;g++)for(var S=this._parts[g],M=1,k=S.length;M<k;M++){c=S[M-1],d=S[M];var Q=h(t,c,d,!0);Q<n&&(n=Q,r=h(t,c,d))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,n,r,h,c,d,g,x=this._rings[0],S=x.length;if(!S)return null;for(t=0,n=0;t<S-1;t++)n+=x[t].distanceTo(x[t+1])/2;if(n===0)return this._map.layerPointToLatLng(x[0]);for(t=0,h=0;t<S-1;t++)if(c=x[t],d=x[t+1],r=c.distanceTo(d),h+=r,h>n)return g=(h-n)/r,this._map.layerPointToLatLng([d.x-g*(d.x-c.x),d.y-g*(d.y-c.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,n){return n=n||this._defaultShape(),t=q(t),n.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new V,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Kt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var n=[],r=Kt(t),h=0,c=t.length;h<c;h++)r?(n[h]=q(t[h]),this._bounds.extend(n[h])):n[h]=this._convertLatLngs(t[h]);return n},_project:function(){var t=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),n=new P(t,t);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(n),this._rawPxBounds.max.add(n)]))},_projectLatlngs:function(t,n,r){var h=t[0]instanceof J,c=t.length,d,g;if(h){for(g=[],d=0;d<c;d++)g[d]=this._map.latLngToLayerPoint(t[d]),r.extend(g[d]);n.push(g)}else for(d=0;d<c;d++)this._projectLatlngs(t[d],n,r)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var n=this._parts,r,h,c,d,g,x,S;for(r=0,c=0,d=this._rings.length;r<d;r++)for(S=this._rings[r],h=0,g=S.length;h<g-1;h++)x=ts(S[h],S[h+1],t,h,!0),x&&(n[c]=n[c]||[],n[c].push(x[0]),(x[1]!==S[h+1]||h===g-2)&&(n[c].push(x[1]),c++))}},_simplifyPoints:function(){for(var t=this._parts,n=this.options.smoothFactor,r=0,h=t.length;r<h;r++)t[r]=$r(t[r],n)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,n){var r,h,c,d,g,x,S=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,d=this._parts.length;r<d;r++)for(x=this._parts[r],h=0,g=x.length,c=g-1;h<g;c=h++)if(!(!n&&h===0)&&Jr(t,x[c],x[h])<=S)return!0;return!1}});function _u(t,n){return new Xt(t,n)}Xt._flat=es;var He=Xt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,n,r,h,c,d,g,x,S,M=this._rings[0],k=M.length;if(!k)return null;for(d=g=x=0,t=0,n=k-1;t<k;n=t++)r=M[t],h=M[n],c=r.y*h.x-h.y*r.x,g+=(r.x+h.x)*c,x+=(r.y+h.y)*c,d+=c*3;return d===0?S=M[0]:S=[g/d,x/d],this._map.layerPointToLatLng(S)},_convertLatLngs:function(t){var n=Xt.prototype._convertLatLngs.call(this,t),r=n.length;return r>=2&&n[0]instanceof J&&n[0].equals(n[r-1])&&n.pop(),n},_setLatLngs:function(t){Xt.prototype._setLatLngs.call(this,t),Kt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Kt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,n=this.options.weight,r=new P(n,n);if(t=new z(t.min.subtract(r),t.max.add(r)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,c=this._rings.length,d;h<c;h++)d=is(this._rings[h],t,!0),d.length&&this._parts.push(d)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var n=!1,r,h,c,d,g,x,S,M;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(d=0,S=this._parts.length;d<S;d++)for(r=this._parts[d],g=0,M=r.length,x=M-1;g<M;x=g++)h=r[g],c=r[x],h.y>t.y!=c.y>t.y&&t.x<(c.x-h.x)*(t.y-h.y)/(c.y-h.y)+h.x&&(n=!n);return n||Xt.prototype._containsPoint.call(this,t,!0)}});function mu(t,n){return new He(t,n)}var Yt=Fe.extend({initialize:function(t,n){v(this,n),this._layers={},t&&this.addData(t)},addData:function(t){var n=T(t)?t:t.features,r,h,c;if(n){for(r=0,h=n.length;r<h;r++)c=n[r],(c.geometries||c.geometry||c.features||c.coordinates)&&this.addData(c);return this}var d=this.options;if(d.filter&&!d.filter(t))return this;var g=Mo(t,d);return g?(g.feature=en(t),g.defaultOptions=g.options,this.resetStyle(g),d.onEachFeature&&d.onEachFeature(t,g),this.addLayer(g)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=o({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(n){this._setLayerStyle(n,t)},this)},_setLayerStyle:function(t,n){t.setStyle&&(typeof n=="function"&&(n=n(t.feature)),t.setStyle(n))}});function Mo(t,n){var r=t.type==="Feature"?t.geometry:t,h=r?r.coordinates:null,c=[],d=n&&n.pointToLayer,g=n&&n.coordsToLatLng||Io,x,S,M,k;if(!h&&!r)return null;switch(r.type){case"Point":return x=g(h),rs(d,t,x,n);case"MultiPoint":for(M=0,k=h.length;M<k;M++)x=g(h[M]),c.push(rs(d,t,x,n));return new Fe(c);case"LineString":case"MultiLineString":return S=Qi(h,r.type==="LineString"?0:1,g),new Xt(S,n);case"Polygon":case"MultiPolygon":return S=Qi(h,r.type==="Polygon"?1:2,g),new He(S,n);case"GeometryCollection":for(M=0,k=r.geometries.length;M<k;M++){var Q=Mo({geometry:r.geometries[M],type:"Feature",properties:t.properties},n);Q&&c.push(Q)}return new Fe(c);default:throw new Error("Invalid GeoJSON object.")}}function rs(t,n,r,h){return t?t(n,r):new $i(r,h&&h.markersInheritOptions&&h)}function Io(t){return new J(t[1],t[0],t[2])}function Qi(t,n,r){for(var h=[],c=0,d=t.length,g;c<d;c++)g=n?Qi(t[c],n-1,r):(r||Io)(t[c]),h.push(g);return h}function Oo(t,n){return t=q(t),t.alt!==void 0?[p(t.lng,n),p(t.lat,n),p(t.alt,n)]:[p(t.lng,n),p(t.lat,n)]}function tn(t,n,r,h){for(var c=[],d=0,g=t.length;d<g;d++)c.push(n?tn(t[d],n-1,r,h):Oo(t[d],h));return!n&&r&&c.push(c[0]),c}function Ge(t,n){return t.feature?o({},t.feature,{geometry:n}):en(n)}function en(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Ao={toGeoJSON:function(t){return Ge(this,{type:"Point",coordinates:Oo(this.getLatLng(),t)})}};$i.include(Ao),No.include(Ao),Ji.include(Ao),Xt.include({toGeoJSON:function(t){var n=!Kt(this._latlngs),r=tn(this._latlngs,n?1:0,!1,t);return Ge(this,{type:(n?"Multi":"")+"LineString",coordinates:r})}}),He.include({toGeoJSON:function(t){var n=!Kt(this._latlngs),r=n&&!Kt(this._latlngs[0]),h=tn(this._latlngs,r?2:n?1:0,!0,t);return n||(h=[h]),Ge(this,{type:(r?"Multi":"")+"Polygon",coordinates:h})}}),Ze.include({toMultiPoint:function(t){var n=[];return this.eachLayer(function(r){n.push(r.toGeoJSON(t).geometry.coordinates)}),Ge(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(t){var n=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(n==="MultiPoint")return this.toMultiPoint(t);var r=n==="GeometryCollection",h=[];return this.eachLayer(function(c){if(c.toGeoJSON){var d=c.toGeoJSON(t);if(r)h.push(d.geometry);else{var g=en(d);g.type==="FeatureCollection"?h.push.apply(h,g.features):h.push(g)}}}),r?Ge(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function ss(t,n){return new Yt(t,n)}var pu=ss,nn=Bt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,n,r){this._url=t,this._bounds=X(n),v(this,r)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Y(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){at(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Be(this._image),this},bringToBack:function(){return this._map&&Re(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=X(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",n=this._image=t?this._url:it("img");if(Y(n,"leaflet-image-layer"),this._zoomAnimated&&Y(n,"leaflet-zoom-animated"),this.options.className&&Y(n,this.options.className),n.onselectstart=m,n.onmousemove=m,n.onload=a(this.fire,this,"load"),n.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=n.src;return}n.src=this._url,n.alt=this.options.alt},_animateZoom:function(t){var n=this._map.getZoomScale(t.zoom),r=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ge(this._image,r,n)},_reset:function(){var t=this._image,n=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),r=n.getSize();ft(t,n.min),t.style.width=r.x+"px",t.style.height=r.y+"px"},_updateOpacity:function(){Ot(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),gu=function(t,n,r){return new nn(t,n,r)},as=nn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",n=this._image=t?this._url:it("video");if(Y(n,"leaflet-image-layer"),this._zoomAnimated&&Y(n,"leaflet-zoom-animated"),this.options.className&&Y(n,this.options.className),n.onselectstart=m,n.onmousemove=m,n.onloadeddata=a(this.fire,this,"load"),t){for(var r=n.getElementsByTagName("source"),h=[],c=0;c<r.length;c++)h.push(r[c].src);this._url=r.length>0?h:[n.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(n.style,"objectFit")&&(n.style.objectFit="fill"),n.autoplay=!!this.options.autoplay,n.loop=!!this.options.loop,n.muted=!!this.options.muted,n.playsInline=!!this.options.playsInline;for(var d=0;d<this._url.length;d++){var g=it("source");g.src=this._url[d],n.appendChild(g)}}});function vu(t,n,r){return new as(t,n,r)}var hs=nn.extend({_initImage:function(){var t=this._image=this._url;Y(t,"leaflet-image-layer"),this._zoomAnimated&&Y(t,"leaflet-zoom-animated"),this.options.className&&Y(t,this.options.className),t.onselectstart=m,t.onmousemove=m}});function yu(t,n,r){return new hs(t,n,r)}var qt=Bt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(t,n){v(this,t),this._source=n},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ot(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ot(this._container,1),this.bringToFront(),this.options.interactive&&(Y(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Ot(this._container,0),this._removeTimeout=setTimeout(a(at,void 0,this._container),200)):at(this._container),this.options.interactive&&(ct(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=q(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Be(this._container),this},bringToBack:function(){return this._map&&Re(this._container),this},_prepareOpen:function(t){var n=this._source;if(!n._map)return!1;if(n instanceof Fe){n=null;var r=this._source._layers;for(var h in r)if(r[h]._map){n=r[h];break}if(!n)return!1;this._source=n}if(!t)if(n.getCenter)t=n.getCenter();else if(n.getLatLng)t=n.getLatLng();else if(n.getBounds)t=n.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,n=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof n=="string")t.innerHTML=n;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(n)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),n=O(this.options.offset),r=this._getAnchor();this._zoomAnimated?ft(this._container,t.add(r)):n=n.add(t).add(r);var h=this._containerBottom=-n.y,c=this._containerLeft=-Math.round(this._containerWidth/2)+n.x;this._container.style.bottom=h+"px",this._container.style.left=c+"px"}},_getAnchor:function(){return[0,0]}});tt.include({_initOverlay:function(t,n,r,h){var c=n;return c instanceof t||(c=new t(h).setContent(n)),r&&c.setLatLng(r),c}}),Bt.include({_initOverlay:function(t,n,r,h){var c=r;return c instanceof t?(v(c,h),c._source=this):(c=n&&!h?n:new t(h,this),c.setContent(r)),c}});var on=qt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,qt.prototype.openOn.call(this,t)},onAdd:function(t){qt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ae||this._source.on("preclick",ye))},onRemove:function(t){qt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ae||this._source.off("preclick",ye))},getEvents:function(){var t=qt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",n=this._container=it("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),r=this._wrapper=it("div",t+"-content-wrapper",n);if(this._contentNode=it("div",t+"-content",r),hi(n),bo(this._contentNode),j(n,"contextmenu",ye),this._tipContainer=it("div",t+"-tip-container",n),this._tip=it("div",t+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=it("a",t+"-close-button",n);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',j(h,"click",this.close,this)}},_updateLayout:function(){var t=this._contentNode,n=t.style;n.width="",n.whiteSpace="nowrap";var r=t.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),n.width=r+1+"px",n.whiteSpace="",n.height="";var h=t.offsetHeight,c=this.options.maxHeight,d="leaflet-popup-scrolled";c&&h>c?(n.height=c+"px",Y(t,d)):ct(t,d),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),r=this._getAnchor();ft(this._container,n.add(r))},_adjustPan:function(t){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var n=this._map,r=parseInt(oi(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+r,c=this._containerWidth,d=new P(this._containerLeft,-h-this._containerBottom);d._add(ve(this._container));var g=n.layerPointToContainerPoint(d),x=O(this.options.autoPanPadding),S=O(this.options.autoPanPaddingTopLeft||x),M=O(this.options.autoPanPaddingBottomRight||x),k=n.getSize(),Q=0,et=0;g.x+c+M.x>k.x&&(Q=g.x+c-k.x+M.x),g.x-Q-S.x<0&&(Q=g.x-S.x),g.y+h+M.y>k.y&&(et=g.y+h-k.y+M.y),g.y-et-S.y<0&&(et=g.y-S.y),(Q||et)&&n.fire("autopanstart").panBy([Q,et],{animate:t&&t.type==="moveend"})}},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xu=function(t,n){return new on(t,n)};tt.mergeOptions({closePopupOnClick:!0}),tt.include({openPopup:function(t,n,r){return this._initOverlay(on,t,n,r).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Bt.include({bindPopup:function(t,n){return this._popup=this._initOverlay(on,this._popup,t,n),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&this._popup._prepareOpen(t)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){xe(t);var n=t.layer||t.target;if(this._popup._source===n&&!(n instanceof ae)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=n,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var rn=qt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){qt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){qt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=qt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",n=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=it("div",n)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var n,r,h=this._map,c=this._container,d=h.latLngToContainerPoint(h.getCenter()),g=h.layerPointToContainerPoint(t),x=this.options.direction,S=c.offsetWidth,M=c.offsetHeight,k=O(this.options.offset),Q=this._getAnchor();x==="top"?(n=S/2,r=M):x==="bottom"?(n=S/2,r=0):x==="center"?(n=S/2,r=M/2):x==="right"?(n=0,r=M/2):x==="left"?(n=S,r=M/2):g.x<d.x?(x="right",n=0,r=M/2):(x="left",n=S+(k.x+Q.x)*2,r=M/2),t=t.subtract(O(n,r,!0)).add(k).add(Q),ct(c,"leaflet-tooltip-right"),ct(c,"leaflet-tooltip-left"),ct(c,"leaflet-tooltip-top"),ct(c,"leaflet-tooltip-bottom"),Y(c,"leaflet-tooltip-"+x),ft(c,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ot(this._container,t)},_animateZoom:function(t){var n=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(n)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),wu=function(t,n){return new rn(t,n)};tt.include({openTooltip:function(t,n,r){return this._initOverlay(rn,t,n,r).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Bt.include({bindTooltip:function(t,n){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(rn,this._tooltip,t,n),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var n=t?"off":"on",r={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?r.add=this._openTooltip:(r.mouseover=this._openTooltip,r.mouseout=this.closeTooltip,r.click=this._openTooltip),this._tooltip.options.sticky&&(r.mousemove=this._moveTooltip),this[n](r),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&this._tooltip._prepareOpen(t)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var n=t.latlng,r,h;this._tooltip.options.sticky&&t.originalEvent&&(r=this._map.mouseEventToContainerPoint(t.originalEvent),h=this._map.containerPointToLayerPoint(r),n=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(n)}});var ls=Ue.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var n=t&&t.tagName==="DIV"?t:document.createElement("div"),r=this.options;if(r.html instanceof Element?(Vi(n),n.appendChild(r.html)):n.innerHTML=r.html!==!1?r.html:"",r.bgPos){var h=O(r.bgPos);n.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(n,"icon"),n},createShadow:function(){return null}});function bu(t){return new ls(t)}Ue.Default=ci;var fi=Bt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:F.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){v(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),at(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Be(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Re(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof P?t:new P(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var n=this.getPane().children,r=-t(-1/0,1/0),h=0,c=n.length,d;h<c;h++)d=n[h].style.zIndex,n[h]!==this._container&&d&&(r=t(r,+d));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!F.ielt9){Ot(this._container,this.options.opacity);var t=+new Date,n=!1,r=!1;for(var h in this._tiles){var c=this._tiles[h];if(!(!c.current||!c.loaded)){var d=Math.min(1,(t-c.loaded)/200);Ot(c.el,d),d<1?n=!0:(c.active?r=!0:this._onOpaqueTile(c),c.active=!0)}}r&&!this._noPrune&&this._pruneTiles(),n&&(W(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=it("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,n=this.options.maxZoom;if(t!==void 0){for(var r in this._levels)r=Number(r),this._levels[r].el.children.length||r===t?(this._levels[r].el.style.zIndex=n-Math.abs(t-r),this._onUpdateLevel(r)):(at(this._levels[r].el),this._removeTilesAtZoom(r),this._onRemoveLevel(r),delete this._levels[r]);var h=this._levels[t],c=this._map;return h||(h=this._levels[t]={},h.el=it("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=n,h.origin=c.project(c.unproject(c.getPixelOrigin()),t).round(),h.zoom=t,this._setZoomTransform(h,c.getCenter(),c.getZoom()),m(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var t,n,r=this._map.getZoom();if(r>this.options.maxZoom||r<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)n=this._tiles[t],n.retain=n.current;for(t in this._tiles)if(n=this._tiles[t],n.current&&!n.active){var h=n.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var n in this._tiles)this._tiles[n].coords.z===t&&this._removeTile(n)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)at(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,n,r,h){var c=Math.floor(t/2),d=Math.floor(n/2),g=r-1,x=new P(+c,+d);x.z=+g;var S=this._tileCoordsToKey(x),M=this._tiles[S];return M&&M.active?(M.retain=!0,!0):(M&&M.loaded&&(M.retain=!0),g>h?this._retainParent(c,d,g,h):!1)},_retainChildren:function(t,n,r,h){for(var c=2*t;c<2*t+2;c++)for(var d=2*n;d<2*n+2;d++){var g=new P(c,d);g.z=r+1;var x=this._tileCoordsToKey(g),S=this._tiles[x];if(S&&S.active){S.retain=!0;continue}else S&&S.loaded&&(S.retain=!0);r+1<h&&this._retainChildren(c,d,r+1,h)}},_resetView:function(t){var n=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),n,n)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var n=this.options;return n.minNativeZoom!==void 0&&t<n.minNativeZoom?n.minNativeZoom:n.maxNativeZoom!==void 0&&n.maxNativeZoom<t?n.maxNativeZoom:t},_setView:function(t,n,r,h){var c=Math.round(n);this.options.maxZoom!==void 0&&c>this.options.maxZoom||this.options.minZoom!==void 0&&c<this.options.minZoom?c=void 0:c=this._clampZoom(c);var d=this.options.updateWhenZooming&&c!==this._tileZoom;(!h||d)&&(this._tileZoom=c,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),c!==void 0&&this._update(t),r||this._pruneTiles(),this._noPrune=!!r),this._setZoomTransforms(t,n)},_setZoomTransforms:function(t,n){for(var r in this._levels)this._setZoomTransform(this._levels[r],t,n)},_setZoomTransform:function(t,n,r){var h=this._map.getZoomScale(r,t.zoom),c=t.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(n,r)).round();F.any3d?ge(t.el,c,h):ft(t.el,c)},_resetGrid:function(){var t=this._map,n=t.options.crs,r=this._tileSize=this.getTileSize(),h=this._tileZoom,c=this._map.getPixelWorldBounds(this._tileZoom);c&&(this._globalTileRange=this._pxBoundsToTileRange(c)),this._wrapX=n.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,n.wrapLng[0]],h).x/r.x),Math.ceil(t.project([0,n.wrapLng[1]],h).x/r.y)],this._wrapY=n.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([n.wrapLat[0],0],h).y/r.x),Math.ceil(t.project([n.wrapLat[1],0],h).y/r.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var n=this._map,r=n._animatingZoom?Math.max(n._animateToZoom,n.getZoom()):n.getZoom(),h=n.getZoomScale(r,this._tileZoom),c=n.project(t,this._tileZoom).floor(),d=n.getSize().divideBy(h*2);return new z(c.subtract(d),c.add(d))},_update:function(t){var n=this._map;if(n){var r=this._clampZoom(n.getZoom());if(t===void 0&&(t=n.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(t),c=this._pxBoundsToTileRange(h),d=c.getCenter(),g=[],x=this.options.keepBuffer,S=new z(c.getBottomLeft().subtract([x,-x]),c.getTopRight().add([x,-x]));if(!(isFinite(c.min.x)&&isFinite(c.min.y)&&isFinite(c.max.x)&&isFinite(c.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var M in this._tiles){var k=this._tiles[M].coords;(k.z!==this._tileZoom||!S.contains(new P(k.x,k.y)))&&(this._tiles[M].current=!1)}if(Math.abs(r-this._tileZoom)>1){this._setView(t,r);return}for(var Q=c.min.y;Q<=c.max.y;Q++)for(var et=c.min.x;et<=c.max.x;et++){var Jt=new P(et,Q);if(Jt.z=this._tileZoom,!!this._isValidTile(Jt)){var be=this._tiles[this._tileCoordsToKey(Jt)];be?be.current=!0:g.push(Jt)}}if(g.sort(function(he,Do){return he.distanceTo(d)-Do.distanceTo(d)}),g.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var an=document.createDocumentFragment();for(et=0;et<g.length;et++)this._addTile(g[et],an);this._level.el.appendChild(an)}}}},_isValidTile:function(t){var n=this._map.options.crs;if(!n.infinite){var r=this._globalTileRange;if(!n.wrapLng&&(t.x<r.min.x||t.x>r.max.x)||!n.wrapLat&&(t.y<r.min.y||t.y>r.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(t);return X(this.options.bounds).overlaps(h)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var n=this._map,r=this.getTileSize(),h=t.scaleBy(r),c=h.add(r),d=n.unproject(h,t.z),g=n.unproject(c,t.z);return[d,g]},_tileCoordsToBounds:function(t){var n=this._tileCoordsToNwSe(t),r=new V(n[0],n[1]);return this.options.noWrap||(r=this._map.wrapLatLngBounds(r)),r},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var n=t.split(":"),r=new P(+n[0],+n[1]);return r.z=+n[2],r},_removeTile:function(t){var n=this._tiles[t];n&&(at(n.el),delete this._tiles[t],this.fire("tileunload",{tile:n.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Y(t,"leaflet-tile");var n=this.getTileSize();t.style.width=n.x+"px",t.style.height=n.y+"px",t.onselectstart=m,t.onmousemove=m,F.ielt9&&this.options.opacity<1&&Ot(t,this.options.opacity)},_addTile:function(t,n){var r=this._getTilePos(t),h=this._tileCoordsToKey(t),c=this.createTile(this._wrapCoords(t),a(this._tileReady,this,t));this._initTile(c),this.createTile.length<2&&K(a(this._tileReady,this,t,null,c)),ft(c,r),this._tiles[h]={el:c,coords:t,current:!0},n.appendChild(c),this.fire("tileloadstart",{tile:c,coords:t})},_tileReady:function(t,n,r){n&&this.fire("tileerror",{error:n,tile:r,coords:t});var h=this._tileCoordsToKey(t);r=this._tiles[h],r&&(r.loaded=+new Date,this._map._fadeAnimated?(Ot(r.el,0),W(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),n||(Y(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),F.ielt9||!this._map._fadeAnimated?K(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var n=new P(this._wrapX?_(t.x,this._wrapX):t.x,this._wrapY?_(t.y,this._wrapY):t.y);return n.z=t.z,n},_pxBoundsToTileRange:function(t){var n=this.getTileSize();return new z(t.min.unscaleBy(n).floor(),t.max.unscaleBy(n).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Pu(t){return new fi(t)}var We=fi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,n){this._url=t,n=v(this,n),n.detectRetina&&F.retina&&n.maxZoom>0&&(n.tileSize=Math.floor(n.tileSize/2),n.zoomReverse?(n.zoomOffset--,n.minZoom++):(n.zoomOffset++,n.maxZoom--),n.minZoom=Math.max(0,n.minZoom)),typeof n.subdomains=="string"&&(n.subdomains=n.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,n){return this._url===t&&n===void 0&&(n=!0),this._url=t,n||this.redraw(),this},createTile:function(t,n){var r=document.createElement("img");return j(r,"load",a(this._tileOnLoad,this,n,r)),j(r,"error",a(this._tileOnError,this,n,r)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(r.referrerPolicy=this.options.referrerPolicy),r.alt="",r.setAttribute("role","presentation"),r.src=this.getTileUrl(t),r},getTileUrl:function(t){var n={r:F.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=r),n["-y"]=r}return N(this._url,o(n,this.options))},_tileOnLoad:function(t,n){F.ielt9?setTimeout(a(t,this,null,n),0):t(null,n)},_tileOnError:function(t,n,r){var h=this.options.errorTileUrl;h&&n.getAttribute("src")!==h&&(n.src=h),t(r,n)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,n=this.options.maxZoom,r=this.options.zoomReverse,h=this.options.zoomOffset;return r&&(t=n-t),t+h},_getSubdomain:function(t){var n=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[n]},_abortLoading:function(){var t,n;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(n=this._tiles[t].el,n.onload=m,n.onerror=m,!n.complete)){n.src=Z;var r=this._tiles[t].coords;at(n),delete this._tiles[t],this.fire("tileabort",{tile:n,coords:r})}},_removeTile:function(t){var n=this._tiles[t];if(n)return n.el.setAttribute("src",Z),fi.prototype._removeTile.call(this,t)},_tileReady:function(t,n,r){if(!(!this._map||r&&r.getAttribute("src")===Z))return fi.prototype._tileReady.call(this,t,n,r)}});function us(t,n){return new We(t,n)}var cs=We.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var r=o({},this.defaultWmsParams);for(var h in n)h in this.options||(r[h]=n[h]);n=v(this,n);var c=n.detectRetina&&F.retina?2:1,d=this.getTileSize();r.width=d.x*c,r.height=d.y*c,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var n=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[n]=this._crs.code,We.prototype.onAdd.call(this,t)},getTileUrl:function(t){var n=this._tileCoordsToNwSe(t),r=this._crs,h=U(r.project(n[0]),r.project(n[1])),c=h.min,d=h.max,g=(this._wmsVersion>=1.3&&this._crs===ns?[c.y,c.x,d.y,d.x]:[c.x,c.y,d.x,d.y]).join(","),x=We.prototype.getTileUrl.call(this,t);return x+I(this.wmsParams,x,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+g},setParams:function(t,n){return o(this.wmsParams,t),n||this.redraw(),this}});function Su(t,n){return new cs(t,n)}We.WMS=cs,us.wms=Su;var $t=Bt.extend({options:{padding:.1},initialize:function(t){v(this,t),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Y(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,n){var r=this._map.getZoomScale(n,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),c=this._map.project(this._center,n),d=h.multiplyBy(-r).add(c).subtract(this._map._getNewPixelOrigin(t,n));F.any3d?ge(this._container,d,r):ft(this._container,d)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,n=this._map.getSize(),r=this._map.containerPointToLayerPoint(n.multiplyBy(-t)).round();this._bounds=new z(r,r.add(n.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),fs=$t.extend({options:{tolerance:0},getEvents:function(){var t=$t.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){$t.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");j(t,"mousemove",this._onMouseMove,this),j(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),j(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,at(this._container),nt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var n in this._layers)t=this._layers[n],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$t.prototype._update.call(this);var t=this._bounds,n=this._container,r=t.getSize(),h=F.retina?2:1;ft(n,t.min),n.width=h*r.x,n.height=h*r.y,n.style.width=r.x+"px",n.style.height=r.y+"px",F.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){$t.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[u(t)]=t;var n=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=n),this._drawLast=n,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var n=t._order,r=n.next,h=n.prev;r?r.prev=h:this._drawLast=h,h?h.next=r:this._drawFirst=r,delete t._order,delete this._layers[u(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var n=t.options.dashArray.split(/[, ]+/),r=[],h,c;for(c=0;c<n.length;c++){if(h=Number(n[c]),isNaN(h))return;r.push(h)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||K(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var n=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(t._pxBounds.min.subtract([n,n])),this._redrawBounds.extend(t._pxBounds.max.add([n,n]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var n=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,n.x,n.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,n=this._redrawBounds;if(this._ctx.save(),n){var r=n.getSize();this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,r.x,r.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)t=h.layer,(!n||t._pxBounds&&t._pxBounds.intersects(n))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,n){if(this._drawing){var r,h,c,d,g=t._parts,x=g.length,S=this._ctx;if(x){for(S.beginPath(),r=0;r<x;r++){for(h=0,c=g[r].length;h<c;h++)d=g[r][h],S[h?"lineTo":"moveTo"](d.x,d.y);n&&S.closePath()}this._fillStroke(S,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var n=t._point,r=this._ctx,h=Math.max(Math.round(t._radius),1),c=(Math.max(Math.round(t._radiusY),1)||h)/h;c!==1&&(r.save(),r.scale(1,c)),r.beginPath(),r.arc(n.x,n.y/c,h,0,Math.PI*2,!1),c!==1&&r.restore(),this._fillStroke(r,t)}},_fillStroke:function(t,n){var r=n.options;r.fill&&(t.globalAlpha=r.fillOpacity,t.fillStyle=r.fillColor||r.color,t.fill(r.fillRule||"evenodd")),r.stroke&&r.weight!==0&&(t.setLineDash&&t.setLineDash(n.options&&n.options._dashArray||[]),t.globalAlpha=r.opacity,t.lineWidth=r.weight,t.strokeStyle=r.color,t.lineCap=r.lineCap,t.lineJoin=r.lineJoin,t.stroke())},_onClick:function(t){for(var n=this._map.mouseEventToLayerPoint(t),r,h,c=this._drawFirst;c;c=c.next)r=c.layer,r.options.interactive&&r._containsPoint(n)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(r))&&(h=r);this._fireEvent(h?[h]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var n=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,n)}},_handleMouseOut:function(t){var n=this._hoveredLayer;n&&(ct(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,n){if(!this._mouseHoverThrottled){for(var r,h,c=this._drawFirst;c;c=c.next)r=c.layer,r.options.interactive&&r._containsPoint(n)&&(h=r);h!==this._hoveredLayer&&(this._handleMouseOut(t),h&&(Y(this._container,"leaflet-interactive"),this._fireEvent([h],t,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,n,r){this._map._fireDOMEvent(n,r||n.type,t)},_bringToFront:function(t){var n=t._order;if(n){var r=n.next,h=n.prev;if(r)r.prev=h;else return;h?h.next=r:r&&(this._drawFirst=r),n.prev=this._drawLast,this._drawLast.next=n,n.next=null,this._drawLast=n,this._requestRedraw(t)}},_bringToBack:function(t){var n=t._order;if(n){var r=n.next,h=n.prev;if(h)h.next=r;else return;r?r.prev=h:h&&(this._drawLast=h),n.prev=null,n.next=this._drawFirst,this._drawFirst.prev=n,this._drawFirst=n,this._requestRedraw(t)}}});function ds(t){return F.canvas?new fs(t):null}var di=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Eu={_initContainer:function(){this._container=it("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||($t.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var n=t._container=di("shape");Y(n,"leaflet-vml-shape "+(this.options.className||"")),n.coordsize="1 1",t._path=di("path"),n.appendChild(t._path),this._updateStyle(t),this._layers[u(t)]=t},_addPath:function(t){var n=t._container;this._container.appendChild(n),t.options.interactive&&t.addInteractiveTarget(n)},_removePath:function(t){var n=t._container;at(n),t.removeInteractiveTarget(n),delete this._layers[u(t)]},_updateStyle:function(t){var n=t._stroke,r=t._fill,h=t.options,c=t._container;c.stroked=!!h.stroke,c.filled=!!h.fill,h.stroke?(n||(n=t._stroke=di("stroke")),c.appendChild(n),n.weight=h.weight+"px",n.color=h.color,n.opacity=h.opacity,h.dashArray?n.dashStyle=T(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):n.dashStyle="",n.endcap=h.lineCap.replace("butt","flat"),n.joinstyle=h.lineJoin):n&&(c.removeChild(n),t._stroke=null),h.fill?(r||(r=t._fill=di("fill")),c.appendChild(r),r.color=h.fillColor||h.color,r.opacity=h.fillOpacity):r&&(c.removeChild(r),t._fill=null)},_updateCircle:function(t){var n=t._point.round(),r=Math.round(t._radius),h=Math.round(t._radiusY||r);this._setPath(t,t._empty()?"M0 0":"AL "+n.x+","+n.y+" "+r+","+h+" 0,"+65535*360)},_setPath:function(t,n){t._path.v=n},_bringToFront:function(t){Be(t._container)},_bringToBack:function(t){Re(t._container)}},sn=F.vml?di:xr,_i=$t.extend({_initContainer:function(){this._container=sn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){at(this._container),nt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){$t.prototype._update.call(this);var t=this._bounds,n=t.getSize(),r=this._container;(!this._svgSize||!this._svgSize.equals(n))&&(this._svgSize=n,r.setAttribute("width",n.x),r.setAttribute("height",n.y)),ft(r,t.min),r.setAttribute("viewBox",[t.min.x,t.min.y,n.x,n.y].join(" ")),this.fire("update")}},_initPath:function(t){var n=t._path=sn("path");t.options.className&&Y(n,t.options.className),t.options.interactive&&Y(n,"leaflet-interactive"),this._updateStyle(t),this._layers[u(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){at(t._path),t.removeInteractiveTarget(t._path),delete this._layers[u(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var n=t._path,r=t.options;n&&(r.stroke?(n.setAttribute("stroke",r.color),n.setAttribute("stroke-opacity",r.opacity),n.setAttribute("stroke-width",r.weight),n.setAttribute("stroke-linecap",r.lineCap),n.setAttribute("stroke-linejoin",r.lineJoin),r.dashArray?n.setAttribute("stroke-dasharray",r.dashArray):n.removeAttribute("stroke-dasharray"),r.dashOffset?n.setAttribute("stroke-dashoffset",r.dashOffset):n.removeAttribute("stroke-dashoffset")):n.setAttribute("stroke","none"),r.fill?(n.setAttribute("fill",r.fillColor||r.color),n.setAttribute("fill-opacity",r.fillOpacity),n.setAttribute("fill-rule",r.fillRule||"evenodd")):n.setAttribute("fill","none"))},_updatePoly:function(t,n){this._setPath(t,wr(t._parts,n))},_updateCircle:function(t){var n=t._point,r=Math.max(Math.round(t._radius),1),h=Math.max(Math.round(t._radiusY),1)||r,c="a"+r+","+h+" 0 1,0 ",d=t._empty()?"M0 0":"M"+(n.x-r)+","+n.y+c+r*2+",0 "+c+-r*2+",0 ";this._setPath(t,d)},_setPath:function(t,n){t._path.setAttribute("d",n)},_bringToFront:function(t){Be(t._path)},_bringToBack:function(t){Re(t._path)}});F.vml&&_i.include(Eu);function _s(t){return F.svg||F.vml?new _i(t):null}tt.include({getRenderer:function(t){var n=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return n||(n=this._renderer=this._createRenderer()),this.hasLayer(n)||this.addLayer(n),n},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var n=this._paneRenderers[t];return n===void 0&&(n=this._createRenderer({pane:t}),this._paneRenderers[t]=n),n},_createRenderer:function(t){return this.options.preferCanvas&&ds(t)||_s(t)}});var ms=He.extend({initialize:function(t,n){He.prototype.initialize.call(this,this._boundsToLatLngs(t),n)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=X(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Tu(t,n){return new ms(t,n)}_i.create=sn,_i.pointsToPath=wr,Yt.geometryToLayer=Mo,Yt.coordsToLatLng=Io,Yt.coordsToLatLngs=Qi,Yt.latLngToCoords=Oo,Yt.latLngsToCoords=tn,Yt.getFeature=Ge,Yt.asFeature=en,tt.mergeOptions({boxZoom:!0});var ps=Vt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){j(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){at(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ri(),_o(),this._startPoint=this._map.mouseEventToContainerPoint(t),j(document,{contextmenu:xe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=it("div","leaflet-zoom-box",this._container),Y(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var n=new z(this._point,this._startPoint),r=n.getSize();ft(this._box,n.min),this._box.style.width=r.x+"px",this._box.style.height=r.y+"px"},_finish:function(){this._moved&&(at(this._box),ct(this._container,"leaflet-crosshair")),si(),mo(),nt(document,{contextmenu:xe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var n=new V(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(n).fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});tt.addInitHook("addHandler","boxZoom",ps),tt.mergeOptions({doubleClickZoom:!0});var gs=Vt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var n=this._map,r=n.getZoom(),h=n.options.zoomDelta,c=t.originalEvent.shiftKey?r-h:r+h;n.options.doubleClickZoom==="center"?n.setZoom(c):n.setZoomAround(t.containerPoint,c)}});tt.addInitHook("addHandler","doubleClickZoom",gs),tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vs=Vt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new se(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Y(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ct(this._map._container,"leaflet-grab"),ct(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var n=X(this._map.options.maxBounds);this._offsetLimit=U(this._map.latLngToContainerPoint(n.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(n.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var n=this._lastTime=+new Date,r=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(r),this._times.push(n),this._prunePositions(n)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),n=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=n.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,n){return t-(t-n)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),n=this._offsetLimit;t.x<n.min.x&&(t.x=this._viscousLimit(t.x,n.min.x)),t.y<n.min.y&&(t.y=this._viscousLimit(t.y,n.min.y)),t.x>n.max.x&&(t.x=this._viscousLimit(t.x,n.max.x)),t.y>n.max.y&&(t.y=this._viscousLimit(t.y,n.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,n=Math.round(t/2),r=this._initialWorldOffset,h=this._draggable._newPos.x,c=(h-n+r)%t+n-r,d=(h+n+r)%t-n-r,g=Math.abs(c+r)<Math.abs(d+r)?c:d;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(t){var n=this._map,r=n.options,h=!r.inertia||t.noInertia||this._times.length<2;if(n.fire("dragend",t),h)n.fire("moveend");else{this._prunePositions(+new Date);var c=this._lastPos.subtract(this._positions[0]),d=(this._lastTime-this._times[0])/1e3,g=r.easeLinearity,x=c.multiplyBy(g/d),S=x.distanceTo([0,0]),M=Math.min(r.inertiaMaxSpeed,S),k=x.multiplyBy(M/S),Q=M/(r.inertiaDeceleration*g),et=k.multiplyBy(-Q/2).round();!et.x&&!et.y?n.fire("moveend"):(et=n._limitOffset(et,n.options.maxBounds),K(function(){n.panBy(et,{duration:Q,easeLinearity:g,noMoveStart:!0,animate:!0})}))}}});tt.addInitHook("addHandler","dragging",vs),tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ys=Vt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),j(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),nt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,n=document.documentElement,r=t.scrollTop||n.scrollTop,h=t.scrollLeft||n.scrollLeft;this._map._container.focus(),window.scrollTo(h,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var n=this._panKeys={},r=this.keyCodes,h,c;for(h=0,c=r.left.length;h<c;h++)n[r.left[h]]=[-1*t,0];for(h=0,c=r.right.length;h<c;h++)n[r.right[h]]=[t,0];for(h=0,c=r.down.length;h<c;h++)n[r.down[h]]=[0,t];for(h=0,c=r.up.length;h<c;h++)n[r.up[h]]=[0,-1*t]},_setZoomDelta:function(t){var n=this._zoomKeys={},r=this.keyCodes,h,c;for(h=0,c=r.zoomIn.length;h<c;h++)n[r.zoomIn[h]]=t;for(h=0,c=r.zoomOut.length;h<c;h++)n[r.zoomOut[h]]=-t},_addHooks:function(){j(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=t.keyCode,r=this._map,h;if(n in this._panKeys)(!r._panAnim||!r._panAnim._inProgress)&&(h=this._panKeys[n],t.shiftKey&&(h=O(h).multiplyBy(3)),r.panBy(h),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else if(n===27&&r._popup&&r._popup.options.closeOnEscapeKey)r.closePopup();else return;xe(t)}}});tt.addInitHook("addHandler","keyboard",ys),tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xs=Vt.extend({addHooks:function(){j(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var n=qr(t),r=this._map.options.wheelDebounceTime;this._delta+=n,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var h=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),h),xe(t)},_performZoom:function(){var t=this._map,n=t.getZoom(),r=this._map.options.zoomSnap||0;t._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),c=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,d=r?Math.ceil(c/r)*r:c,g=t._limitZoom(n+(this._delta>0?d:-d))-n;this._delta=0,this._startTime=null,g&&(t.options.scrollWheelZoom==="center"?t.setZoom(n+g):t.setZoomAround(this._lastMousePos,n+g))}});tt.addInitHook("addHandler","scrollWheelZoom",xs);var Lu=600;tt.mergeOptions({tapHold:F.touchNative&&F.safari&&F.mobile,tapTolerance:15});var ws=Vt.extend({addHooks:function(){j(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var n=t.touches[0];this._startPos=this._newPos=new P(n.clientX,n.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(j(document,"touchend",bt),j(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",n))},this),Lu),j(document,"touchend touchcancel contextmenu",this._cancel,this),j(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){nt(document,"touchend",bt),nt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),nt(document,"touchend touchcancel contextmenu",this._cancel,this),nt(document,"touchmove",this._onMove,this)},_onMove:function(t){var n=t.touches[0];this._newPos=new P(n.clientX,n.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,n){var r=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});r._simulated=!0,n.target.dispatchEvent(r)}});tt.addInitHook("addHandler","tapHold",ws),tt.mergeOptions({touchZoom:F.touch,bounceAtZoomLimits:!0});var bs=Vt.extend({addHooks:function(){Y(this._map._container,"leaflet-touch-zoom"),j(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ct(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var n=this._map;if(!(!t.touches||t.touches.length!==2||n._animatingZoom||this._zooming)){var r=n.mouseEventToContainerPoint(t.touches[0]),h=n.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=n.getSize()._divideBy(2),this._startLatLng=n.containerPointToLatLng(this._centerPoint),n.options.touchZoom!=="center"&&(this._pinchStartLatLng=n.containerPointToLatLng(r.add(h)._divideBy(2))),this._startDist=r.distanceTo(h),this._startZoom=n.getZoom(),this._moved=!1,this._zooming=!0,n._stop(),j(document,"touchmove",this._onTouchMove,this),j(document,"touchend touchcancel",this._onTouchEnd,this),bt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var n=this._map,r=n.mouseEventToContainerPoint(t.touches[0]),h=n.mouseEventToContainerPoint(t.touches[1]),c=r.distanceTo(h)/this._startDist;if(this._zoom=n.getScaleZoom(c,this._startZoom),!n.options.bounceAtZoomLimits&&(this._zoom<n.getMinZoom()&&c<1||this._zoom>n.getMaxZoom()&&c>1)&&(this._zoom=n._limitZoom(this._zoom)),n.options.touchZoom==="center"){if(this._center=this._startLatLng,c===1)return}else{var d=r._add(h)._divideBy(2)._subtract(this._centerPoint);if(c===1&&d.x===0&&d.y===0)return;this._center=n.unproject(n.project(this._pinchStartLatLng,this._zoom).subtract(d),this._zoom)}this._moved||(n._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var g=a(n._move,n,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=K(g,this,!0),bt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});tt.addInitHook("addHandler","touchZoom",bs),tt.BoxZoom=ps,tt.DoubleClickZoom=gs,tt.Drag=vs,tt.Keyboard=ys,tt.ScrollWheelZoom=xs,tt.TapHold=ws,tt.TouchZoom=bs,e.Bounds=z,e.Browser=F,e.CRS=ut,e.Canvas=fs,e.Circle=No,e.CircleMarker=Ji,e.Class=st,e.Control=kt,e.DivIcon=ls,e.DivOverlay=qt,e.DomEvent=Vl,e.DomUtil=Gl,e.Draggable=se,e.Evented=D,e.FeatureGroup=Fe,e.GeoJSON=Yt,e.GridLayer=fi,e.Handler=Vt,e.Icon=Ue,e.ImageOverlay=nn,e.LatLng=J,e.LatLngBounds=V,e.Layer=Bt,e.LayerGroup=Ze,e.LineUtil=nu,e.Map=tt,e.Marker=$i,e.Mixin=Jl,e.Path=ae,e.Point=P,e.PolyUtil=ou,e.Polygon=He,e.Polyline=Xt,e.Popup=on,e.PosAnimation=jr,e.Projection=ru,e.Rectangle=ms,e.Renderer=$t,e.SVG=_i,e.SVGOverlay=hs,e.TileLayer=We,e.Tooltip=rn,e.Transformation=pe,e.Util=rt,e.VideoOverlay=as,e.bind=a,e.bounds=U,e.canvas=ds,e.circle=du,e.circleMarker=fu,e.control=li,e.divIcon=bu,e.extend=o,e.featureGroup=lu,e.geoJSON=ss,e.geoJson=pu,e.gridLayer=Pu,e.icon=uu,e.imageOverlay=gu,e.latLng=q,e.latLngBounds=X,e.layerGroup=hu,e.map=ql,e.marker=cu,e.point=O,e.polygon=mu,e.polyline=_u,e.popup=xu,e.rectangle=Tu,e.setOptions=v,e.stamp=u,e.svg=_s,e.svgOverlay=yu,e.tileLayer=us,e.tooltip=wu,e.transformation=ei,e.version=i,e.videoOverlay=vu;var Cu=window.L;e.noConflict=function(){return window.L=Cu,this},window.L=e})});var Vu=/^#[a-fA-F0-9]{6}$/,qu="#000000",Pe=class e{constructor(i){this.hex=Vu.test(i!=null?i:"")?i:qu,this.rgb=ju(i)}toString(){return this.hex}getDarkerColor(i=.3){return e.getColorFromRGB({r:this.rgb.r-i*this.rgb.r,g:this.rgb.g-i*this.rgb.g,b:this.rgb.b-i*this.rgb.b})}getLighterColor(i=.3){return e.getColorFromRGB({r:this.rgb.r+i*(255-this.rgb.r),g:this.rgb.g+i*(255-this.rgb.g),b:this.rgb.b+i*(255-this.rgb.b)})}getMixedColor(i){return e.getColorFromRGB({r:(this.rgb.r+i.rgb.r)/2,g:(this.rgb.g+i.rgb.g)/2,b:(this.rgb.b+i.rgb.b)/2})}isEqual(i){return this.rgb.r===i.rgb.r&&this.rgb.g===i.rgb.g&&this.rgb.b===i.rgb.b}static getColorFromRGB(i){let o=Math.round(Math.max(Math.min(i.r,255),0)),s=Math.round(Math.max(Math.min(i.g,255),0)),a=Math.round(Math.max(Math.min(i.b,255),0));return new e(Ku({r:o,g:s,b:a}))}static getRandomColor(){return e.getColorFromRGB({r:Math.round(255*Math.random()),g:Math.round(255*Math.random()),b:Math.round(255*Math.random())})}},ju=e=>({r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)}),Ku=e=>"#"+((1<<24)+(e.r<<16)+(e.g<<8)+e.b).toString(16).slice(1);var mi=(e,i,o)=>{let s=i.x-e.x,a=i.y-e.y,l=((o.x-e.x)*s+(o.y-e.y)*a)/(s*s+a*a);l>1&&(l=1),l<0&&(l=0);let u=e.x+l*s,f=e.y+l*a,_=u-o.x,m=f-o.y;return Math.sqrt(_*_+m*m)};var ln=(e,i)=>!!e&&!!i&&e.x===i.x&&e.y===i.y;var ko=(e,i)=>{let o=e.x+e.width,s=e.y+e.height;return i.x>=e.x&&i.x<=o&&i.y>=e.y&&i.y<=s};var Se=class e{constructor(){this._imageByUrl={}}static getInstance(){return e._instance||(e._instance=new e),e._instance}getImage(i){return this._imageByUrl[i]}loadImage(i,o){let s=this.getImage(i);if(s)return s;let a=new Image;return this._imageByUrl[i]=a,a.onload=()=>{Ls(a),o==null||o()},a.onerror=()=>{o==null||o(new Error(`Image ${i} failed to load.`))},a.src=i,a}loadImages(i,o){let s=[],a=new Set(i),l=u=>{a.delete(u),a.size===0&&(o==null||o())};for(let u=0;u<i.length;u++){let f=i[u],_=this._imageByUrl[f];if(_){a.delete(f),s.push(_);continue}let m=new Image;this._imageByUrl[f]=m,m.onload=()=>{Ls(m),l(f)},m.onerror=()=>{l(f)},m.src=f,s.push(m)}return s}},Ls=e=>(!e||e.width!==0||(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e)),e);var St={NONE:0,SELECTED:1,HOVERED:2};var Rt;(function(e){e.CIRCLE="circle",e.DOT="dot",e.SQUARE="square",e.DIAMOND="diamond",e.TRIANGLE="triangle",e.TRIANGLE_DOWN="triangleDown",e.STAR="star",e.HEXAGON="hexagon"})(Rt||(Rt={}));var pi=class{static create(i,o){return new un(i,o)}},Qt=e=>e instanceof un,un=class{constructor(i,o){this.style={},this.state=St.NONE,this._inEdgesById={},this._outEdgesById={},this.id=i.data.id,this.data=i.data,this.position={id:this.id},this._onLoadedImage=o==null?void 0:o.onLoadedImage}clearPosition(){this.position.x=void 0,this.position.y=void 0}getCenter(){return this.position.x===void 0||this.position.y===void 0?{x:0,y:0}:{x:this.position.x,y:this.position.y}}getRadius(){var i;return(i=this.style.size)!==null&&i!==void 0?i:0}getBorderedRadius(){return this.getRadius()+this.getBorderWidth()/2}getBoundingBox(){let i=this.getCenter(),o=this.getBorderedRadius();return{x:i.x-o,y:i.y-o,width:o*2,height:o*2}}getInEdges(){return Object.values(this._inEdgesById)}getOutEdges(){return Object.values(this._outEdgesById)}getEdges(){let i={},o=this.getOutEdges();for(let a=0;a<o.length;a++){let l=o[a];i[l.id]=l}let s=this.getInEdges();for(let a=0;a<s.length;a++){let l=s[a];i[l.id]=l}return Object.values(i)}getAdjacentNodes(){let i={},o=this.getOutEdges();for(let a=0;a<o.length;a++){let l=o[a].endNode;l&&(i[l.id]=l)}let s=this.getInEdges();for(let a=0;a<s.length;a++){let l=s[a].startNode;l&&(i[l.id]=l)}return Object.values(i)}hasStyle(){return this.style&&Object.keys(this.style).length>0}addEdge(i){i.start===this.id&&(this._outEdgesById[i.id]=i),i.end===this.id&&(this._inEdgesById[i.id]=i)}removeEdge(i){delete this._outEdgesById[i.id],delete this._inEdgesById[i.id]}isSelected(){return this.state===St.SELECTED}isHovered(){return this.state===St.HOVERED}clearState(){this.state=St.NONE}getDistanceToBorder(){return this.getBorderedRadius()}includesPoint(i){let o=this._isPointInBoundingBox(i);if(!o)return!1;if(this.style.shape===Rt.SQUARE)return o;let s=this.getCenter(),a=this.getBorderedRadius(),l=i.x-s.x,u=i.y-s.y;return Math.sqrt(l*l+u*u)<=a}hasShadow(){var i,o,s;return((i=this.style.shadowSize)!==null&&i!==void 0?i:0)>0||((o=this.style.shadowOffsetX)!==null&&o!==void 0?o:0)>0||((s=this.style.shadowOffsetY)!==null&&s!==void 0?s:0)>0}hasBorder(){var i,o;let s=((i=this.style.borderWidth)!==null&&i!==void 0?i:0)>0,a=((o=this.style.borderWidthSelected)!==null&&o!==void 0?o:0)>0;return s||this.isSelected()&&a}getLabel(){return this.style.label}getColor(){let i;return this.style.color&&(i=this.style.color),this.isHovered()&&this.style.colorHover&&(i=this.style.colorHover),this.isSelected()&&this.style.colorSelected&&(i=this.style.colorSelected),i}getBorderWidth(){let i=0;return this.style.borderWidth&&this.style.borderWidth>0&&(i=this.style.borderWidth),this.isSelected()&&this.style.borderWidthSelected&&this.style.borderWidthSelected>0&&(i=this.style.borderWidthSelected),i}getBorderColor(){if(!this.hasBorder())return;let i;return this.style.borderColor&&(i=this.style.borderColor),this.isHovered()&&this.style.borderColorHover&&(i=this.style.borderColorHover),this.isSelected()&&this.style.borderColorSelected&&(i=this.style.borderColorSelected.toString()),i}getBackgroundImage(){var i;if(((i=this.style.size)!==null&&i!==void 0?i:0)<=0)return;let o;if(this.style.imageUrl&&(o=this.style.imageUrl),this.isSelected()&&this.style.imageUrlSelected&&(o=this.style.imageUrlSelected),!o)return;let s=Se.getInstance().getImage(o);return s||Se.getInstance().loadImage(o,a=>{var l;a||(l=this._onLoadedImage)===null||l===void 0||l.call(this)})}_isPointInBoundingBox(i){return ko(this.getBoundingBox(),i)}};var Xu=4,Cs=4,It;(function(e){e.STRAIGHT="straight",e.LOOPBACK="loopback",e.CURVED="curved"})(It||(It={}));var Ee=class e{static create(i){switch(Ns(i)){case It.STRAIGHT:return new le(i);case It.LOOPBACK:return new Le(i);case It.CURVED:return new Te(i);default:return new le(i)}}static copy(i,o){let s=e.create({data:i.data,offset:(o==null?void 0:o.offset)!==void 0?o.offset:i.offset,startNode:i.startNode,endNode:i.endNode});return s.state=i.state,s.style=i.style,s}},Ce=e=>e instanceof le||e instanceof Te||e instanceof Le,gi=class{constructor(i){var o;this.style={},this.state=St.NONE,this._type=It.STRAIGHT,this.id=i.data.id,this.data=i.data,this.offset=(o=i.offset)!==null&&o!==void 0?o:0,this.startNode=i.startNode,this.endNode=i.endNode,this._type=Ns(i),this.position={id:this.id,source:this.startNode.id,target:this.endNode.id},this.startNode.addEdge(this),this.endNode.addEdge(this)}get type(){return this._type}get start(){return this.data.start}get end(){return this.data.end}hasStyle(){return this.style&&Object.keys(this.style).length>0}isSelected(){return this.state===St.SELECTED}isHovered(){return this.state===St.HOVERED}clearState(){this.state=St.NONE}isLoopback(){return this._type===It.LOOPBACK}isStraight(){return this._type===It.STRAIGHT}isCurved(){return this._type===It.CURVED}getCenter(){var i,o;let s=(i=this.startNode)===null||i===void 0?void 0:i.getCenter(),a=(o=this.endNode)===null||o===void 0?void 0:o.getCenter();return!s||!a?{x:0,y:0}:{x:(s.x+a.x)/2,y:(s.y+a.y)/2}}getDistance(i){let o=this.startNode.getCenter(),s=this.endNode.getCenter();return!o||!s?0:mi(o,s,i)}getLabel(){return this.style.label}hasShadow(){var i,o,s;return((i=this.style.shadowSize)!==null&&i!==void 0?i:0)>0||((o=this.style.shadowOffsetX)!==null&&o!==void 0?o:0)>0||((s=this.style.shadowOffsetY)!==null&&s!==void 0?s:0)>0}getWidth(){let i=0;return this.style.width!==void 0&&(i=this.style.width),this.isHovered()&&this.style.widthHover!==void 0&&(i=this.style.widthHover),this.isSelected()&&this.style.widthSelected!==void 0&&(i=this.style.widthSelected),i}getColor(){let i;return this.style.color&&(i=this.style.color),this.isHovered()&&this.style.colorHover&&(i=this.style.colorHover),this.isSelected()&&this.style.colorSelected&&(i=this.style.colorSelected),i}},Ns=e=>{var i;return e.startNode.id===e.endNode.id?It.LOOPBACK:((i=e.offset)!==null&&i!==void 0?i:0)===0?It.STRAIGHT:It.CURVED},le=class extends gi{getCenter(){var i,o;let s=(i=this.startNode)===null||i===void 0?void 0:i.getCenter(),a=(o=this.endNode)===null||o===void 0?void 0:o.getCenter();return!s||!a?{x:0,y:0}:{x:(s.x+a.x)/2,y:(s.y+a.y)/2}}getDistance(i){var o,s;let a=(o=this.startNode)===null||o===void 0?void 0:o.getCenter(),l=(s=this.endNode)===null||s===void 0?void 0:s.getCenter();return!a||!l?0:mi(a,l,i)}},Te=class extends gi{getCenter(){return this.getCurvedControlPoint(Cs/2)}getDistance(i){var o,s;let a=(o=this.startNode)===null||o===void 0?void 0:o.getCenter(),l=(s=this.endNode)===null||s===void 0?void 0:s.getCenter();if(!a||!l)return 0;let u=this.getCurvedControlPoint(),f=1e9,_,m,p,b,y,v=a.x,I=a.y;for(m=1;m<10;m++)p=.1*m,b=Math.pow(1-p,2)*a.x+2*p*(1-p)*u.x+Math.pow(p,2)*l.x,y=Math.pow(1-p,2)*a.y+2*p*(1-p)*u.y+Math.pow(p,2)*l.y,m>0&&(_=mi({x:v,y:I},{x:b,y},i),f=_<f?_:f),v=b,I=y;return f}getCurvedControlPoint(i=Cs){var o;if(!this.startNode||!this.endNode)return{x:0,y:0};let s=this.startNode.getCenter(),a=this.endNode.getCenter(),l=this.startNode.getRadius(),u=this.endNode.getRadius(),f=(s.x+a.x)/2,_=(s.y+a.y)/2,m=a.x-s.x,p=a.y-s.y,b=Math.sqrt(m*m+p*p),y=Math.max(l,u,Xu),v=((o=this.offset)!==null&&o!==void 0?o:1)*y*i;return{x:f+v*(p/b),y:_-v*(m/b)}}},Le=class extends gi{getCenter(){var i;let o=Math.abs((i=this.offset)!==null&&i!==void 0?i:1),s=this.getCircularData();return{x:s.x+s.radius,y:s.y-o*5}}getDistance(i){let o=this.getCircularData(),s=o.x-i.x,a=o.y-i.y;return Math.abs(Math.sqrt(s*s+a*a)-o.radius)}getCircularData(){var i;if(!this.startNode)return{x:0,y:0,radius:0};let o=this.startNode.getCenter(),s=this.startNode.getBorderedRadius(),a=Math.abs((i=this.offset)!==null&&i!==void 0?i:1),l=s*1.5*a,u=s,f=o.x+l,_=o.y-u*.5;return{x:f,y:_,radius:l}}};var Ms=e=>{var i;let o=new Array(e.length),s=Yu(e);for(let a=0;a<e.length;a++){let l=e[a],u=0,f=Is(l),_=s[f];_&&_.length&&(u=(i=_.shift())!==null&&i!==void 0?i:0,l.end<l.start&&(u=-1*u)),o[a]=u}return o},Is=e=>{let i=e.start,o=e.end;return i<o?`${i}-${o}`:`${o}-${i}`},Yu=e=>{var i;let o={},s=new Set;for(let u=0;u<e.length;u++){let f=Is(e[u]);e[u].start===e[u].end&&s.add(f),o[f]=((i=o[f])!==null&&i!==void 0?i:0)+1}let a={},l=Object.keys(o);for(let u=0;u<l.length;u++){let f=l[u],_=o[f];if(s.has(f)){a[f]=Array.from({length:_},(p,b)=>b+1);continue}if(_<=1)continue;let m=[];_%2!==0&&m.push(0);for(let p=2;p<=_;p+=2)m.push(p/2),m.push(p/2*-1);a[f]=m}return a};var vi=class{constructor(i){this.ids=[],this.entityById=new Map,this.getId=i.getId,this.sortBy=i.sortBy}getOne(i){return this.entityById.get(i)}getMany(i,o){let s=[];for(let a=0;a<i.length;a++){let l=this.getOne(i[a]);l!==void 0&&(o!=null&&o.filterBy&&!o.filterBy(l)||s.push(l))}return this.sortBy&&s.sort(this.sortBy),s}getAll(i){let o=[];for(let s=0;s<this.ids.length;s++){let a=this.getOne(this.ids[s]);a!==void 0&&(i!=null&&i.filterBy&&!i.filterBy(a)||o.push(a))}return o}setOne(i){let o=this.getId(i),s=!this.entityById.has(o);this.entityById.set(o,i),s&&(this.ids.push(o),this.sort())}setMany(i){this.sortBy&&i.sort(this.sortBy);let o=[];for(let s=0;s<i.length;s++){let a=this.getId(i[s]);this.entityById.has(a)||o.push(a),this.entityById.set(a,i[s])}this.ids=this.ids.concat(o),this.sort()}removeMany(i){let o=new Set(i),s=[];for(let a=0;a<this.ids.length;a++)o.has(this.ids[a])||s.push(this.ids[a]);this.ids=s;for(let a=0;a<i.length;a++)this.entityById.delete(i[a])}removeAll(){this.ids=[],this.entityById.clear()}sort(){this.sortBy&&this.ids.sort((i,o)=>{if(!this.sortBy)return 0;let s=this.getOne(i),a=this.getOne(o);return s===void 0||a===void 0?0:this.sortBy(s,a)})}get size(){return this.entityById.size}};var cn=class{constructor(i,o){var s,a;this._nodes=new vi({getId:f=>f.id,sortBy:(f,_)=>{var m,p;return((m=f.style.zIndex)!==null&&m!==void 0?m:0)-((p=_.style.zIndex)!==null&&p!==void 0?p:0)}}),this._edges=new vi({getId:f=>f.id,sortBy:(f,_)=>{var m,p;return((m=f.style.zIndex)!==null&&m!==void 0?m:0)-((p=_.style.zIndex)!==null&&p!==void 0?p:0)}}),this._onLoadedImages=o==null?void 0:o.onLoadedImages;let l=(s=i==null?void 0:i.nodes)!==null&&s!==void 0?s:[],u=(a=i==null?void 0:i.edges)!==null&&a!==void 0?a:[];this.setup({nodes:l,edges:u})}getNodes(i){return this._nodes.getAll({filterBy:i})}getEdges(i){return this._edges.getAll({filterBy:i})}getNodeCount(){return this._nodes.size}getEdgeCount(){return this._edges.size}getNodeById(i){return this._nodes.getOne(i)}getEdgeById(i){return this._edges.getOne(i)}getNodePositions(){let i=this.getNodes(),o=new Array(i.length);for(let s=0;s<i.length;s++)o[s]=i[s].position;return o}setNodePositions(i){for(let o=0;o<i.length;o++){let s=this._nodes.getOne(i[o].id);s&&(s.position=i[o])}}getEdgePositions(){let i=this.getEdges(),o=new Array(i.length);for(let s=0;s<i.length;s++)o[s]=i[s].position;return o}setDefaultStyle(i){this._defaultStyle=i,this._applyStyle()}setup(i){var o,s;this._nodes.removeAll(),this._edges.removeAll();let a=(o=i==null?void 0:i.nodes)!==null&&o!==void 0?o:[],l=(s=i==null?void 0:i.edges)!==null&&s!==void 0?s:[];this._insertNodes(a),this._insertEdges(l),this._applyEdgeOffsets(),this._applyStyle()}clearPositions(){let i=this.getNodes();for(let o=0;o<i.length;o++)i[o].clearPosition()}merge(i){var o,s;let a=(o=i.nodes)!==null&&o!==void 0?o:[],l=(s=i.edges)!==null&&s!==void 0?s:[];this._upsertNodes(a),this._upsertEdges(l),this._applyEdgeOffsets(),this._applyStyle()}remove(i){var o,s;let a=(o=i.nodeIds)!==null&&o!==void 0?o:[],l=(s=i.edgeIds)!==null&&s!==void 0?s:[];this._removeNodes(a),this._removeEdges(l),this._applyEdgeOffsets(),this._applyStyle()}isEqual(i){if(this.getNodeCount()!==i.getNodeCount()||this.getEdgeCount()!==i.getEdgeCount())return!1;let o=this.getNodes();for(let a=0;a<o.length;a++)if(!i.getNodeById(o[a].id))return!1;let s=this.getEdges();for(let a=0;a<s.length;a++)if(!i.getEdgeById(s[a].id))return!1;return!0}getBoundingBox(){let i=this.getNodes(),o={x:0,y:0},s={x:0,y:0};for(let a=0;a<i.length;a++){let{x:l,y:u}=i[a].getCenter();if(l===void 0||u===void 0)continue;let f=i[a].getBorderedRadius();if(a===0){o.x=l-f,s.x=l+f,o.y=u-f,s.y=u+f;continue}l+f>s.x&&(s.x=l+f),l-f<o.x&&(o.x=l-f),u+f>s.y&&(s.y=u+f),u-f<o.y&&(o.y=u-f)}return{x:o.x,y:o.y,width:Math.abs(s.x-o.x),height:Math.abs(s.y-o.y)}}getNearestNode(i){let o=this.getNodes();for(let s=o.length-1;s>=0;s--)if(o[s].includesPoint(i))return o[s]}getNearestEdge(i,o=3){let s,a=o,l=this.getEdges();for(let u=0;u<l.length;u++){let f=l[u].getDistance(i);f<=a&&(a=f,s=l[u])}return s}_insertNodes(i){let o=new Array(i.length);for(let s=0;s<i.length;s++)o[s]=pi.create({data:i[s]},{onLoadedImage:()=>{var a;return(a=this._onLoadedImages)===null||a===void 0?void 0:a.call(this)}});this._nodes.setMany(o)}_insertEdges(i){let o=[];for(let s=0;s<i.length;s++){let a=this.getNodeById(i[s].start),l=this.getNodeById(i[s].end);a&&l&&o.push(Ee.create({data:i[s],startNode:a,endNode:l}))}this._edges.setMany(o)}_upsertNodes(i){let o=[];for(let s=0;s<i.length;s++){let a=this.getNodeById(i[s].id);if(a){a.data=i[s];continue}o.push(pi.create({data:i[s]},{onLoadedImage:()=>{var l;return(l=this._onLoadedImages)===null||l===void 0?void 0:l.call(this)}}))}this._nodes.setMany(o)}_upsertEdges(i){let o=[],s=[];for(let a=0;a<i.length;a++){let l=i[a],u=this.getEdgeById(l.id);if(!u){let p=this.getNodeById(l.start),b=this.getNodeById(l.end);if(p&&b){let y=Ee.create({data:l,startNode:p,endNode:b});o.push(y)}continue}if(u.start===l.start&&u.end===l.end){u.data=l;continue}u.startNode.removeEdge(u),u.endNode.removeEdge(u);let f=this.getNodeById(l.start),_=this.getNodeById(l.end);if(!f||!_){s.push(u.id);continue}let m=Ee.create({data:l,offset:u.offset,startNode:f,endNode:_});m.state=u.state,m.style=u.style,o.push(m)}this._edges.setMany(o),this._edges.removeMany(s)}_removeNodes(i){let o=[],s=[];for(let a=0;a<i.length;a++){let l=this.getNodeById(i[a]);if(!l)continue;let u=l.getEdges();for(let f=0;f<u.length;f++){let _=u[f];_.startNode.removeEdge(_),_.endNode.removeEdge(_),s.push(_.id)}o.push(l.id)}this._nodes.removeMany(o),this._edges.removeMany(s)}_removeEdges(i){let o=[];for(let s=0;s<i.length;s++){let a=this.getEdgeById(i[s]);a&&(a.startNode.removeEdge(a),a.endNode.removeEdge(a),o.push(a.id))}this._edges.removeMany(o)}_applyEdgeOffsets(){let i=this.getEdges(),o=Ms(i),s=new Array(o.length);for(let a=0;a<o.length;a++){let l=i[a],u=o[a];s[a]=Ee.copy(l,{offset:u})}this._edges.setMany(s)}_applyStyle(){var i,o;let s=new Set;if(!((i=this._defaultStyle)===null||i===void 0)&&i.getNodeStyle){let a=this.getNodes();for(let l=0;l<a.length;l++){if(a[l].hasStyle())continue;let u=this._defaultStyle.getNodeStyle(a[l]);u&&(a[l].style=u,u.imageUrl&&s.add(u.imageUrl),u.imageUrlSelected&&s.add(u.imageUrlSelected))}}if(!((o=this._defaultStyle)===null||o===void 0)&&o.getEdgeStyle){let a=this.getEdges();for(let l=0;l<a.length;l++){if(a[l].hasStyle())continue;let u=this._defaultStyle.getEdgeStyle(a[l]);u&&(a[l].style=u)}}s.size&&Se.getInstance().loadImages(Array.from(s),()=>{var a;(a=this._onLoadedImages)===null||a===void 0||a.call(this)}),this._nodes.sort(),this._edges.sort()}};var $u={value:()=>{}};function As(){for(var e=0,i=arguments.length,o={},s;e<i;++e){if(!(s=arguments[e]+"")||s in o||/[\s.]/.test(s))throw new Error("illegal type: "+s);o[s]=[]}return new fn(o)}function fn(e){this._=e}function Ju(e,i){return e.trim().split(/^|\s+/).map(function(o){var s="",a=o.indexOf(".");if(a>=0&&(s=o.slice(a+1),o=o.slice(0,a)),o&&!i.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:s}})}fn.prototype=As.prototype={constructor:fn,on:function(e,i){var o=this._,s=Ju(e+"",o),a,l=-1,u=s.length;if(arguments.length<2){for(;++l<u;)if((a=(e=s[l]).type)&&(a=Qu(o[a],e.name)))return a;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++l<u;)if(a=(e=s[l]).type)o[a]=Os(o[a],e.name,i);else if(i==null)for(a in o)o[a]=Os(o[a],e.name,null);return this},copy:function(){var e={},i=this._;for(var o in i)e[o]=i[o].slice();return new fn(e)},call:function(e,i){if((a=arguments.length-2)>0)for(var o=new Array(a),s=0,a,l;s<a;++s)o[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],s=0,a=l.length;s<a;++s)l[s].value.apply(i,o)},apply:function(e,i,o){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],a=0,l=s.length;a<l;++a)s[a].value.apply(i,o)}};function Qu(e,i){for(var o=0,s=e.length,a;o<s;++o)if((a=e[o]).name===i)return a.value}function Os(e,i,o){for(var s=0,a=e.length;s<a;++s)if(e[s].name===i){e[s]=$u,e=e.slice(0,s).concat(e.slice(s+1));break}return o!=null&&e.push({name:i,value:o}),e}var te=As;var dn="http://www.w3.org/1999/xhtml",Bo={svg:"http://www.w3.org/2000/svg",xhtml:dn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ee(e){var i=e+="",o=i.indexOf(":");return o>=0&&(i=e.slice(0,o))!=="xmlns"&&(e=e.slice(o+1)),Bo.hasOwnProperty(i)?{space:Bo[i],local:e}:e}function tc(e){return function(){var i=this.ownerDocument,o=this.namespaceURI;return o===dn&&i.documentElement.namespaceURI===dn?i.createElement(e):i.createElementNS(o,e)}}function ec(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _n(e){var i=ee(e);return(i.local?ec:tc)(i)}function ic(){}function Ne(e){return e==null?ic:function(){return this.querySelector(e)}}function Ds(e){typeof e!="function"&&(e=Ne(e));for(var i=this._groups,o=i.length,s=new Array(o),a=0;a<o;++a)for(var l=i[a],u=l.length,f=s[a]=new Array(u),_,m,p=0;p<u;++p)(_=l[p])&&(m=e.call(_,_.__data__,p,l))&&("__data__"in _&&(m.__data__=_.__data__),f[p]=m);return new lt(s,this._parents)}function Ro(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function nc(){return[]}function yi(e){return e==null?nc:function(){return this.querySelectorAll(e)}}function oc(e){return function(){return Ro(e.apply(this,arguments))}}function zs(e){typeof e=="function"?e=oc(e):e=yi(e);for(var i=this._groups,o=i.length,s=[],a=[],l=0;l<o;++l)for(var u=i[l],f=u.length,_,m=0;m<f;++m)(_=u[m])&&(s.push(e.call(_,_.__data__,m,u)),a.push(_));return new lt(s,a)}function xi(e){return function(){return this.matches(e)}}function mn(e){return function(i){return i.matches(e)}}var rc=Array.prototype.find;function sc(e){return function(){return rc.call(this.children,e)}}function ac(){return this.firstElementChild}function ks(e){return this.select(e==null?ac:sc(typeof e=="function"?e:mn(e)))}var hc=Array.prototype.filter;function lc(){return Array.from(this.children)}function uc(e){return function(){return hc.call(this.children,e)}}function Bs(e){return this.selectAll(e==null?lc:uc(typeof e=="function"?e:mn(e)))}function Rs(e){typeof e!="function"&&(e=xi(e));for(var i=this._groups,o=i.length,s=new Array(o),a=0;a<o;++a)for(var l=i[a],u=l.length,f=s[a]=[],_,m=0;m<u;++m)(_=l[m])&&e.call(_,_.__data__,m,l)&&f.push(_);return new lt(s,this._parents)}function pn(e){return new Array(e.length)}function Zs(){return new lt(this._enter||this._groups.map(pn),this._parents)}function wi(e,i){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=i}wi.prototype={constructor:wi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,i){return this._parent.insertBefore(e,i)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Fs(e){return function(){return e}}function cc(e,i,o,s,a,l){for(var u=0,f,_=i.length,m=l.length;u<m;++u)(f=i[u])?(f.__data__=l[u],s[u]=f):o[u]=new wi(e,l[u]);for(;u<_;++u)(f=i[u])&&(a[u]=f)}function fc(e,i,o,s,a,l,u){var f,_,m=new Map,p=i.length,b=l.length,y=new Array(p),v;for(f=0;f<p;++f)(_=i[f])&&(y[f]=v=u.call(_,_.__data__,f,i)+"",m.has(v)?a[f]=_:m.set(v,_));for(f=0;f<b;++f)v=u.call(e,l[f],f,l)+"",(_=m.get(v))?(s[f]=_,_.__data__=l[f],m.delete(v)):o[f]=new wi(e,l[f]);for(f=0;f<p;++f)(_=i[f])&&m.get(y[f])===_&&(a[f]=_)}function dc(e){return e.__data__}function Us(e,i){if(!arguments.length)return Array.from(this,dc);var o=i?fc:cc,s=this._parents,a=this._groups;typeof e!="function"&&(e=Fs(e));for(var l=a.length,u=new Array(l),f=new Array(l),_=new Array(l),m=0;m<l;++m){var p=s[m],b=a[m],y=b.length,v=_c(e.call(p,p&&p.__data__,m,s)),I=v.length,C=f[m]=new Array(I),N=u[m]=new Array(I),T=_[m]=new Array(y);o(p,b,C,N,T,v,i);for(var A=0,Z=0,E,R;A<I;++A)if(E=C[A]){for(A>=Z&&(Z=A+1);!(R=N[Z])&&++Z<I;);E._next=R||null}}return u=new lt(u,s),u._enter=f,u._exit=_,u}function _c(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hs(){return new lt(this._exit||this._groups.map(pn),this._parents)}function Gs(e,i,o){var s=this.enter(),a=this,l=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),i!=null&&(a=i(a),a&&(a=a.selection())),o==null?l.remove():o(l),s&&a?s.merge(a).order():a}function Ws(e){for(var i=e.selection?e.selection():e,o=this._groups,s=i._groups,a=o.length,l=s.length,u=Math.min(a,l),f=new Array(a),_=0;_<u;++_)for(var m=o[_],p=s[_],b=m.length,y=f[_]=new Array(b),v,I=0;I<b;++I)(v=m[I]||p[I])&&(y[I]=v);for(;_<a;++_)f[_]=o[_];return new lt(f,this._parents)}function Vs(){for(var e=this._groups,i=-1,o=e.length;++i<o;)for(var s=e[i],a=s.length-1,l=s[a],u;--a>=0;)(u=s[a])&&(l&&u.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(u,l),l=u);return this}function qs(e){e||(e=mc);function i(b,y){return b&&y?e(b.__data__,y.__data__):!b-!y}for(var o=this._groups,s=o.length,a=new Array(s),l=0;l<s;++l){for(var u=o[l],f=u.length,_=a[l]=new Array(f),m,p=0;p<f;++p)(m=u[p])&&(_[p]=m);_.sort(i)}return new lt(a,this._parents).order()}function mc(e,i){return e<i?-1:e>i?1:e>=i?0:NaN}function js(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ks(){return Array.from(this)}function Xs(){for(var e=this._groups,i=0,o=e.length;i<o;++i)for(var s=e[i],a=0,l=s.length;a<l;++a){var u=s[a];if(u)return u}return null}function Ys(){let e=0;for(let i of this)++e;return e}function $s(){return!this.node()}function Js(e){for(var i=this._groups,o=0,s=i.length;o<s;++o)for(var a=i[o],l=0,u=a.length,f;l<u;++l)(f=a[l])&&e.call(f,f.__data__,l,a);return this}function pc(e){return function(){this.removeAttribute(e)}}function gc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vc(e,i){return function(){this.setAttribute(e,i)}}function yc(e,i){return function(){this.setAttributeNS(e.space,e.local,i)}}function xc(e,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttribute(e):this.setAttribute(e,o)}}function wc(e,i){return function(){var o=i.apply(this,arguments);o==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,o)}}function Qs(e,i){var o=ee(e);if(arguments.length<2){var s=this.node();return o.local?s.getAttributeNS(o.space,o.local):s.getAttribute(o)}return this.each((i==null?o.local?gc:pc:typeof i=="function"?o.local?wc:xc:o.local?yc:vc)(o,i))}function gn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bc(e){return function(){this.style.removeProperty(e)}}function Pc(e,i,o){return function(){this.style.setProperty(e,i,o)}}function Sc(e,i,o){return function(){var s=i.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,o)}}function ta(e,i,o){return arguments.length>1?this.each((i==null?bc:typeof i=="function"?Sc:Pc)(e,i,o==null?"":o)):ue(this.node(),e)}function ue(e,i){return e.style.getPropertyValue(i)||gn(e).getComputedStyle(e,null).getPropertyValue(i)}function Ec(e){return function(){delete this[e]}}function Tc(e,i){return function(){this[e]=i}}function Lc(e,i){return function(){var o=i.apply(this,arguments);o==null?delete this[e]:this[e]=o}}function ea(e,i){return arguments.length>1?this.each((i==null?Ec:typeof i=="function"?Lc:Tc)(e,i)):this.node()[e]}function ia(e){return e.trim().split(/^|\s+/)}function Zo(e){return e.classList||new na(e)}function na(e){this._node=e,this._names=ia(e.getAttribute("class")||"")}na.prototype={add:function(e){var i=this._names.indexOf(e);i<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var i=this._names.indexOf(e);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function oa(e,i){for(var o=Zo(e),s=-1,a=i.length;++s<a;)o.add(i[s])}function ra(e,i){for(var o=Zo(e),s=-1,a=i.length;++s<a;)o.remove(i[s])}function Cc(e){return function(){oa(this,e)}}function Nc(e){return function(){ra(this,e)}}function Mc(e,i){return function(){(i.apply(this,arguments)?oa:ra)(this,e)}}function sa(e,i){var o=ia(e+"");if(arguments.length<2){for(var s=Zo(this.node()),a=-1,l=o.length;++a<l;)if(!s.contains(o[a]))return!1;return!0}return this.each((typeof i=="function"?Mc:i?Cc:Nc)(o,i))}function Ic(){this.textContent=""}function Oc(e){return function(){this.textContent=e}}function Ac(e){return function(){var i=e.apply(this,arguments);this.textContent=i==null?"":i}}function aa(e){return arguments.length?this.each(e==null?Ic:(typeof e=="function"?Ac:Oc)(e)):this.node().textContent}function Dc(){this.innerHTML=""}function zc(e){return function(){this.innerHTML=e}}function kc(e){return function(){var i=e.apply(this,arguments);this.innerHTML=i==null?"":i}}function ha(e){return arguments.length?this.each(e==null?Dc:(typeof e=="function"?kc:zc)(e)):this.node().innerHTML}function Bc(){this.nextSibling&&this.parentNode.appendChild(this)}function la(){return this.each(Bc)}function Rc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ua(){return this.each(Rc)}function ca(e){var i=typeof e=="function"?e:_n(e);return this.select(function(){return this.appendChild(i.apply(this,arguments))})}function Zc(){return null}function fa(e,i){var o=typeof e=="function"?e:_n(e),s=i==null?Zc:typeof i=="function"?i:Ne(i);return this.select(function(){return this.insertBefore(o.apply(this,arguments),s.apply(this,arguments)||null)})}function Fc(){var e=this.parentNode;e&&e.removeChild(this)}function da(){return this.each(Fc)}function Uc(){var e=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function Hc(){var e=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(e,this.nextSibling):e}function _a(e){return this.select(e?Hc:Uc)}function ma(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Gc(e){return function(i){e.call(this,i,this.__data__)}}function Wc(e){return e.trim().split(/^|\s+/).map(function(i){var o="",s=i.indexOf(".");return s>=0&&(o=i.slice(s+1),i=i.slice(0,s)),{type:i,name:o}})}function Vc(e){return function(){var i=this.__on;if(i){for(var o=0,s=-1,a=i.length,l;o<a;++o)l=i[o],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):i[++s]=l;++s?i.length=s:delete this.__on}}}function qc(e,i,o){return function(){var s=this.__on,a,l=Gc(i);if(s){for(var u=0,f=s.length;u<f;++u)if((a=s[u]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=o),a.value=i;return}}this.addEventListener(e.type,l,o),a={type:e.type,name:e.name,value:i,listener:l,options:o},s?s.push(a):this.__on=[a]}}function pa(e,i,o){var s=Wc(e+""),a,l=s.length,u;if(arguments.length<2){var f=this.node().__on;if(f){for(var _=0,m=f.length,p;_<m;++_)for(a=0,p=f[_];a<l;++a)if((u=s[a]).type===p.type&&u.name===p.name)return p.value}return}for(f=i?qc:Vc,a=0;a<l;++a)this.each(f(s[a],i,o));return this}function ga(e,i,o){var s=gn(e),a=s.CustomEvent;typeof a=="function"?a=new a(i,o):(a=s.document.createEvent("Event"),o?(a.initEvent(i,o.bubbles,o.cancelable),a.detail=o.detail):a.initEvent(i,!1,!1)),e.dispatchEvent(a)}function jc(e,i){return function(){return ga(this,e,i)}}function Kc(e,i){return function(){return ga(this,e,i.apply(this,arguments))}}function va(e,i){return this.each((typeof i=="function"?Kc:jc)(e,i))}function*ya(){for(var e=this._groups,i=0,o=e.length;i<o;++i)for(var s=e[i],a=0,l=s.length,u;a<l;++a)(u=s[a])&&(yield u)}var Fo=[null];function lt(e,i){this._groups=e,this._parents=i}function xa(){return new lt([[document.documentElement]],Fo)}function Xc(){return this}lt.prototype=xa.prototype={constructor:lt,select:Ds,selectAll:zs,selectChild:ks,selectChildren:Bs,filter:Rs,data:Us,enter:Zs,exit:Hs,join:Gs,merge:Ws,selection:Xc,order:Vs,sort:qs,call:js,nodes:Ks,node:Xs,size:Ys,empty:$s,each:Js,attr:Qs,style:ta,property:ea,classed:sa,text:aa,html:ha,raise:la,lower:ua,append:ca,insert:fa,remove:da,clone:_a,datum:ma,on:pa,dispatch:va,[Symbol.iterator]:ya};var ie=xa;function Pt(e){return typeof e=="string"?new lt([[document.querySelector(e)]],[document.documentElement]):new lt([[e]],Fo)}function wa(e){let i;for(;i=e.sourceEvent;)e=i;return e}function At(e,i){if(e=wa(e),i===void 0&&(i=e.currentTarget),i){var o=i.ownerSVGElement||i;if(o.createSVGPoint){var s=o.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(i.getScreenCTM().inverse()),[s.x,s.y]}if(i.getBoundingClientRect){var a=i.getBoundingClientRect();return[e.clientX-a.left-i.clientLeft,e.clientY-a.top-i.clientTop]}}return[e.pageX,e.pageY]}var ba={passive:!1},Me={capture:!0,passive:!1};function vn(e){e.stopImmediatePropagation()}function ce(e){e.preventDefault(),e.stopImmediatePropagation()}function bi(e){var i=e.document.documentElement,o=Pt(e).on("dragstart.drag",ce,Me);"onselectstart"in i?o.on("selectstart.drag",ce,Me):(i.__noselect=i.style.MozUserSelect,i.style.MozUserSelect="none")}function Pi(e,i){var o=e.document.documentElement,s=Pt(e).on("dragstart.drag",null);i&&(s.on("click.drag",ce,Me),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in o?s.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}var Si=e=>()=>e;function Ei(e,{sourceEvent:i,subject:o,target:s,identifier:a,active:l,x:u,y:f,dx:_,dy:m,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:_,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:p}})}Ei.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Yc(e){return!e.ctrlKey&&!e.button}function $c(){return this.parentNode}function Jc(e,i){return i==null?{x:e.x,y:e.y}:i}function Qc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Uo(){var e=Yc,i=$c,o=Jc,s=Qc,a={},l=te("start","drag","end"),u=0,f,_,m,p,b=0;function y(E){E.on("mousedown.drag",v).filter(s).on("touchstart.drag",N).on("touchmove.drag",T,ba).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(E,R){if(!(p||!e.call(this,E,R))){var H=Z(this,i.call(this,E,R),E,R,"mouse");H&&(Pt(E.view).on("mousemove.drag",I,Me).on("mouseup.drag",C,Me),bi(E.view),vn(E),m=!1,f=E.clientX,_=E.clientY,H("start",E))}}function I(E){if(ce(E),!m){var R=E.clientX-f,H=E.clientY-_;m=R*R+H*H>b}a.mouse("drag",E)}function C(E){Pt(E.view).on("mousemove.drag mouseup.drag",null),Pi(E.view,m),ce(E),a.mouse("end",E)}function N(E,R){if(e.call(this,E,R)){var H=E.changedTouches,G=i.call(this,E,R),$=H.length,K,W;for(K=0;K<$;++K)(W=Z(this,G,E,R,H[K].identifier,H[K]))&&(vn(E),W("start",E,H[K]))}}function T(E){var R=E.changedTouches,H=R.length,G,$;for(G=0;G<H;++G)($=a[R[G].identifier])&&(ce(E),$("drag",E,R[G]))}function A(E){var R=E.changedTouches,H=R.length,G,$;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),G=0;G<H;++G)($=a[R[G].identifier])&&(vn(E),$("end",E,R[G]))}function Z(E,R,H,G,$,K){var W=l.copy(),rt=At(K||H,R),st,wt,w;if((w=o.call(E,new Ei("beforestart",{sourceEvent:H,target:y,identifier:$,active:u,x:rt[0],y:rt[1],dx:0,dy:0,dispatch:W}),G))!=null)return st=w.x-rt[0]||0,wt=w.y-rt[1]||0,function D(P,B,O){var z=rt,U;switch(P){case"start":a[$]=D,U=u++;break;case"end":delete a[$],--u;case"drag":rt=At(O||B,R),U=u;break}W.call(P,E,new Ei(P,{sourceEvent:B,subject:w,target:y,identifier:$,active:U,x:rt[0]+st,y:rt[1]+wt,dx:rt[0]-z[0],dy:rt[1]-z[1],dispatch:W}),G)}}return y.filter=function(E){return arguments.length?(e=typeof E=="function"?E:Si(!!E),y):e},y.container=function(E){return arguments.length?(i=typeof E=="function"?E:Si(E),y):i},y.subject=function(E){return arguments.length?(o=typeof E=="function"?E:Si(E),y):o},y.touchable=function(E){return arguments.length?(s=typeof E=="function"?E:Si(!!E),y):s},y.on=function(){var E=l.on.apply(l,arguments);return E===l?y:E},y.clickDistance=function(E){return arguments.length?(b=(E=+E)*E,y):Math.sqrt(b)},y}var Ho=e=>+e;function yn(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function xn(e,i,o){e.prototype=i.prototype=o,o.constructor=e}function Go(e,i){var o=Object.create(e.prototype);for(var s in i)o[s]=i[s];return o}function Ci(){}var Ti=.7,Pn=1/Ti,Ve="\\s*([+-]?\\d+)\\s*",Li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tf=/^#([0-9a-f]{3,8})$/,ef=new RegExp(`^rgb\\(${Ve},${Ve},${Ve}\\)$`),nf=new RegExp(`^rgb\\(${jt},${jt},${jt}\\)$`),of=new RegExp(`^rgba\\(${Ve},${Ve},${Ve},${Li}\\)$`),rf=new RegExp(`^rgba\\(${jt},${jt},${jt},${Li}\\)$`),sf=new RegExp(`^hsl\\(${Li},${jt},${jt}\\)$`),af=new RegExp(`^hsla\\(${Li},${jt},${jt},${Li}\\)$`),Pa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xn(Ci,fe,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Sa,formatHex:Sa,formatHex8:hf,formatHsl:lf,formatRgb:Ea,toString:Ea});function Sa(){return this.rgb().formatHex()}function hf(){return this.rgb().formatHex8()}function lf(){return Ia(this).formatHsl()}function Ea(){return this.rgb().formatRgb()}function fe(e){var i,o;return e=(e+"").trim().toLowerCase(),(i=tf.exec(e))?(o=i[1].length,i=parseInt(i[1],16),o===6?Ta(i):o===3?new Ct(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1):o===8?wn(i>>24&255,i>>16&255,i>>8&255,(i&255)/255):o===4?wn(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|i&240,((i&15)<<4|i&15)/255):null):(i=ef.exec(e))?new Ct(i[1],i[2],i[3],1):(i=nf.exec(e))?new Ct(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=of.exec(e))?wn(i[1],i[2],i[3],i[4]):(i=rf.exec(e))?wn(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=sf.exec(e))?Na(i[1],i[2]/100,i[3]/100,1):(i=af.exec(e))?Na(i[1],i[2]/100,i[3]/100,i[4]):Pa.hasOwnProperty(e)?Ta(Pa[e]):e==="transparent"?new Ct(NaN,NaN,NaN,0):null}function Ta(e){return new Ct(e>>16&255,e>>8&255,e&255,1)}function wn(e,i,o,s){return s<=0&&(e=i=o=NaN),new Ct(e,i,o,s)}function uf(e){return e instanceof Ci||(e=fe(e)),e?(e=e.rgb(),new Ct(e.r,e.g,e.b,e.opacity)):new Ct}function qe(e,i,o,s){return arguments.length===1?uf(e):new Ct(e,i,o,s==null?1:s)}function Ct(e,i,o,s){this.r=+e,this.g=+i,this.b=+o,this.opacity=+s}xn(Ct,qe,Go(Ci,{brighter(e){return e=e==null?Pn:Math.pow(Pn,e),new Ct(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ti:Math.pow(Ti,e),new Ct(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ct(Oe(this.r),Oe(this.g),Oe(this.b),Sn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:La,formatHex:La,formatHex8:cf,formatRgb:Ca,toString:Ca}));function La(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}`}function cf(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}${Ie((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ca(){let e=Sn(this.opacity);return`${e===1?"rgb(":"rgba("}${Oe(this.r)}, ${Oe(this.g)}, ${Oe(this.b)}${e===1?")":`, ${e})`}`}function Sn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Oe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ie(e){return e=Oe(e),(e<16?"0":"")+e.toString(16)}function Na(e,i,o,s){return s<=0?e=i=o=NaN:o<=0||o>=1?e=i=NaN:i<=0&&(e=NaN),new Zt(e,i,o,s)}function Ia(e){if(e instanceof Zt)return new Zt(e.h,e.s,e.l,e.opacity);if(e instanceof Ci||(e=fe(e)),!e)return new Zt;if(e instanceof Zt)return e;e=e.rgb();var i=e.r/255,o=e.g/255,s=e.b/255,a=Math.min(i,o,s),l=Math.max(i,o,s),u=NaN,f=l-a,_=(l+a)/2;return f?(i===l?u=(o-s)/f+(o<s)*6:o===l?u=(s-i)/f+2:u=(i-o)/f+4,f/=_<.5?l+a:2-l-a,u*=60):f=_>0&&_<1?0:u,new Zt(u,f,_,e.opacity)}function Oa(e,i,o,s){return arguments.length===1?Ia(e):new Zt(e,i,o,s==null?1:s)}function Zt(e,i,o,s){this.h=+e,this.s=+i,this.l=+o,this.opacity=+s}xn(Zt,Oa,Go(Ci,{brighter(e){return e=e==null?Pn:Math.pow(Pn,e),new Zt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ti:Math.pow(Ti,e),new Zt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,i=isNaN(e)||isNaN(this.s)?0:this.s,o=this.l,s=o+(o<.5?o:1-o)*i,a=2*o-s;return new Ct(Wo(e>=240?e-240:e+120,a,s),Wo(e,a,s),Wo(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new Zt(Ma(this.h),bn(this.s),bn(this.l),Sn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=Sn(this.opacity);return`${e===1?"hsl(":"hsla("}${Ma(this.h)}, ${bn(this.s)*100}%, ${bn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ma(e){return e=(e||0)%360,e<0?e+360:e}function bn(e){return Math.max(0,Math.min(1,e||0))}function Wo(e,i,o){return(e<60?i+(o-i)*e/60:e<180?o:e<240?i+(o-i)*(240-e)/60:i)*255}function Vo(e,i,o,s,a){var l=e*e,u=l*e;return((1-3*e+3*l-u)*i+(4-6*l+3*u)*o+(1+3*e+3*l-3*u)*s+u*a)/6}function Aa(e){var i=e.length-1;return function(o){var s=o<=0?o=0:o>=1?(o=1,i-1):Math.floor(o*i),a=e[s],l=e[s+1],u=s>0?e[s-1]:2*a-l,f=s<i-1?e[s+2]:2*l-a;return Vo((o-s/i)*i,u,a,l,f)}}function Da(e){var i=e.length;return function(o){var s=Math.floor(((o%=1)<0?++o:o)*i),a=e[(s+i-1)%i],l=e[s%i],u=e[(s+1)%i],f=e[(s+2)%i];return Vo((o-s/i)*i,a,l,u,f)}}var qo=e=>()=>e;function ff(e,i){return function(o){return e+o*i}}function df(e,i,o){return e=Math.pow(e,o),i=Math.pow(i,o)-e,o=1/o,function(s){return Math.pow(e+s*i,o)}}function za(e){return(e=+e)==1?En:function(i,o){return o-i?df(i,o,e):qo(isNaN(i)?o:i)}}function En(e,i){var o=i-e;return o?ff(e,o):qo(isNaN(e)?i:e)}var Tn=function e(i){var o=za(i);function s(a,l){var u=o((a=qe(a)).r,(l=qe(l)).r),f=o(a.g,l.g),_=o(a.b,l.b),m=En(a.opacity,l.opacity);return function(p){return a.r=u(p),a.g=f(p),a.b=_(p),a.opacity=m(p),a+""}}return s.gamma=e,s}(1);function ka(e){return function(i){var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u,f;for(u=0;u<o;++u)f=qe(i[u]),s[u]=f.r||0,a[u]=f.g||0,l[u]=f.b||0;return s=e(s),a=e(a),l=e(l),f.opacity=1,function(_){return f.r=s(_),f.g=a(_),f.b=l(_),f+""}}}var _f=ka(Aa),mf=ka(Da);function Dt(e,i){return e=+e,i=+i,function(o){return e*(1-o)+i*o}}var Ko=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jo=new RegExp(Ko.source,"g");function pf(e){return function(){return e}}function gf(e){return function(i){return e(i)+""}}function Xo(e,i){var o=Ko.lastIndex=jo.lastIndex=0,s,a,l,u=-1,f=[],_=[];for(e=e+"",i=i+"";(s=Ko.exec(e))&&(a=jo.exec(i));)(l=a.index)>o&&(l=i.slice(o,l),f[u]?f[u]+=l:f[++u]=l),(s=s[0])===(a=a[0])?f[u]?f[u]+=a:f[++u]=a:(f[++u]=null,_.push({i:u,x:Dt(s,a)})),o=jo.lastIndex;return o<i.length&&(l=i.slice(o),f[u]?f[u]+=l:f[++u]=l),f.length<2?_[0]?gf(_[0].x):pf(i):(i=_.length,function(m){for(var p=0,b;p<i;++p)f[(b=_[p]).i]=b.x(m);return f.join("")})}var Ba=180/Math.PI,Ln={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yo(e,i,o,s,a,l){var u,f,_;return(u=Math.sqrt(e*e+i*i))&&(e/=u,i/=u),(_=e*o+i*s)&&(o-=e*_,s-=i*_),(f=Math.sqrt(o*o+s*s))&&(o/=f,s/=f,_/=f),e*s<i*o&&(e=-e,i=-i,_=-_,u=-u),{translateX:a,translateY:l,rotate:Math.atan2(i,e)*Ba,skewX:Math.atan(_)*Ba,scaleX:u,scaleY:f}}var Cn;function Ra(e){let i=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return i.isIdentity?Ln:Yo(i.a,i.b,i.c,i.d,i.e,i.f)}function Za(e){return e==null?Ln:(Cn||(Cn=document.createElementNS("http://www.w3.org/2000/svg","g")),Cn.setAttribute("transform",e),(e=Cn.transform.baseVal.consolidate())?(e=e.matrix,Yo(e.a,e.b,e.c,e.d,e.e,e.f)):Ln)}function Fa(e,i,o,s){function a(m){return m.length?m.pop()+" ":""}function l(m,p,b,y,v,I){if(m!==b||p!==y){var C=v.push("translate(",null,i,null,o);I.push({i:C-4,x:Dt(m,b)},{i:C-2,x:Dt(p,y)})}else(b||y)&&v.push("translate("+b+i+y+o)}function u(m,p,b,y){m!==p?(m-p>180?p+=360:p-m>180&&(m+=360),y.push({i:b.push(a(b)+"rotate(",null,s)-2,x:Dt(m,p)})):p&&b.push(a(b)+"rotate("+p+s)}function f(m,p,b,y){m!==p?y.push({i:b.push(a(b)+"skewX(",null,s)-2,x:Dt(m,p)}):p&&b.push(a(b)+"skewX("+p+s)}function _(m,p,b,y,v,I){if(m!==b||p!==y){var C=v.push(a(v)+"scale(",null,",",null,")");I.push({i:C-4,x:Dt(m,b)},{i:C-2,x:Dt(p,y)})}else(b!==1||y!==1)&&v.push(a(v)+"scale("+b+","+y+")")}return function(m,p){var b=[],y=[];return m=e(m),p=e(p),l(m.translateX,m.translateY,p.translateX,p.translateY,b,y),u(m.rotate,p.rotate,b,y),f(m.skewX,p.skewX,b,y),_(m.scaleX,m.scaleY,p.scaleX,p.scaleY,b,y),m=p=null,function(v){for(var I=-1,C=y.length,N;++I<C;)b[(N=y[I]).i]=N.x(v);return b.join("")}}}var $o=Fa(Ra,"px, ","px)","deg)"),Jo=Fa(Za,", ",")",")");var vf=1e-12;function Ua(e){return((e=Math.exp(e))+1/e)/2}function yf(e){return((e=Math.exp(e))-1/e)/2}function xf(e){return((e=Math.exp(2*e))-1)/(e+1)}var Qo=function e(i,o,s){function a(l,u){var f=l[0],_=l[1],m=l[2],p=u[0],b=u[1],y=u[2],v=p-f,I=b-_,C=v*v+I*I,N,T;if(C<vf)T=Math.log(y/m)/i,N=function(G){return[f+G*v,_+G*I,m*Math.exp(i*G*T)]};else{var A=Math.sqrt(C),Z=(y*y-m*m+s*C)/(2*m*o*A),E=(y*y-m*m-s*C)/(2*y*o*A),R=Math.log(Math.sqrt(Z*Z+1)-Z),H=Math.log(Math.sqrt(E*E+1)-E);T=(H-R)/i,N=function(G){var $=G*T,K=Ua(R),W=m/(o*A)*(K*xf(i*$+R)-yf(R));return[f+W*v,_+W*I,m*K/Ua(i*$+R)]}}return N.duration=T*1e3*i/Math.SQRT2,N}return a.rho=function(l){var u=Math.max(.001,+l),f=u*u,_=f*f;return e(u,f,_)},a}(Math.SQRT2,2,4);var je=0,Mi=0,Ni=0,Ga=1e3,Nn,Ii,Mn=0,Ae=0,In=0,Oi=typeof performance=="object"&&performance.now?performance:Date,Wa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Di(){return Ae||(Wa(wf),Ae=Oi.now()+In)}function wf(){Ae=0}function Ai(){this._call=this._time=this._next=null}Ai.prototype=Ke.prototype={constructor:Ai,restart:function(e,i,o){if(typeof e!="function")throw new TypeError("callback is not a function");o=(o==null?Di():+o)+(i==null?0:+i),!this._next&&Ii!==this&&(Ii?Ii._next=this:Nn=this,Ii=this),this._call=e,this._time=o,tr()},stop:function(){this._call&&(this._call=null,this._time=1/0,tr())}};function Ke(e,i,o){var s=new Ai;return s.restart(e,i,o),s}function Va(){Di(),++je;for(var e=Nn,i;e;)(i=Ae-e._time)>=0&&e._call.call(void 0,i),e=e._next;--je}function Ha(){Ae=(Mn=Oi.now())+In,je=Mi=0;try{Va()}finally{je=0,Pf(),Ae=0}}function bf(){var e=Oi.now(),i=e-Mn;i>Ga&&(In-=i,Mn=e)}function Pf(){for(var e,i=Nn,o,s=1/0;i;)i._call?(s>i._time&&(s=i._time),e=i,i=i._next):(o=i._next,i._next=null,i=e?e._next=o:Nn=o);Ii=e,tr(s)}function tr(e){if(!je){Mi&&(Mi=clearTimeout(Mi));var i=e-Ae;i>24?(e<1/0&&(Mi=setTimeout(Ha,e-Oi.now()-In)),Ni&&(Ni=clearInterval(Ni))):(Ni||(Mn=Oi.now(),Ni=setInterval(bf,Ga)),je=1,Wa(Ha))}}function On(e,i,o){var s=new Ai;return i=i==null?0:+i,s.restart(a=>{s.stop(),e(a+i)},i,o),s}var Sf=te("start","end","cancel","interrupt"),Ef=[],Ka=0,qa=1,Dn=2,An=3,ja=4,zn=5,zi=6;function de(e,i,o,s,a,l){var u=e.__transition;if(!u)e.__transition={};else if(o in u)return;Tf(e,o,{name:i,index:s,group:a,on:Sf,tween:Ef,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Ka})}function ki(e,i){var o=mt(e,i);if(o.state>Ka)throw new Error("too late; already scheduled");return o}function xt(e,i){var o=mt(e,i);if(o.state>An)throw new Error("too late; already running");return o}function mt(e,i){var o=e.__transition;if(!o||!(o=o[i]))throw new Error("transition not found");return o}function Tf(e,i,o){var s=e.__transition,a;s[i]=o,o.timer=Ke(l,0,o.time);function l(m){o.state=qa,o.timer.restart(u,o.delay,o.time),o.delay<=m&&u(m-o.delay)}function u(m){var p,b,y,v;if(o.state!==qa)return _();for(p in s)if(v=s[p],v.name===o.name){if(v.state===An)return On(u);v.state===ja?(v.state=zi,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete s[p]):+p<i&&(v.state=zi,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete s[p])}if(On(function(){o.state===An&&(o.state=ja,o.timer.restart(f,o.delay,o.time),f(m))}),o.state=Dn,o.on.call("start",e,e.__data__,o.index,o.group),o.state===Dn){for(o.state=An,a=new Array(y=o.tween.length),p=0,b=-1;p<y;++p)(v=o.tween[p].value.call(e,e.__data__,o.index,o.group))&&(a[++b]=v);a.length=b+1}}function f(m){for(var p=m<o.duration?o.ease.call(null,m/o.duration):(o.timer.restart(_),o.state=zn,1),b=-1,y=a.length;++b<y;)a[b].call(e,p);o.state===zn&&(o.on.call("end",e,e.__data__,o.index,o.group),_())}function _(){o.state=zi,o.timer.stop(),delete s[i];for(var m in s)return;delete e.__transition}}function De(e,i){var o=e.__transition,s,a,l=!0,u;if(o){i=i==null?null:i+"";for(u in o){if((s=o[u]).name!==i){l=!1;continue}a=s.state>Dn&&s.state<zn,s.state=zi,s.timer.stop(),s.on.call(a?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete o[u]}l&&delete e.__transition}}function Xa(e){return this.each(function(){De(this,e)})}function Lf(e,i){var o,s;return function(){var a=xt(this,e),l=a.tween;if(l!==o){s=o=l;for(var u=0,f=s.length;u<f;++u)if(s[u].name===i){s=s.slice(),s.splice(u,1);break}}a.tween=s}}function Cf(e,i,o){var s,a;if(typeof o!="function")throw new Error;return function(){var l=xt(this,e),u=l.tween;if(u!==s){a=(s=u).slice();for(var f={name:i,value:o},_=0,m=a.length;_<m;++_)if(a[_].name===i){a[_]=f;break}_===m&&a.push(f)}l.tween=a}}function Ya(e,i){var o=this._id;if(e+="",arguments.length<2){for(var s=mt(this.node(),o).tween,a=0,l=s.length,u;a<l;++a)if((u=s[a]).name===e)return u.value;return null}return this.each((i==null?Lf:Cf)(o,e,i))}function Xe(e,i,o){var s=e._id;return e.each(function(){var a=xt(this,s);(a.value||(a.value={}))[i]=o.apply(this,arguments)}),function(a){return mt(a,s).value[i]}}function kn(e,i){var o;return(typeof i=="number"?Dt:i instanceof fe?Tn:(o=fe(i))?(i=o,Tn):Xo)(e,i)}function Nf(e){return function(){this.removeAttribute(e)}}function Mf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function If(e,i,o){var s,a=o+"",l;return function(){var u=this.getAttribute(e);return u===a?null:u===s?l:l=i(s=u,o)}}function Of(e,i,o){var s,a=o+"",l;return function(){var u=this.getAttributeNS(e.space,e.local);return u===a?null:u===s?l:l=i(s=u,o)}}function Af(e,i,o){var s,a,l;return function(){var u,f=o(this),_;return f==null?void this.removeAttribute(e):(u=this.getAttribute(e),_=f+"",u===_?null:u===s&&_===a?l:(a=_,l=i(s=u,f)))}}function Df(e,i,o){var s,a,l;return function(){var u,f=o(this),_;return f==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),_=f+"",u===_?null:u===s&&_===a?l:(a=_,l=i(s=u,f)))}}function $a(e,i){var o=ee(e),s=o==="transform"?Jo:kn;return this.attrTween(e,typeof i=="function"?(o.local?Df:Af)(o,s,Xe(this,"attr."+e,i)):i==null?(o.local?Mf:Nf)(o):(o.local?Of:If)(o,s,i))}function zf(e,i){return function(o){this.setAttribute(e,i.call(this,o))}}function kf(e,i){return function(o){this.setAttributeNS(e.space,e.local,i.call(this,o))}}function Bf(e,i){var o,s;function a(){var l=i.apply(this,arguments);return l!==s&&(o=(s=l)&&kf(e,l)),o}return a._value=i,a}function Rf(e,i){var o,s;function a(){var l=i.apply(this,arguments);return l!==s&&(o=(s=l)&&zf(e,l)),o}return a._value=i,a}function Ja(e,i){var o="attr."+e;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(i==null)return this.tween(o,null);if(typeof i!="function")throw new Error;var s=ee(e);return this.tween(o,(s.local?Bf:Rf)(s,i))}function Zf(e,i){return function(){ki(this,e).delay=+i.apply(this,arguments)}}function Ff(e,i){return i=+i,function(){ki(this,e).delay=i}}function Qa(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?Zf:Ff)(i,e)):mt(this.node(),i).delay}function Uf(e,i){return function(){xt(this,e).duration=+i.apply(this,arguments)}}function Hf(e,i){return i=+i,function(){xt(this,e).duration=i}}function th(e){var i=this._id;return arguments.length?this.each((typeof e=="function"?Uf:Hf)(i,e)):mt(this.node(),i).duration}function Gf(e,i){if(typeof i!="function")throw new Error;return function(){xt(this,e).ease=i}}function eh(e){var i=this._id;return arguments.length?this.each(Gf(i,e)):mt(this.node(),i).ease}function Wf(e,i){return function(){var o=i.apply(this,arguments);if(typeof o!="function")throw new Error;xt(this,e).ease=o}}function ih(e){if(typeof e!="function")throw new Error;return this.each(Wf(this._id,e))}function nh(e){typeof e!="function"&&(e=xi(e));for(var i=this._groups,o=i.length,s=new Array(o),a=0;a<o;++a)for(var l=i[a],u=l.length,f=s[a]=[],_,m=0;m<u;++m)(_=l[m])&&e.call(_,_.__data__,m,l)&&f.push(_);return new Et(s,this._parents,this._name,this._id)}function oh(e){if(e._id!==this._id)throw new Error;for(var i=this._groups,o=e._groups,s=i.length,a=o.length,l=Math.min(s,a),u=new Array(s),f=0;f<l;++f)for(var _=i[f],m=o[f],p=_.length,b=u[f]=new Array(p),y,v=0;v<p;++v)(y=_[v]||m[v])&&(b[v]=y);for(;f<s;++f)u[f]=i[f];return new Et(u,this._parents,this._name,this._id)}function Vf(e){return(e+"").trim().split(/^|\s+/).every(function(i){var o=i.indexOf(".");return o>=0&&(i=i.slice(0,o)),!i||i==="start"})}function qf(e,i,o){var s,a,l=Vf(i)?ki:xt;return function(){var u=l(this,e),f=u.on;f!==s&&(a=(s=f).copy()).on(i,o),u.on=a}}function rh(e,i){var o=this._id;return arguments.length<2?mt(this.node(),o).on.on(e):this.each(qf(o,e,i))}function jf(e){return function(){var i=this.parentNode;for(var o in this.__transition)if(+o!==e)return;i&&i.removeChild(this)}}function sh(){return this.on("end.remove",jf(this._id))}function ah(e){var i=this._name,o=this._id;typeof e!="function"&&(e=Ne(e));for(var s=this._groups,a=s.length,l=new Array(a),u=0;u<a;++u)for(var f=s[u],_=f.length,m=l[u]=new Array(_),p,b,y=0;y<_;++y)(p=f[y])&&(b=e.call(p,p.__data__,y,f))&&("__data__"in p&&(b.__data__=p.__data__),m[y]=b,de(m[y],i,o,y,m,mt(p,o)));return new Et(l,this._parents,i,o)}function hh(e){var i=this._name,o=this._id;typeof e!="function"&&(e=yi(e));for(var s=this._groups,a=s.length,l=[],u=[],f=0;f<a;++f)for(var _=s[f],m=_.length,p,b=0;b<m;++b)if(p=_[b]){for(var y=e.call(p,p.__data__,b,_),v,I=mt(p,o),C=0,N=y.length;C<N;++C)(v=y[C])&&de(v,i,o,C,y,I);l.push(y),u.push(p)}return new Et(l,u,i,o)}var Kf=ie.prototype.constructor;function lh(){return new Kf(this._groups,this._parents)}function Xf(e,i){var o,s,a;return function(){var l=ue(this,e),u=(this.style.removeProperty(e),ue(this,e));return l===u?null:l===o&&u===s?a:a=i(o=l,s=u)}}function uh(e){return function(){this.style.removeProperty(e)}}function Yf(e,i,o){var s,a=o+"",l;return function(){var u=ue(this,e);return u===a?null:u===s?l:l=i(s=u,o)}}function $f(e,i,o){var s,a,l;return function(){var u=ue(this,e),f=o(this),_=f+"";return f==null&&(_=f=(this.style.removeProperty(e),ue(this,e))),u===_?null:u===s&&_===a?l:(a=_,l=i(s=u,f))}}function Jf(e,i){var o,s,a,l="style."+i,u="end."+l,f;return function(){var _=xt(this,e),m=_.on,p=_.value[l]==null?f||(f=uh(i)):void 0;(m!==o||a!==p)&&(s=(o=m).copy()).on(u,a=p),_.on=s}}function ch(e,i,o){var s=(e+="")=="transform"?$o:kn;return i==null?this.styleTween(e,Xf(e,s)).on("end.style."+e,uh(e)):typeof i=="function"?this.styleTween(e,$f(e,s,Xe(this,"style."+e,i))).each(Jf(this._id,e)):this.styleTween(e,Yf(e,s,i),o).on("end.style."+e,null)}function Qf(e,i,o){return function(s){this.style.setProperty(e,i.call(this,s),o)}}function td(e,i,o){var s,a;function l(){var u=i.apply(this,arguments);return u!==a&&(s=(a=u)&&Qf(e,u,o)),s}return l._value=i,l}function fh(e,i,o){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(i==null)return this.tween(s,null);if(typeof i!="function")throw new Error;return this.tween(s,td(e,i,o==null?"":o))}function ed(e){return function(){this.textContent=e}}function id(e){return function(){var i=e(this);this.textContent=i==null?"":i}}function dh(e){return this.tween("text",typeof e=="function"?id(Xe(this,"text",e)):ed(e==null?"":e+""))}function nd(e){return function(i){this.textContent=e.call(this,i)}}function od(e){var i,o;function s(){var a=e.apply(this,arguments);return a!==o&&(i=(o=a)&&nd(a)),i}return s._value=e,s}function _h(e){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,od(e))}function mh(){for(var e=this._name,i=this._id,o=Bn(),s=this._groups,a=s.length,l=0;l<a;++l)for(var u=s[l],f=u.length,_,m=0;m<f;++m)if(_=u[m]){var p=mt(_,i);de(_,e,o,m,u,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Et(s,this._parents,e,o)}function ph(){var e,i,o=this,s=o._id,a=o.size();return new Promise(function(l,u){var f={value:u},_={value:function(){--a===0&&l()}};o.each(function(){var m=xt(this,s),p=m.on;p!==e&&(i=(e=p).copy(),i._.cancel.push(f),i._.interrupt.push(f),i._.end.push(_)),m.on=i}),a===0&&l()})}var rd=0;function Et(e,i,o,s){this._groups=e,this._parents=i,this._name=o,this._id=s}function gh(e){return ie().transition(e)}function Bn(){return++rd}var ne=ie.prototype;Et.prototype=gh.prototype={constructor:Et,select:ah,selectAll:hh,selectChild:ne.selectChild,selectChildren:ne.selectChildren,filter:nh,merge:oh,selection:lh,transition:mh,call:ne.call,nodes:ne.nodes,node:ne.node,size:ne.size,empty:ne.empty,each:ne.each,on:rh,attr:$a,attrTween:Ja,style:ch,styleTween:fh,text:dh,textTween:_h,remove:sh,tween:Ya,delay:Qa,duration:th,ease:eh,easeVarying:ih,end:ph,[Symbol.iterator]:ne[Symbol.iterator]};var sd={time:null,delay:0,duration:250,ease:yn};function ad(e,i){for(var o;!(o=e.__transition)||!(o=o[i]);)if(!(e=e.parentNode))throw new Error(`transition ${i} not found`);return o}function vh(e){var i,o;e instanceof Et?(i=e._id,e=e._name):(i=Bn(),(o=sd).time=Di(),e=e==null?null:e+"");for(var s=this._groups,a=s.length,l=0;l<a;++l)for(var u=s[l],f=u.length,_,m=0;m<f;++m)(_=u[m])&&de(_,e,i,m,u,o||ad(_,i));return new Et(s,this._parents,e,i)}ie.prototype.interrupt=Xa;ie.prototype.transition=vh;var Bi=e=>()=>e;function er(e,{sourceEvent:i,target:o,transform:s,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:i,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:a}})}function Ft(e,i,o){this.k=e,this.x=i,this.y=o}Ft.prototype={constructor:Ft,scale:function(e){return e===1?this:new Ft(this.k*e,this.x,this.y)},translate:function(e,i){return e===0&i===0?this:new Ft(this.k,this.x+this.k*e,this.y+this.k*i)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ut=new Ft(1,0,0);ir.prototype=Ft.prototype;function ir(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ut;return e.__zoom}function Rn(e){e.stopImmediatePropagation()}function Ye(e){e.preventDefault(),e.stopImmediatePropagation()}function hd(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ld(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function yh(){return this.__zoom||Ut}function ud(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function cd(){return navigator.maxTouchPoints||"ontouchstart"in this}function fd(e,i,o){var s=e.invertX(i[0][0])-o[0][0],a=e.invertX(i[1][0])-o[1][0],l=e.invertY(i[0][1])-o[0][1],u=e.invertY(i[1][1])-o[1][1];return e.translate(a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a),u>l?(l+u)/2:Math.min(0,l)||Math.max(0,u))}function nr(){var e=hd,i=ld,o=fd,s=ud,a=cd,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],f=250,_=Qo,m=te("start","zoom","end"),p,b,y,v=500,I=150,C=0,N=10;function T(w){w.property("__zoom",yh).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",K).on("dblclick.zoom",W).filter(a).on("touchstart.zoom",rt).on("touchmove.zoom",st).on("touchend.zoom touchcancel.zoom",wt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(w,D,P,B){var O=w.selection?w.selection():w;O.property("__zoom",yh),w!==O?R(w,D,P,B):O.interrupt().each(function(){H(this,arguments).event(B).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},T.scaleBy=function(w,D,P,B){T.scaleTo(w,function(){var O=this.__zoom.k,z=typeof D=="function"?D.apply(this,arguments):D;return O*z},P,B)},T.scaleTo=function(w,D,P,B){T.transform(w,function(){var O=i.apply(this,arguments),z=this.__zoom,U=P==null?E(O):typeof P=="function"?P.apply(this,arguments):P,V=z.invert(U),X=typeof D=="function"?D.apply(this,arguments):D;return o(Z(A(z,X),U,V),O,u)},P,B)},T.translateBy=function(w,D,P,B){T.transform(w,function(){return o(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof P=="function"?P.apply(this,arguments):P),i.apply(this,arguments),u)},null,B)},T.translateTo=function(w,D,P,B,O){T.transform(w,function(){var z=i.apply(this,arguments),U=this.__zoom,V=B==null?E(z):typeof B=="function"?B.apply(this,arguments):B;return o(Ut.translate(V[0],V[1]).scale(U.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof P=="function"?-P.apply(this,arguments):-P),z,u)},B,O)};function A(w,D){return D=Math.max(l[0],Math.min(l[1],D)),D===w.k?w:new Ft(D,w.x,w.y)}function Z(w,D,P){var B=D[0]-P[0]*w.k,O=D[1]-P[1]*w.k;return B===w.x&&O===w.y?w:new Ft(w.k,B,O)}function E(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function R(w,D,P,B){w.on("start.zoom",function(){H(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(B).end()}).tween("zoom",function(){var O=this,z=arguments,U=H(O,z).event(B),V=i.apply(O,z),X=P==null?E(V):typeof P=="function"?P.apply(O,z):P,J=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),q=O.__zoom,ut=typeof D=="function"?D.apply(O,z):D,pt=_(q.invert(X).concat(J/q.k),ut.invert(X).concat(J/ut.k));return function(Lt){if(Lt===1)Lt=ut;else{var Mt=pt(Lt),pe=J/Mt[2];Lt=new Ft(pe,X[0]-Mt[0]*pe,X[1]-Mt[1]*pe)}U.zoom(null,Lt)}})}function H(w,D,P){return!P&&w.__zooming||new G(w,D)}function G(w,D){this.that=w,this.args=D,this.active=0,this.sourceEvent=null,this.extent=i.apply(w,D),this.taps=0}G.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,D){return this.mouse&&w!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var D=Pt(this.that).datum();m.call(w,this.that,new er(w,{sourceEvent:this.sourceEvent,target:T,type:w,transform:this.that.__zoom,dispatch:m}),D)}};function $(w,...D){if(!e.apply(this,arguments))return;var P=H(this,D).event(w),B=this.__zoom,O=Math.max(l[0],Math.min(l[1],B.k*Math.pow(2,s.apply(this,arguments)))),z=At(w);if(P.wheel)(P.mouse[0][0]!==z[0]||P.mouse[0][1]!==z[1])&&(P.mouse[1]=B.invert(P.mouse[0]=z)),clearTimeout(P.wheel);else{if(B.k===O)return;P.mouse=[z,B.invert(z)],De(this),P.start()}Ye(w),P.wheel=setTimeout(U,I),P.zoom("mouse",o(Z(A(B,O),P.mouse[0],P.mouse[1]),P.extent,u));function U(){P.wheel=null,P.end()}}function K(w,...D){if(y||!e.apply(this,arguments))return;var P=w.currentTarget,B=H(this,D,!0).event(w),O=Pt(w.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",J,!0),z=At(w,P),U=w.clientX,V=w.clientY;bi(w.view),Rn(w),B.mouse=[z,this.__zoom.invert(z)],De(this),B.start();function X(q){if(Ye(q),!B.moved){var ut=q.clientX-U,pt=q.clientY-V;B.moved=ut*ut+pt*pt>C}B.event(q).zoom("mouse",o(Z(B.that.__zoom,B.mouse[0]=At(q,P),B.mouse[1]),B.extent,u))}function J(q){O.on("mousemove.zoom mouseup.zoom",null),Pi(q.view,B.moved),Ye(q),B.event(q).end()}}function W(w,...D){if(e.apply(this,arguments)){var P=this.__zoom,B=At(w.changedTouches?w.changedTouches[0]:w,this),O=P.invert(B),z=P.k*(w.shiftKey?.5:2),U=o(Z(A(P,z),B,O),i.apply(this,D),u);Ye(w),f>0?Pt(this).transition().duration(f).call(R,U,B,w):Pt(this).call(T.transform,U,B,w)}}function rt(w,...D){if(e.apply(this,arguments)){var P=w.touches,B=P.length,O=H(this,D,w.changedTouches.length===B).event(w),z,U,V,X;for(Rn(w),U=0;U<B;++U)V=P[U],X=At(V,this),X=[X,this.__zoom.invert(X),V.identifier],O.touch0?!O.touch1&&O.touch0[2]!==X[2]&&(O.touch1=X,O.taps=0):(O.touch0=X,z=!0,O.taps=1+!!p);p&&(p=clearTimeout(p)),z&&(O.taps<2&&(b=X[0],p=setTimeout(function(){p=null},v)),De(this),O.start())}}function st(w,...D){if(this.__zooming){var P=H(this,D).event(w),B=w.changedTouches,O=B.length,z,U,V,X;for(Ye(w),z=0;z<O;++z)U=B[z],V=At(U,this),P.touch0&&P.touch0[2]===U.identifier?P.touch0[0]=V:P.touch1&&P.touch1[2]===U.identifier&&(P.touch1[0]=V);if(U=P.that.__zoom,P.touch1){var J=P.touch0[0],q=P.touch0[1],ut=P.touch1[0],pt=P.touch1[1],Lt=(Lt=ut[0]-J[0])*Lt+(Lt=ut[1]-J[1])*Lt,Mt=(Mt=pt[0]-q[0])*Mt+(Mt=pt[1]-q[1])*Mt;U=A(U,Math.sqrt(Lt/Mt)),V=[(J[0]+ut[0])/2,(J[1]+ut[1])/2],X=[(q[0]+pt[0])/2,(q[1]+pt[1])/2]}else if(P.touch0)V=P.touch0[0],X=P.touch0[1];else return;P.zoom("touch",o(Z(U,V,X),P.extent,u))}}function wt(w,...D){if(this.__zooming){var P=H(this,D).event(w),B=w.changedTouches,O=B.length,z,U;for(Rn(w),y&&clearTimeout(y),y=setTimeout(function(){y=null},v),z=0;z<O;++z)U=B[z],P.touch0&&P.touch0[2]===U.identifier?delete P.touch0:P.touch1&&P.touch1[2]===U.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(U=At(U,this),Math.hypot(b[0]-U[0],b[1]-U[1])<N)){var V=Pt(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return T.wheelDelta=function(w){return arguments.length?(s=typeof w=="function"?w:Bi(+w),T):s},T.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Bi(!!w),T):e},T.touchable=function(w){return arguments.length?(a=typeof w=="function"?w:Bi(!!w),T):a},T.extent=function(w){return arguments.length?(i=typeof w=="function"?w:Bi([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),T):i},T.scaleExtent=function(w){return arguments.length?(l[0]=+w[0],l[1]=+w[1],T):[l[0],l[1]]},T.translateExtent=function(w){return arguments.length?(u[0][0]=+w[0][0],u[1][0]=+w[1][0],u[0][1]=+w[0][1],u[1][1]=+w[1][1],T):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},T.constrain=function(w){return arguments.length?(o=w,T):o},T.duration=function(w){return arguments.length?(f=+w,T):f},T.interpolate=function(w){return arguments.length?(_=w,T):_},T.on=function(){var w=m.on.apply(m,arguments);return w===m?T:w},T.clickDistance=function(w){return arguments.length?(C=(w=+w)*w,T):Math.sqrt(C)},T.tapDistance=function(w){return arguments.length?(N=+w,T):N},T}var ht;(function(e){e.SIMULATION_START="simulation-start",e.SIMULATION_PROGRESS="simulation-progress",e.SIMULATION_END="simulation-end",e.NODE_DRAG="node-drag",e.NODE_DRAG_END="node-drag-end",e.SETTINGS_UPDATE="settings-update"})(ht||(ht={}));var Nt=class{constructor(){this._listeners=new Map}once(i,o){let s={callable:o,isOnce:!0},a=this._listeners.get(i);return a?a.push(s):this._listeners.set(i,[s]),this}on(i,o){let s={callable:o},a=this._listeners.get(i);return a?a.push(s):this._listeners.set(i,[s]),this}off(i,o){let s=this._listeners.get(i);if(s){let a=s.filter(l=>l.callable!==o);this._listeners.set(i,a)}return this}emit(i,o){let s=this._listeners.get(i);if(!s||s.length===0)return!1;let a=!1;for(let l=0;l<s.length;l++)s[l].isOnce&&(a=!0),s[l].callable(o);if(a){let l=s.filter(u=>!u.isOnce);this._listeners.set(i,l)}return!0}eventNames(){return[...this._listeners.keys()]}listenerCount(i){let o=this._listeners.get(i);return o?o.length:0}listeners(i){let o=this._listeners.get(i);return o?o.map(s=>s.callable):[]}addListener(i,o){return this.on(i,o)}removeListener(i,o){return this.off(i,o)}removeAllListeners(i){return i?this._listeners.delete(i):this._listeners.clear(),this}};function or(e,i){var o,s=1;e==null&&(e=0),i==null&&(i=0);function a(){var l,u=o.length,f,_=0,m=0;for(l=0;l<u;++l)f=o[l],_+=f.x,m+=f.y;for(_=(_/u-e)*s,m=(m/u-i)*s,l=0;l<u;++l)f=o[l],f.x-=_,f.y-=m}return a.initialize=function(l){o=l},a.x=function(l){return arguments.length?(e=+l,a):e},a.y=function(l){return arguments.length?(i=+l,a):i},a.strength=function(l){return arguments.length?(s=+l,a):s},a}function xh(e){let i=+this._x.call(null,e),o=+this._y.call(null,e);return wh(this.cover(i,o),i,o,e)}function wh(e,i,o,s){if(isNaN(i)||isNaN(o))return e;var a,l=e._root,u={data:s},f=e._x0,_=e._y0,m=e._x1,p=e._y1,b,y,v,I,C,N,T,A;if(!l)return e._root=u,e;for(;l.length;)if((C=i>=(b=(f+m)/2))?f=b:m=b,(N=o>=(y=(_+p)/2))?_=y:p=y,a=l,!(l=l[T=N<<1|C]))return a[T]=u,e;if(v=+e._x.call(null,l.data),I=+e._y.call(null,l.data),i===v&&o===I)return u.next=l,a?a[T]=u:e._root=u,e;do a=a?a[T]=new Array(4):e._root=new Array(4),(C=i>=(b=(f+m)/2))?f=b:m=b,(N=o>=(y=(_+p)/2))?_=y:p=y;while((T=N<<1|C)===(A=(I>=y)<<1|v>=b));return a[A]=l,a[T]=u,e}function bh(e){var i,o,s=e.length,a,l,u=new Array(s),f=new Array(s),_=1/0,m=1/0,p=-1/0,b=-1/0;for(o=0;o<s;++o)isNaN(a=+this._x.call(null,i=e[o]))||isNaN(l=+this._y.call(null,i))||(u[o]=a,f[o]=l,a<_&&(_=a),a>p&&(p=a),l<m&&(m=l),l>b&&(b=l));if(_>p||m>b)return this;for(this.cover(_,m).cover(p,b),o=0;o<s;++o)wh(this,u[o],f[o],e[o]);return this}function Ph(e,i){if(isNaN(e=+e)||isNaN(i=+i))return this;var o=this._x0,s=this._y0,a=this._x1,l=this._y1;if(isNaN(o))a=(o=Math.floor(e))+1,l=(s=Math.floor(i))+1;else{for(var u=a-o||1,f=this._root,_,m;o>e||e>=a||s>i||i>=l;)switch(m=(i<s)<<1|e<o,_=new Array(4),_[m]=f,f=_,u*=2,m){case 0:a=o+u,l=s+u;break;case 1:o=a-u,l=s+u;break;case 2:a=o+u,s=l-u;break;case 3:o=a-u,s=l-u;break}this._root&&this._root.length&&(this._root=f)}return this._x0=o,this._y0=s,this._x1=a,this._y1=l,this}function Sh(){var e=[];return this.visit(function(i){if(!i.length)do e.push(i.data);while(i=i.next)}),e}function Eh(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function gt(e,i,o,s,a){this.node=e,this.x0=i,this.y0=o,this.x1=s,this.y1=a}function Th(e,i,o){var s,a=this._x0,l=this._y0,u,f,_,m,p=this._x1,b=this._y1,y=[],v=this._root,I,C;for(v&&y.push(new gt(v,a,l,p,b)),o==null?o=1/0:(a=e-o,l=i-o,p=e+o,b=i+o,o*=o);I=y.pop();)if(!(!(v=I.node)||(u=I.x0)>p||(f=I.y0)>b||(_=I.x1)<a||(m=I.y1)<l))if(v.length){var N=(u+_)/2,T=(f+m)/2;y.push(new gt(v[3],N,T,_,m),new gt(v[2],u,T,N,m),new gt(v[1],N,f,_,T),new gt(v[0],u,f,N,T)),(C=(i>=T)<<1|e>=N)&&(I=y[y.length-1],y[y.length-1]=y[y.length-1-C],y[y.length-1-C]=I)}else{var A=e-+this._x.call(null,v.data),Z=i-+this._y.call(null,v.data),E=A*A+Z*Z;if(E<o){var R=Math.sqrt(o=E);a=e-R,l=i-R,p=e+R,b=i+R,s=v.data}}return s}function Lh(e){if(isNaN(p=+this._x.call(null,e))||isNaN(b=+this._y.call(null,e)))return this;var i,o=this._root,s,a,l,u=this._x0,f=this._y0,_=this._x1,m=this._y1,p,b,y,v,I,C,N,T;if(!o)return this;if(o.length)for(;;){if((I=p>=(y=(u+_)/2))?u=y:_=y,(C=b>=(v=(f+m)/2))?f=v:m=v,i=o,!(o=o[N=C<<1|I]))return this;if(!o.length)break;(i[N+1&3]||i[N+2&3]||i[N+3&3])&&(s=i,T=N)}for(;o.data!==e;)if(a=o,!(o=o.next))return this;return(l=o.next)&&delete o.next,a?(l?a.next=l:delete a.next,this):i?(l?i[N]=l:delete i[N],(o=i[0]||i[1]||i[2]||i[3])&&o===(i[3]||i[2]||i[1]||i[0])&&!o.length&&(s?s[T]=o:this._root=o),this):(this._root=l,this)}function Ch(e){for(var i=0,o=e.length;i<o;++i)this.remove(e[i]);return this}function Nh(){return this._root}function Mh(){var e=0;return this.visit(function(i){if(!i.length)do++e;while(i=i.next)}),e}function Ih(e){var i=[],o,s=this._root,a,l,u,f,_;for(s&&i.push(new gt(s,this._x0,this._y0,this._x1,this._y1));o=i.pop();)if(!e(s=o.node,l=o.x0,u=o.y0,f=o.x1,_=o.y1)&&s.length){var m=(l+f)/2,p=(u+_)/2;(a=s[3])&&i.push(new gt(a,m,p,f,_)),(a=s[2])&&i.push(new gt(a,l,p,m,_)),(a=s[1])&&i.push(new gt(a,m,u,f,p)),(a=s[0])&&i.push(new gt(a,l,u,m,p))}return this}function Oh(e){var i=[],o=[],s;for(this._root&&i.push(new gt(this._root,this._x0,this._y0,this._x1,this._y1));s=i.pop();){var a=s.node;if(a.length){var l,u=s.x0,f=s.y0,_=s.x1,m=s.y1,p=(u+_)/2,b=(f+m)/2;(l=a[0])&&i.push(new gt(l,u,f,p,b)),(l=a[1])&&i.push(new gt(l,p,f,_,b)),(l=a[2])&&i.push(new gt(l,u,b,p,m)),(l=a[3])&&i.push(new gt(l,p,b,_,m))}o.push(s)}for(;s=o.pop();)e(s.node,s.x0,s.y0,s.x1,s.y1);return this}function Ah(e){return e[0]}function Dh(e){return arguments.length?(this._x=e,this):this._x}function zh(e){return e[1]}function kh(e){return arguments.length?(this._y=e,this):this._y}function ze(e,i,o){var s=new rr(i==null?Ah:i,o==null?zh:o,NaN,NaN,NaN,NaN);return e==null?s:s.addAll(e)}function rr(e,i,o,s,a,l){this._x=e,this._y=i,this._x0=o,this._y0=s,this._x1=a,this._y1=l,this._root=void 0}function Bh(e){for(var i={data:e.data},o=i;e=e.next;)o=o.next={data:e.data};return i}var Tt=ze.prototype=rr.prototype;Tt.copy=function(){var e=new rr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root,o,s;if(!i)return e;if(!i.length)return e._root=Bh(i),e;for(o=[{source:i,target:e._root=new Array(4)}];i=o.pop();)for(var a=0;a<4;++a)(s=i.source[a])&&(s.length?o.push({source:s,target:i.target[a]=new Array(4)}):i.target[a]=Bh(s));return e};Tt.add=xh;Tt.addAll=bh;Tt.cover=Ph;Tt.data=Sh;Tt.extent=Eh;Tt.find=Th;Tt.remove=Lh;Tt.removeAll=Ch;Tt.root=Nh;Tt.size=Mh;Tt.visit=Ih;Tt.visitAfter=Oh;Tt.x=Dh;Tt.y=kh;function _t(e){return function(){return e}}function Ht(e){return(e()-.5)*1e-6}function dd(e){return e.x+e.vx}function _d(e){return e.y+e.vy}function sr(e){var i,o,s,a=1,l=1;typeof e!="function"&&(e=_t(e==null?1:+e));function u(){for(var m,p=i.length,b,y,v,I,C,N,T=0;T<l;++T)for(b=ze(i,dd,_d).visitAfter(f),m=0;m<p;++m)y=i[m],C=o[y.index],N=C*C,v=y.x+y.vx,I=y.y+y.vy,b.visit(A);function A(Z,E,R,H,G){var $=Z.data,K=Z.r,W=C+K;if($){if($.index>y.index){var rt=v-$.x-$.vx,st=I-$.y-$.vy,wt=rt*rt+st*st;wt<W*W&&(rt===0&&(rt=Ht(s),wt+=rt*rt),st===0&&(st=Ht(s),wt+=st*st),wt=(W-(wt=Math.sqrt(wt)))/wt*a,y.vx+=(rt*=wt)*(W=(K*=K)/(N+K)),y.vy+=(st*=wt)*W,$.vx-=rt*(W=1-W),$.vy-=st*W)}return}return E>v+W||H<v-W||R>I+W||G<I-W}}function f(m){if(m.data)return m.r=o[m.data.index];for(var p=m.r=0;p<4;++p)m[p]&&m[p].r>m.r&&(m.r=m[p].r)}function _(){if(i){var m,p=i.length,b;for(o=new Array(p),m=0;m<p;++m)b=i[m],o[b.index]=+e(b,m,i)}}return u.initialize=function(m,p){i=m,s=p,_()},u.iterations=function(m){return arguments.length?(l=+m,u):l},u.strength=function(m){return arguments.length?(a=+m,u):a},u.radius=function(m){return arguments.length?(e=typeof m=="function"?m:_t(+m),_(),u):e},u}function md(e){return e.index}function Rh(e,i){var o=e.get(i);if(!o)throw new Error("node not found: "+i);return o}function ar(e){var i=md,o=b,s,a=_t(30),l,u,f,_,m,p=1;e==null&&(e=[]);function b(N){return 1/Math.min(f[N.source.index],f[N.target.index])}function y(N){for(var T=0,A=e.length;T<p;++T)for(var Z=0,E,R,H,G,$,K,W;Z<A;++Z)E=e[Z],R=E.source,H=E.target,G=H.x+H.vx-R.x-R.vx||Ht(m),$=H.y+H.vy-R.y-R.vy||Ht(m),K=Math.sqrt(G*G+$*$),K=(K-l[Z])/K*N*s[Z],G*=K,$*=K,H.vx-=G*(W=_[Z]),H.vy-=$*W,R.vx+=G*(W=1-W),R.vy+=$*W}function v(){if(u){var N,T=u.length,A=e.length,Z=new Map(u.map((R,H)=>[i(R,H,u),R])),E;for(N=0,f=new Array(T);N<A;++N)E=e[N],E.index=N,typeof E.source!="object"&&(E.source=Rh(Z,E.source)),typeof E.target!="object"&&(E.target=Rh(Z,E.target)),f[E.source.index]=(f[E.source.index]||0)+1,f[E.target.index]=(f[E.target.index]||0)+1;for(N=0,_=new Array(A);N<A;++N)E=e[N],_[N]=f[E.source.index]/(f[E.source.index]+f[E.target.index]);s=new Array(A),I(),l=new Array(A),C()}}function I(){if(u)for(var N=0,T=e.length;N<T;++N)s[N]=+o(e[N],N,e)}function C(){if(u)for(var N=0,T=e.length;N<T;++N)l[N]=+a(e[N],N,e)}return y.initialize=function(N,T){u=N,m=T,v()},y.links=function(N){return arguments.length?(e=N,v(),y):e},y.id=function(N){return arguments.length?(i=N,y):i},y.iterations=function(N){return arguments.length?(p=+N,y):p},y.strength=function(N){return arguments.length?(o=typeof N=="function"?N:_t(+N),I(),y):o},y.distance=function(N){return arguments.length?(a=typeof N=="function"?N:_t(+N),C(),y):a},y}function Zh(){let e=1;return()=>(e=(1664525*e+1013904223)%4294967296)/4294967296}function Fh(e){return e.x}function Uh(e){return e.y}var pd=10,gd=Math.PI*(3-Math.sqrt(5));function hr(e){var i,o=1,s=.001,a=1-Math.pow(s,1/300),l=0,u=.6,f=new Map,_=Ke(b),m=te("tick","end"),p=Zh();e==null&&(e=[]);function b(){y(),m.call("tick",i),o<s&&(_.stop(),m.call("end",i))}function y(C){var N,T=e.length,A;C===void 0&&(C=1);for(var Z=0;Z<C;++Z)for(o+=(l-o)*a,f.forEach(function(E){E(o)}),N=0;N<T;++N)A=e[N],A.fx==null?A.x+=A.vx*=u:(A.x=A.fx,A.vx=0),A.fy==null?A.y+=A.vy*=u:(A.y=A.fy,A.vy=0);return i}function v(){for(var C=0,N=e.length,T;C<N;++C){if(T=e[C],T.index=C,T.fx!=null&&(T.x=T.fx),T.fy!=null&&(T.y=T.fy),isNaN(T.x)||isNaN(T.y)){var A=pd*Math.sqrt(.5+C),Z=C*gd;T.x=A*Math.cos(Z),T.y=A*Math.sin(Z)}(isNaN(T.vx)||isNaN(T.vy))&&(T.vx=T.vy=0)}}function I(C){return C.initialize&&C.initialize(e,p),C}return v(),i={tick:y,restart:function(){return _.restart(b),i},stop:function(){return _.stop(),i},nodes:function(C){return arguments.length?(e=C,v(),f.forEach(I),i):e},alpha:function(C){return arguments.length?(o=+C,i):o},alphaMin:function(C){return arguments.length?(s=+C,i):s},alphaDecay:function(C){return arguments.length?(a=+C,i):+a},alphaTarget:function(C){return arguments.length?(l=+C,i):l},velocityDecay:function(C){return arguments.length?(u=1-C,i):1-u},randomSource:function(C){return arguments.length?(p=C,f.forEach(I),i):p},force:function(C,N){return arguments.length>1?(N==null?f.delete(C):f.set(C,I(N)),i):f.get(C)},find:function(C,N,T){var A=0,Z=e.length,E,R,H,G,$;for(T==null?T=1/0:T*=T,A=0;A<Z;++A)G=e[A],E=C-G.x,R=N-G.y,H=E*E+R*R,H<T&&($=G,T=H);return $},on:function(C,N){return arguments.length>1?(m.on(C,N),i):m.on(C)}}}function lr(){var e,i,o,s,a=_t(-30),l,u=1,f=1/0,_=.81;function m(v){var I,C=e.length,N=ze(e,Fh,Uh).visitAfter(b);for(s=v,I=0;I<C;++I)i=e[I],N.visit(y)}function p(){if(e){var v,I=e.length,C;for(l=new Array(I),v=0;v<I;++v)C=e[v],l[C.index]=+a(C,v,e)}}function b(v){var I=0,C,N,T=0,A,Z,E;if(v.length){for(A=Z=E=0;E<4;++E)(C=v[E])&&(N=Math.abs(C.value))&&(I+=C.value,T+=N,A+=N*C.x,Z+=N*C.y);v.x=A/T,v.y=Z/T}else{C=v,C.x=C.data.x,C.y=C.data.y;do I+=l[C.data.index];while(C=C.next)}v.value=I}function y(v,I,C,N){if(!v.value)return!0;var T=v.x-i.x,A=v.y-i.y,Z=N-I,E=T*T+A*A;if(Z*Z/_<E)return E<f&&(T===0&&(T=Ht(o),E+=T*T),A===0&&(A=Ht(o),E+=A*A),E<u&&(E=Math.sqrt(u*E)),i.vx+=T*v.value*s/E,i.vy+=A*v.value*s/E),!0;if(v.length||E>=f)return;(v.data!==i||v.next)&&(T===0&&(T=Ht(o),E+=T*T),A===0&&(A=Ht(o),E+=A*A),E<u&&(E=Math.sqrt(u*E)));do v.data!==i&&(Z=l[v.data.index]*s/E,i.vx+=T*Z,i.vy+=A*Z);while(v=v.next)}return m.initialize=function(v,I){e=v,o=I,p()},m.strength=function(v){return arguments.length?(a=typeof v=="function"?v:_t(+v),p(),m):a},m.distanceMin=function(v){return arguments.length?(u=v*v,m):Math.sqrt(u)},m.distanceMax=function(v){return arguments.length?(f=v*v,m):Math.sqrt(f)},m.theta=function(v){return arguments.length?(_=v*v,m):Math.sqrt(_)},m}function ur(e){var i=_t(.1),o,s,a;typeof e!="function"&&(e=_t(e==null?0:+e));function l(f){for(var _=0,m=o.length,p;_<m;++_)p=o[_],p.vx+=(a[_]-p.x)*s[_]*f}function u(){if(o){var f,_=o.length;for(s=new Array(_),a=new Array(_),f=0;f<_;++f)s[f]=isNaN(a[f]=+e(o[f],f,o))?0:+i(o[f],f,o)}}return l.initialize=function(f){o=f,u()},l.strength=function(f){return arguments.length?(i=typeof f=="function"?f:_t(+f),u(),l):i},l.x=function(f){return arguments.length?(e=typeof f=="function"?f:_t(+f),u(),l):e},l}function cr(e){var i=_t(.1),o,s,a;typeof e!="function"&&(e=_t(e==null?0:+e));function l(f){for(var _=0,m=o.length,p;_<m;++_)p=o[_],p.vy+=(a[_]-p.y)*s[_]*f}function u(){if(o){var f,_=o.length;for(s=new Array(_),a=new Array(_),f=0;f<_;++f)s[f]=isNaN(a[f]=+e(o[f],f,o))?0:+i(o[f],f,o)}}return l.initialize=function(f){o=f,u()},l.strength=function(f){return arguments.length?(i=typeof f=="function"?f:_t(+f),u(),l):i},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:_t(+f),u(),l):e},l}var Zn=e=>e instanceof Date,Fn=e=>Array.isArray(e),Un=e=>e!==null&&typeof e=="object"&&e.constructor.name==="Object";var zt=e=>Zn(e)?vd(e):Fn(e)?yd(e):Un(e)?xd(e):e,Ri=(e,i)=>{let o=Zn(e),s=Zn(i);if(o&&!s||!o&&s)return!1;if(o&&s)return e.getTime()===i.getTime();let a=Fn(e),l=Fn(i);if(a&&!l||!a&&l)return!1;if(a&&l)return e.length!==i.length?!1:e.every((_,m)=>Ri(_,i[m]));let u=Un(e),f=Un(i);if(u&&!f||!u&&f)return!1;if(u&&f){let _=Object.keys(e),m=Object.keys(i);return Ri(_,m)?_.every(p=>Ri(e[p],i[p])):!1}return e===i},vd=e=>new Date(e),yd=e=>e.map(i=>zt(i)),xd=e=>{let i={};return Object.keys(e).forEach(o=>{i[o]=zt(e[o])}),i};var wd=100,Hh=30,vt;(function(e){e.TICK="tick",e.END="end",e.SIMULATION_START="simulation-start",e.SIMULATION_PROGRESS="simulation-progress",e.SIMULATION_END="simulation-end",e.NODE_DRAG="node-drag",e.SETTINGS_UPDATE="settings-update"})(vt||(vt={}));var bd=e=>(e>0?e:1)*wd,Pd={isPhysicsEnabled:!1,alpha:{alpha:1,alphaMin:.001,alphaDecay:.0228,alphaTarget:.1},centering:{x:0,y:0,strength:1},collision:{radius:15,strength:1,iterations:1},links:{distance:Hh,strength:void 0,iterations:1},manyBody:{strength:-100,theta:.9,distanceMin:0,distanceMax:bd(Hh)},positioning:{forceX:{x:0,strength:.1},forceY:{y:0,strength:.1}}},Hn=class extends Nt{constructor(i){super(),this._edges=[],this._nodes=[],this._nodeIndexByNodeId={},this._isDragging=!1,this._isStabilizing=!1,this.linkForce=ar(this._edges).id(o=>o.id),this.simulation=hr(this._nodes).force("link",this.linkForce).stop(),this.settings=Object.assign(zt(Pd),i),this.initSimulation(this.settings),this.simulation.on("tick",()=>{this.emit(vt.TICK,{nodes:this._nodes,edges:this._edges})}),this.simulation.on("end",()=>{this._isDragging=!1,this._isStabilizing=!1,this.emit(vt.END,{nodes:this._nodes,edges:this._edges})})}getSettings(){return zt(this.settings)}setSettings(i){let o=this.getSettings();Object.keys(i).forEach(s=>{this.settings[s]=i[s]}),!Ri(this.settings,o)&&(this.initSimulation(i),this.emit(vt.SETTINGS_UPDATE,{settings:this.settings}),this.runSimulation({isUpdatingSettings:!0}))}startDragNode(){this._isDragging=!0,!this._isStabilizing&&this.settings.isPhysicsEnabled&&this.activateSimulation()}dragNode(i){let o=this._nodes[this._nodeIndexByNodeId[i.id]];o&&(this._isDragging||this.startDragNode(),o.fx=i.x,o.fy=i.y,this.settings.isPhysicsEnabled||(o.x=i.x,o.y=i.y,this.emit(vt.NODE_DRAG,{nodes:this._nodes,edges:this._edges})))}endDragNode(i){this._isDragging=!1,this.simulation.alphaTarget(0);let o=this._nodes[this._nodeIndexByNodeId[i.id]];o&&this.settings.isPhysicsEnabled&&Wh(o)}activateSimulation(){this.settings.isPhysicsEnabled&&(this.simulation.alphaTarget(this.settings.alpha.alphaTarget).restart(),this.releaseNodes())}fixDefinedNodes(i){for(let o=0;o<i.nodes.length;o++)i.nodes[o].x!==null&&i.nodes[o].x!==void 0&&(i.nodes[o].fx=i.nodes[o].x),i.nodes[o].y!==null&&i.nodes[o].y!==void 0&&(i.nodes[o].fy=i.nodes[o].y);return i}addData(i){i=this.fixDefinedNodes(i),this._nodes.concat(i.nodes),this._edges.concat(i.edges),this.setNodeIndexByNodeId()}clearData(){this._nodes=[],this._edges=[],this.setNodeIndexByNodeId()}setData(i){i=this.fixDefinedNodes(i),this.clearData(),this.addData(i)}updateData(i){i=this.fixDefinedNodes(i);let o=new Set(i.nodes.map(l=>l.id)),s=this._nodes.filter(l=>o.has(l.id)),a=i.nodes.filter(l=>this._nodeIndexByNodeId[l.id]===void 0);this._nodes=[...s,...a],this.setNodeIndexByNodeId(),this._edges=i.edges,this.simulation.nodes(this._nodes),this.linkForce.links(this._edges)}simulate(){this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.runSimulation(),this.settings.isPhysicsEnabled||this.fixNodes()}startSimulation(i){this.setData(i),this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.runSimulation()}updateSimulation(i){let o=new Set(i.nodes.map(l=>l.id)),s=i.nodes.filter(l=>this._nodeIndexByNodeId[l.id]===void 0),a=this._nodes.filter(l=>o.has(l.id));if(this.settings.isPhysicsEnabled||a.forEach(l=>Gh(l)),this._nodes=[...a,...s],this.setNodeIndexByNodeId(),this._edges=i.edges,this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),!this.settings.isPhysicsEnabled&&!s.length){this.emit(vt.SIMULATION_END,{nodes:this._nodes,edges:this._edges});return}this.runSimulation({isUpdatingSettings:!0})}stopSimulation(){this.simulation.stop(),this._nodes=[],this._edges=[],this.setNodeIndexByNodeId(),this.simulation.nodes(),this.linkForce.links()}initSimulation(i){var o,s,a,l;if(i.alpha&&this.simulation.alpha(i.alpha.alpha).alphaMin(i.alpha.alphaMin).alphaDecay(i.alpha.alphaDecay).alphaTarget(i.alpha.alphaTarget),i.links&&this.linkForce.distance(i.links.distance).iterations(i.links.iterations),i.collision){let u=sr().radius(i.collision.radius).strength(i.collision.strength).iterations(i.collision.iterations);this.simulation.force("collide",u)}if(i.collision===null&&this.simulation.force("collide",null),i.manyBody){let u=lr().strength(i.manyBody.strength).theta(i.manyBody.theta).distanceMin(i.manyBody.distanceMin).distanceMax(i.manyBody.distanceMax);this.simulation.force("charge",u)}if(i.manyBody===null&&this.simulation.force("charge",null),!((o=i.positioning)===null||o===void 0)&&o.forceY){let u=ur(i.positioning.forceX.x).strength(i.positioning.forceX.strength);this.simulation.force("x",u)}if(((s=i.positioning)===null||s===void 0?void 0:s.forceX)===null&&this.simulation.force("x",null),!((a=i.positioning)===null||a===void 0)&&a.forceY){let u=cr(i.positioning.forceY.y).strength(i.positioning.forceY.strength);this.simulation.force("y",u)}if(((l=i.positioning)===null||l===void 0?void 0:l.forceY)===null&&this.simulation.force("y",null),i.centering){let u=or(i.centering.x,i.centering.y).strength(i.centering.strength);this.simulation.force("center",u)}i.centering===null&&this.simulation.force("center",null)}runSimulation(i){if(this._isStabilizing)return;(this.settings.isPhysicsEnabled||i!=null&&i.isUpdatingSettings)&&this.releaseNodes(),this.emit(vt.SIMULATION_START,void 0),this._isStabilizing=!0,this.simulation.alpha(this.settings.alpha.alpha).alphaTarget(this.settings.alpha.alphaTarget).stop();let o=Math.ceil(Math.log(this.settings.alpha.alphaMin)/Math.log(1-this.settings.alpha.alphaDecay)),s=-1;for(let a=0;a<o;a++){let l=Math.round(a*100/o);l>s&&(s=l,this.emit(vt.SIMULATION_PROGRESS,{nodes:this._nodes,edges:this._edges,progress:l/100})),this.simulation.tick()}this.settings.isPhysicsEnabled||this.fixNodes(),this._isStabilizing=!1,this.emit(vt.SIMULATION_END,{nodes:this._nodes,edges:this._edges})}setNodeIndexByNodeId(){this._nodeIndexByNodeId={};for(let i=0;i<this._nodes.length;i++)this._nodeIndexByNodeId[this._nodes[i].id]=i}fixNodes(i){i||(i=this._nodes);for(let o=0;o<i.length;o++)Gh(this._nodes[o])}releaseNodes(i){i||(i=this._nodes);for(let o=0;o<i.length;o++)Wh(this._nodes[o])}},Gh=e=>{e.fx=e.x,e.fy=e.y},Wh=e=>{e.fx=null,e.fy=null};var Gn=class extends Nt{constructor(){super(),this.simulator=new Hn,this.simulator.on(vt.SIMULATION_START,()=>{this.emit(ht.SIMULATION_START,void 0)}),this.simulator.on(vt.SIMULATION_PROGRESS,i=>{this.emit(ht.SIMULATION_PROGRESS,i)}),this.simulator.on(vt.SIMULATION_END,i=>{this.emit(ht.SIMULATION_END,i)}),this.simulator.on(vt.NODE_DRAG,i=>{this.emit(ht.NODE_DRAG_END,i)}),this.simulator.on(vt.TICK,i=>{this.emit(ht.NODE_DRAG,i)}),this.simulator.on(vt.END,i=>{this.emit(ht.NODE_DRAG_END,i)}),this.simulator.on(vt.SETTINGS_UPDATE,i=>{this.emit(ht.SETTINGS_UPDATE,i)})}setData(i,o){this.simulator.setData({nodes:i,edges:o})}addData(i,o){this.simulator.addData({nodes:i,edges:o})}updateData(i,o){this.simulator.updateData({nodes:i,edges:o})}clearData(){this.simulator.clearData()}simulate(){this.simulator.simulate()}activateSimulation(){this.simulator.activateSimulation()}startSimulation(i,o){this.simulator.startSimulation({nodes:i,edges:o})}updateSimulation(i,o){this.simulator.updateSimulation({nodes:i,edges:o})}stopSimulation(){this.simulator.stopSimulation()}startDragNode(){this.simulator.startDragNode()}dragNode(i,o){this.simulator.dragNode(Object.assign({id:i},o))}endDragNode(i){this.simulator.endDragNode({id:i})}fixNodes(i){this.simulator.fixNodes(i)}releaseNodes(i){this.simulator.releaseNodes(i)}setSettings(i){this.simulator.setSettings(i)}terminate(){this.simulator.removeAllListeners(),this.removeAllListeners()}};var yt;(function(e){e.SetData="Set Data",e.AddData="Add Data",e.UpdateData="Update Data",e.ClearData="Clear Data",e.Simulate="Simulate",e.ActivateSimulation="Activate Simulation",e.StartSimulation="Start Simulation",e.UpdateSimulation="Update Simulation",e.StopSimulation="Stop Simulation",e.StartDragNode="Start Drag Node",e.DragNode="Drag Node",e.EndDragNode="End Drag Node",e.FixNodes="Fix Nodes",e.ReleaseNodes="Release Nodes",e.SetSettings="Set Settings"})(yt||(yt={}));var oe;(function(e){e.SIMULATION_START="simulation-start",e.SIMULATION_PROGRESS="simulation-progress",e.SIMULATION_END="simulation-end",e.NODE_DRAG="node-drag",e.NODE_DRAG_END="node-drag-end",e.SETTINGS_UPDATE="settings-update"})(oe||(oe={}));var Sd={},Wn=class extends Nt{constructor(){super(),this.worker=new Worker(new URL("./process.worker",Sd.url),{type:"module"}),this.worker.onmessage=({data:i})=>{switch(i.type){case oe.SIMULATION_START:{this.emit(ht.SIMULATION_START,void 0);break}case oe.SIMULATION_PROGRESS:{this.emit(ht.SIMULATION_PROGRESS,i.data);break}case oe.SIMULATION_END:{this.emit(ht.SIMULATION_END,i.data);break}case oe.NODE_DRAG:{this.emit(ht.NODE_DRAG,i.data);break}case oe.NODE_DRAG_END:{this.emit(ht.NODE_DRAG_END,i.data);break}case oe.SETTINGS_UPDATE:{this.emit(ht.SETTINGS_UPDATE,i.data);break}}}}setData(i,o){this.emitToWorker({type:yt.SetData,data:{nodes:i,edges:o}})}addData(i,o){this.emitToWorker({type:yt.AddData,data:{nodes:i,edges:o}})}updateData(i,o){this.emitToWorker({type:yt.UpdateData,data:{nodes:i,edges:o}})}clearData(){this.emitToWorker({type:yt.ClearData})}simulate(){this.emitToWorker({type:yt.Simulate})}activateSimulation(){this.emitToWorker({type:yt.ActivateSimulation})}startSimulation(i,o){this.emitToWorker({type:yt.StartSimulation,data:{nodes:i,edges:o}})}updateSimulation(i,o){this.emitToWorker({type:yt.UpdateSimulation,data:{nodes:i,edges:o}})}stopSimulation(){this.emitToWorker({type:yt.StopSimulation})}startDragNode(){this.emitToWorker({type:yt.StartDragNode})}dragNode(i,o){this.emitToWorker({type:yt.DragNode,data:Object.assign({id:i},o)})}endDragNode(i){this.emitToWorker({type:yt.EndDragNode,data:{id:i}})}fixNodes(i){this.emitToWorker({type:yt.FixNodes,data:{nodes:i}})}releaseNodes(i){this.emitToWorker({type:yt.ReleaseNodes,data:{nodes:i}})}setSettings(i){this.emitToWorker({type:yt.SetSettings,data:i})}terminate(){this.worker.terminate(),this.removeAllListeners()}emitToWorker(i){this.worker.postMessage(i)}};var Zi=class{static getSimulator(){try{if(typeof Worker!="undefined")return new Wn;throw new Error("WebWorkers are unavailable in your environment.")}catch(i){return console.error("Could not create simulator in a WebWorker context. All calculations will be done in the main thread.",i),new Gn}}};var ot;(function(e){e.RENDER_START="render-start",e.RENDER_END="render-end",e.SIMULATION_START="simulation-start",e.SIMULATION_STEP="simulation-step",e.SIMULATION_END="simulation-end",e.NODE_CLICK="node-click",e.NODE_HOVER="node-hover",e.EDGE_CLICK="edge-click",e.EDGE_HOVER="edge-hover",e.MOUSE_CLICK="mouse-click",e.MOUSE_MOVE="mouse-move",e.TRANSFORM="transform",e.NODE_DRAG_START="node-drag-start",e.NODE_DRAG="node-drag",e.NODE_DRAG_END="node-drag-end",e.NODE_RIGHT_CLICK="node-right-click",e.EDGE_RIGHT_CLICK="edge-right-click",e.MOUSE_RIGHT_CLICK="mouse-right-click",e.NODE_DOUBLE_CLICK="node-double-click",e.EDGE_DOUBLE_CLICK="edge-double-click",e.MOUSE_DOUBLE_CLICK="mouse-double-click"})(ot||(ot={}));var Vn=class extends Nt{};var $e;(function(e){e.CANVAS="canvas",e.WEBGL="webgl"})($e||($e={}));var re;(function(e){e.RENDER_START="render-start",e.RENDER_END="render-end"})(re||(re={}));var qn={fps:60,minZoom:.25,maxZoom:8,fitZoomMargin:.2,labelsIsEnabled:!0,labelsOnEventIsEnabled:!0,shadowIsEnabled:!0,shadowOnEventIsEnabled:!0,contextAlphaOnEvent:.3,contextAlphaOnEventIsEnabled:!0,backgroundColor:null},jn=640,Kn=480;var Vh="Roboto, sans-serif";var Ed="#000000";var _e;(function(e){e.TOP="top",e.MIDDLE="middle"})(_e||(_e={}));var Je=class{constructor(i,o){var s,a;this.textLines=[],this.fontSize=4,this.fontFamily=qh(4,Vh),this.text=`${i===void 0?"":i}`,this.textLines=Cd(this.text),this.position=o.position,this.properties=o.properties,this.textBaseline=o.textBaseline,(this.properties.fontSize!==void 0||this.properties.fontFamily)&&(this.fontSize=Math.max((s=this.properties.fontSize)!==null&&s!==void 0?s:0,0),this.fontFamily=qh(this.fontSize,(a=this.properties.fontFamily)!==null&&a!==void 0?a:Vh)),this._fixPosition()}_fixPosition(){if(this.textBaseline===_e.MIDDLE&&this.textLines.length){let i=Math.floor(this.textLines.length/2),o=(this.textLines.length-1)/2;this.position.y-=o*this.fontSize-i*(1.2-1)}}},Xn=(e,i)=>{!(i.textLines.length>0&&i.fontSize>0)||!i.position||(Td(e,i),Ld(e,i))},Td=(e,i)=>{if(!i.properties.fontBackgroundColor||!i.position)return;e.fillStyle=i.properties.fontBackgroundColor.toString();let o=i.fontSize*.12,s=i.fontSize+2*o,a=i.fontSize*1.2,l=i.textBaseline===_e.MIDDLE?i.fontSize/2:0;for(let u=0;u<i.textLines.length;u++){let f=i.textLines[u],_=e.measureText(f).width+2*o;e.fillRect(i.position.x-_/2,i.position.y-l-o+u*a,_,s)}},Ld=(e,i)=>{var o;if(!i.position)return;e.fillStyle=((o=i.properties.fontColor)!==null&&o!==void 0?o:Ed).toString(),e.font=i.fontFamily,e.textBaseline=i.textBaseline,e.textAlign="center";let s=i.fontSize*1.2;for(let a=0;a<i.textLines.length;a++){let l=i.textLines[a];e.fillText(l,i.position.x,i.position.y+a*s)}},qh=(e,i)=>`${e}px ${i}`,Cd=e=>{let i=e.split(`
`),o=[];for(let s=0;s<i.length;s++){let a=i[s].trim();o.push(a)}return o};var jh=(e,i)=>{let o=i.startNode.getCenter(),s=i.endNode.getCenter();if(!o||!s)return;let a=i.getCurvedControlPoint();e.beginPath(),e.moveTo(o.x,o.y),e.quadraticCurveTo(a.x,a.y,s.x,s.y),e.stroke()},Kh=e=>{var i,o;let s=(i=e.style.arrowSize)!==null&&i!==void 0?i:1,a=(o=e.getWidth())!==null&&o!==void 0?o:1,l=-.1,u=e.endNode,f=e.getCurvedControlPoint(),_=Nd(e,u),m=Xh(e,Math.max(0,Math.min(1,_.t+l)),f),p=Math.atan2(_.y-m.y,_.x-m.x),b=1.5*s+3*a,y=_.x-b*.9*Math.cos(p),v=_.y-b*.9*Math.sin(p);return{point:_,core:{x:y,y:v},angle:p,length:b}},Xh=(e,i,o)=>{let s=e.startNode.getCenter(),a=e.endNode.getCenter();if(!s||!a)return{x:0,y:0};let l=i,u=Math.pow(1-l,2)*s.x+2*l*(1-l)*o.x+Math.pow(l,2)*a.x,f=Math.pow(1-l,2)*s.y+2*l*(1-l)*o.y+Math.pow(l,2)*a.y;return{x:u,y:f}},Nd=(e,i)=>{let s=0,a=0,l=1,u={x:0,y:0,t:0},f,_,m,p=.2,b=e.getCurvedControlPoint(),y=e.endNode,v=!1;i.id===e.startNode.id&&(y=e.startNode,v=!0);let I=y.getCenter(),C;for(;a<=l&&s<10&&(C=(a+l)*.5,u=Object.assign(Object.assign({},Xh(e,C,b)),{t:0}),f=y.getDistanceToBorder(),_=Math.sqrt(Math.pow(u.x-I.x,2)+Math.pow(u.y-I.y,2)),m=f-_,!(Math.abs(m)<p));)m<0?v===!1?a=C:l=C:v===!1?l=C:a=C,s++;return u.t=C!=null?C:0,u};var Yh=(e,i)=>{let{x:o,y:s,radius:a}=i.getCircularData();e.beginPath(),e.arc(o,s,a,0,2*Math.PI,!1),e.closePath(),e.stroke()},$h=e=>{var i,o;let s=(i=e.style.arrowSize)!==null&&i!==void 0?i:1,a=(o=e.getWidth())!==null&&o!==void 0?o:1,l=e.startNode,u=Id(e,l),f=u.t*-2*Math.PI+.45*Math.PI,_=1.5*s+3*a,m=u.x-_*.9*Math.cos(f),p=u.y-_*.9*Math.sin(f);return{point:u,core:{x:m,y:p},angle:f,length:_}},Md=(e,i)=>{let o=i*2*Math.PI;return{x:e.x+e.radius*Math.cos(o),y:e.y-e.radius*Math.sin(o)}},Id=(e,i)=>{let o=e.getCircularData(),s={low:.6,high:1,direction:1},a=s.low,l=s.high,u=s.direction,f=10,_=0,m={x:0,y:0,t:0},p,b,y,v=.05,I=(a+l)*.5,C=i.getCenter();for(;a<=l&&_<f&&(I=(a+l)*.5,m=Object.assign(Object.assign({},Md(o,I)),{t:0}),p=i.getDistanceToBorder(),b=Math.sqrt(Math.pow(m.x-C.x,2)+Math.pow(m.y-C.y,2)),y=p-b,!(Math.abs(y)<v));)y>0?u>0?a=I:l=I:u>0?l=I:a=I,_++;return m.t=I!=null?I:0,m};var Jh=(e,i)=>{let o=i.startNode.getCenter(),s=i.endNode.getCenter();!o||!s||(e.beginPath(),e.moveTo(o.x,o.y),e.lineTo(s.x,s.y),e.stroke())},Qh=e=>{var i,o;let s=(i=e.style.arrowSize)!==null&&i!==void 0?i:1,a=(o=e.getWidth())!==null&&o!==void 0?o:1,l=e.startNode.getCenter(),u=e.endNode.getCenter(),f=Math.atan2(u.y-l.y,u.x-l.x),_=Od(e,e.endNode),m=1.5*s+3*a,p=_.x-m*.9*Math.cos(f),b=_.y-m*.9*Math.sin(f);return{point:_,core:{x:p,y:b},angle:f,length:m}},Od=(e,i)=>{let o=e.endNode,s=e.startNode;i.id===e.startNode.id&&(o=e.startNode,s=e.endNode);let a=o.getCenter(),l=s.getCenter(),u=a.x-l.x,f=a.y-l.y,_=Math.sqrt(u*u+f*f),m=i.getDistanceToBorder(),p=(_-m)/_;return{x:(1-p)*l.x+p*a.x,y:(1-p)*l.y+p*a.y,t:0}};var Ad=!0,Dd=!0,fr=(e,i,o)=>{var s,a;if(!i.getWidth())return;let l=(s=o==null?void 0:o.isShadowEnabled)!==null&&s!==void 0?s:Ad,u=(a=o==null?void 0:o.isLabelEnabled)!==null&&a!==void 0?a:Dd,f=i.hasShadow();Zd(e,i),l&&f&&Fd(e,i),Bd(e,i),kd(e,i),l&&f&&Ud(e,i),u&&zd(e,i)},zd=(e,i)=>{let o=i.getLabel();if(!o)return;let s=new Je(o,{position:i.getCenter(),textBaseline:_e.MIDDLE,properties:{fontBackgroundColor:i.style.fontBackgroundColor,fontColor:i.style.fontColor,fontFamily:i.style.fontFamily,fontSize:i.style.fontSize}});Xn(e,s)},kd=(e,i)=>{if(i instanceof le)return Jh(e,i);if(i instanceof Te)return jh(e,i);if(i instanceof Le)return Yh(e,i);throw new Error("Failed to draw unsupported edge type")},Bd=(e,i)=>{if(i.style.arrowSize===0)return;let o=Rd(i),a=Hd([{x:0,y:0},{x:-1,y:.4},{x:-1,y:-.4}],o);e.beginPath();for(let l=0;l<a.length;l++){let u=a[l];if(l===0){e.moveTo(u.x,u.y);continue}e.lineTo(u.x,u.y)}e.closePath(),e.fill()},Rd=e=>{if(e instanceof le)return Qh(e);if(e instanceof Te)return Kh(e);if(e instanceof Le)return $h(e);throw new Error("Failed to draw unsupported edge type")},Zd=(e,i)=>{let o=i.getWidth();o>0&&(e.lineWidth=o);let s=i.getColor();s&&(e.strokeStyle=s.toString(),e.fillStyle=s.toString())},Fd=(e,i)=>{i.style.shadowColor&&(e.shadowColor=i.style.shadowColor.toString()),i.style.shadowSize&&(e.shadowBlur=i.style.shadowSize),i.style.shadowOffsetX&&(e.shadowOffsetX=i.style.shadowOffsetX),i.style.shadowOffsetY&&(e.shadowOffsetY=i.style.shadowOffsetY)},Ud=(e,i)=>{i.style.shadowColor&&(e.shadowColor="rgba(0,0,0,0)"),i.style.shadowSize&&(e.shadowBlur=0),i.style.shadowOffsetX&&(e.shadowOffsetX=0),i.style.shadowOffsetY&&(e.shadowOffsetY=0)},Hd=(e,i)=>{let o=i.point.x,s=i.point.y,a=i.angle,l=i.length;for(let u=0;u<e.length;u++){let f=e[u],_=f.x*Math.cos(a)-f.y*Math.sin(a),m=f.x*Math.sin(a)+f.y*Math.cos(a);f.x=o+l*_,f.y=s+l*m}return e};var tl=(e,i,o,s)=>{e.beginPath(),e.arc(i,o,s,0,2*Math.PI,!1),e.closePath()},el=(e,i,o,s)=>{e.beginPath(),e.rect(i-s,o-s,s*2,s*2),e.closePath()},il=(e,i,o,s)=>{e.beginPath(),s*=1.15,o+=.275*s;let a=s*2,l=Math.sqrt(3)*a/6,u=Math.sqrt(a*a-s*s);e.moveTo(i,o-(u-l)),e.lineTo(i+s,o+l),e.lineTo(i-s,o+l),e.lineTo(i,o-(u-l)),e.closePath()},nl=(e,i,o,s)=>{e.beginPath(),s*=1.15,o-=.275*s;let a=s*2,l=Math.sqrt(3)*a/6,u=Math.sqrt(a*a-s*s);e.moveTo(i,o+(u-l)),e.lineTo(i+s,o-l),e.lineTo(i-s,o-l),e.lineTo(i,o+(u-l)),e.closePath()},ol=(e,i,o,s)=>{e.beginPath(),s*=.82,o+=.1*s;for(let a=0;a<10;a++){let l=s*(a%2===0?1.3:.5),u=i+l*Math.sin(a*2*Math.PI/10),f=o-l*Math.cos(a*2*Math.PI/10);e.lineTo(u,f)}e.closePath()},rl=(e,i,o,s)=>{e.beginPath(),e.lineTo(i,o+s),e.lineTo(i+s,o),e.lineTo(i,o-s),e.lineTo(i-s,o),e.closePath()};var sl=(e,i,o,s)=>{Gd(e,i,o,s,6)},Gd=(e,i,o,s,a)=>{e.beginPath(),e.moveTo(i+s,o);let l=Math.PI*2/a;for(let u=1;u<a;u++)e.lineTo(i+s*Math.cos(l*u),o+s*Math.sin(l*u));e.closePath()};var Wd=.2,Vd=!0,qd=!0,al=(e,i,o)=>{var s,a;let l=(s=o==null?void 0:o.isShadowEnabled)!==null&&s!==void 0?s:Vd,u=(a=o==null?void 0:o.isLabelEnabled)!==null&&a!==void 0?a:qd,f=i.hasShadow();Yd(e,i),l&&f&&$d(e,i),jd(e,i),e.fill();let _=i.getBackgroundImage();_&&Xd(e,i,_),l&&f&&Jd(e,i),i.hasBorder()&&e.stroke(),u&&Kd(e,i)},jd=(e,i)=>{let o=i.getCenter(),s=i.getRadius();switch(i.style.shape){case Rt.SQUARE:{el(e,o.x,o.y,s);break}case Rt.DIAMOND:{rl(e,o.x,o.y,s);break}case Rt.TRIANGLE:{il(e,o.x,o.y,s);break}case Rt.TRIANGLE_DOWN:{nl(e,o.x,o.y,s);break}case Rt.STAR:{ol(e,o.x,o.y,s);break}case Rt.HEXAGON:{sl(e,o.x,o.y,s);break}default:{tl(e,o.x,o.y,s);break}}},Kd=(e,i)=>{let o=i.getLabel();if(!o)return;let s=i.getCenter(),a=i.getBorderedRadius()*(1+Wd),l=new Je(o,{position:{x:s.x,y:s.y+a},textBaseline:_e.TOP,properties:{fontBackgroundColor:i.style.fontBackgroundColor,fontColor:i.style.fontColor,fontFamily:i.style.fontFamily,fontSize:i.style.fontSize}});Xn(e,l)},Xd=(e,i,o)=>{if(!o.width||!o.height)return;let s=i.getCenter(),a=i.getRadius(),l=Math.max(a*2/o.width,a*2/o.height),u=o.height*l,f=o.width*l;e.save(),e.clip(),e.drawImage(o,s.x-f/2,s.y-u/2,f,u),e.restore()},Yd=(e,i)=>{if(i.hasBorder()){e.lineWidth=i.getBorderWidth();let a=i.getBorderColor();a&&(e.strokeStyle=a.toString())}let s=i.getColor();s&&(e.fillStyle=s.toString())},$d=(e,i)=>{i.style.shadowColor&&(e.shadowColor=i.style.shadowColor.toString()),i.style.shadowSize&&(e.shadowBlur=i.style.shadowSize),i.style.shadowOffsetX&&(e.shadowOffsetX=i.style.shadowOffsetX),i.style.shadowOffsetY&&(e.shadowOffsetY=i.style.shadowOffsetY)},Jd=(e,i)=>{i.style.shadowColor&&(e.shadowColor="rgba(0,0,0,0)"),i.style.shadowSize&&(e.shadowBlur=0),i.style.shadowOffsetX&&(e.shadowOffsetX=0),i.style.shadowOffsetY&&(e.shadowOffsetY=0)};var dr=(e,i=300)=>{let o=!1,s,a=Date.now();return function(){let l=arguments,u=Date.now();if(!o){e(...l),a=u,o=!0;return}clearTimeout(s);let f=Math.max(i-(u-a),0);s=setTimeout(()=>{u-a>=i&&(e(...l),a=u)},f)}};var _r=e=>{let i=Math.max(e,1);return Math.round(1e3/i)};var Yn=!1,Qd="#FF5733",t_="#3CFF33",e_="#3383FF",i_="#F333FF",$n=class extends Nt{constructor(i,o){super(),this._isOriginCentered=!1,this._isInitiallyRendered=!1,this._context=i,this.width=jn,this.height=Kn,this.transform=Ut,this._settings=Object.assign(Object.assign({},qn),o),this._throttleRender=dr(s=>{this._render(s)},_r(this._settings.fps))}get isInitiallyRendered(){return this._isInitiallyRendered}getSettings(){return zt(this._settings)}setSettings(i){let o=i.fps&&i.fps!==this._settings.fps;this._settings=Object.assign(Object.assign({},this._settings),i),o&&(this._throttleRender=dr(s=>{this._render(s)},_r(this._settings.fps)))}render(i){this._throttleRender(i)}_render(i){if(!i.getNodeCount())return;this.emit(re.RENDER_START,void 0);let o=Date.now();this._context.clearRect(0,0,this.width,this.height),this._settings.backgroundColor&&(this._context.fillStyle=this._settings.backgroundColor.toString(),this._context.fillRect(0,0,this.width,this.height)),this._context.save(),Yn&&(this._context.lineWidth=3,this._context.fillStyle=Qd,this._context.fillRect(0,0,this.width,this.height)),this._context.translate(this.transform.x,this.transform.y),Yn&&(this._context.fillStyle=e_,this._context.fillRect(0,0,this.width,this.height)),this._context.scale(this.transform.k,this.transform.k),Yn&&(this._context.fillStyle=t_,this._context.fillRect(0,0,this.width,this.height)),this._isOriginCentered&&this._context.translate(this.width/2,this.height/2),Yn&&(this._context.fillStyle=i_,this._context.fillRect(0,0,this.width,this.height)),this.drawObjects(i.getEdges()),this.drawObjects(i.getNodes()),this._context.restore(),this.emit(re.RENDER_END,{durationMs:Date.now()-o}),this._isInitiallyRendered=!0}drawObjects(i){if(i.length===0)return;let o=[],s=[];for(let l=0;l<i.length;l++){let u=i[l];u.isSelected()&&o.push(u),u.isHovered()&&s.push(u)}let a=o.length||s.length;this._settings.contextAlphaOnEventIsEnabled&&a&&(this._context.globalAlpha=this._settings.contextAlphaOnEvent);for(let l=0;l<i.length;l++){let u=i[l];!u.isSelected()&&!u.isHovered()&&this.drawObject(u,{isLabelEnabled:this._settings.labelsIsEnabled,isShadowEnabled:this._settings.shadowIsEnabled})}this._settings.contextAlphaOnEventIsEnabled&&a&&(this._context.globalAlpha=1);for(let l=0;l<o.length;l++)this.drawObject(o[l],{isLabelEnabled:this._settings.labelsOnEventIsEnabled,isShadowEnabled:this._settings.shadowOnEventIsEnabled});for(let l=0;l<s.length;l++)this.drawObject(s[l],{isLabelEnabled:this._settings.labelsOnEventIsEnabled,isShadowEnabled:this._settings.shadowOnEventIsEnabled})}drawObject(i,o){Qt(i)?al(this._context,i,o):fr(this._context,i,o)}reset(){this.transform=Ut,this._context.clearRect(0,0,this.width,this.height),this._context.save()}getFitZoomTransform(i){let o=i.getBoundingBox(),s=o.x+o.width/2,a=o.y+o.height/2,l=this.getSimulationViewRectangle(),u=l.height/(o.height*(1+this._settings.fitZoomMargin)),f=l.width/(o.width*(1+this._settings.fitZoomMargin)),_=Math.min(u,f),m=this.transform.k,p=Math.max(Math.min(_*m,this._settings.maxZoom),this._settings.minZoom),b=l.width/2*m*(1-p)-s*p,y=l.height/2*m*(1-p)-a*p;return Ut.translate(b,y).scale(p)}getSimulationPosition(i){let[o,s]=this.transform.invert([i.x,i.y]);return{x:o-this.width/2,y:s-this.height/2}}getSimulationViewRectangle(){let i=this.getSimulationPosition({x:0,y:0}),o=this.getSimulationPosition({x:this.width,y:this.height});return{x:i.x,y:i.y,width:o.x-i.x,height:o.y-i.y}}translateOriginToCenter(){this._isOriginCentered=!0}};var Jn=class extends Nt{constructor(i,o){super(),this._context=i,console.log("context",this._context),this.width=jn,this.height=Kn,this.transform=Ut,this._settings=Object.assign(Object.assign({},qn),o)}get isInitiallyRendered(){throw new Error("Method not implemented.")}getSettings(){return zt(this._settings)}setSettings(i){this._settings=Object.assign(Object.assign({},this._settings),i)}render(i){throw console.log("graph:",i),new Error("Method not implemented.")}reset(){throw new Error("Method not implemented.")}getFitZoomTransform(i){throw console.log("graph:",i),new Error("Method not implemented.")}getSimulationPosition(i){throw console.log("canvasPoint:",i),new Error("Method not implemented.")}getSimulationViewRectangle(){throw new Error("Method not implemented.")}translateOriginToCenter(){throw new Error("Method not implemented.")}};var Qe=class extends Error{constructor(i){super(i),this.message=i,Object.setPrototypeOf(this,new.target.prototype),this.name=this.constructor.name}};var Fi=class{static getRenderer(i,o=$e.CANVAS,s){if(o===$e.WEBGL){let l=i.getContext("webgl2");if(!l)throw new Qe("Failed to create WebGL context.");return new Jn(l,s)}let a=i.getContext("2d");if(!a)throw new Qe("Failed to create Canvas context.");return new $n(a,s)}};var mr=(e,i=!1)=>{e.style.position="relative";let o=getComputedStyle(e);o.display||(e.style.display="block",console.warn("[Orb] Graph container doesn't have defined 'display' property. Setting 'display' to 'block'...")),!i&&Qn(o.width)&&(e.style.width="100%",Qn(getComputedStyle(e).width)?(e.style.width="400px",console.warn("[Orb] The graph container element and its parent don't have defined width properties.","If you are using percentage values,","please make sure that the parent element of the graph container has a defined position and width.","Setting the width of the graph container to an arbitrary value of '400px'...")):console.warn("[Orb] The graph container element doesn't have defined width. Setting width to 100%...")),!i&&Qn(o.height)&&(e.style.height="100%",Qn(getComputedStyle(e).height)?(e.style.height="400px",console.warn("[Orb] The graph container element and its parent don't have defined height properties.","If you are using percentage values,","please make sure that the parent element of the graph container has a defined position and height.","Setting the height of the graph container to an arbitrary value of '400px'...")):console.warn("[Orb] Graph container doesn't have defined height. Setting height to 100%..."))},n_=/^\s*0+\s*(?:px|rem|em|vh|vw)?\s*$/i,Qn=e=>e==null||e===""?!0:n_.test(e);var ti=class{constructor(i,o){var s;this._isSimulating=!1,this._simulationStartedAt=Date.now(),this.dragSubject=a=>{var l;let u=this.getCanvasMousePosition(a.sourceEvent),f=(l=this._renderer)===null||l===void 0?void 0:l.getSimulationPosition(u);return this._graph.getNearestNode(f)},this.dragStarted=a=>{let l=this.getCanvasMousePosition(a.sourceEvent),u=this._renderer.getSimulationPosition(l);this._events.emit(ot.NODE_DRAG_START,{node:a.subject,event:a.sourceEvent,localPoint:u,globalPoint:l}),this._dragStartPosition=l},this.dragged=a=>{let l=this.getCanvasMousePosition(a.sourceEvent),u=this._renderer.getSimulationPosition(l);ln(this._dragStartPosition,l)||(this._dragStartPosition=void 0),this._simulator.dragNode(a.subject.id,u),this._events.emit(ot.NODE_DRAG,{node:a.subject,event:a.sourceEvent,localPoint:u,globalPoint:l})},this.dragEnded=a=>{let l=this.getCanvasMousePosition(a.sourceEvent),u=this._renderer.getSimulationPosition(l);ln(this._dragStartPosition,l)||this._simulator.endDragNode(a.subject.id),this._events.emit(ot.NODE_DRAG_END,{node:a.subject,event:a.sourceEvent,localPoint:u,globalPoint:l})},this.zoomed=a=>{this._renderer.transform=a.transform,setTimeout(()=>{this._renderer.render(this._graph),this._events.emit(ot.TRANSFORM,{transform:a.transform})},1)},this.mouseMoved=a=>{let l=this.getCanvasMousePosition(a),u=this._renderer.getSimulationPosition(l);if(this._strategy.onMouseMove){let f=this._strategy.onMouseMove(this._graph,u),_=f.changedSubject;_&&f.isStateChanged&&(Qt(_)&&this._events.emit(ot.NODE_HOVER,{node:_,event:a,localPoint:u,globalPoint:l}),Ce(_)&&this._events.emit(ot.EDGE_HOVER,{edge:_,event:a,localPoint:u,globalPoint:l})),this._events.emit(ot.MOUSE_MOVE,{subject:_,event:a,localPoint:u,globalPoint:l}),f.isStateChanged&&this._renderer.render(this._graph)}},this.mouseClicked=a=>{let l=this.getCanvasMousePosition(a),u=this._renderer.getSimulationPosition(l);if(this._strategy.onMouseClick){let f=this._strategy.onMouseClick(this._graph,u),_=f.changedSubject;_&&(Qt(_)&&this._events.emit(ot.NODE_CLICK,{node:_,event:a,localPoint:u,globalPoint:l}),Ce(_)&&this._events.emit(ot.EDGE_CLICK,{edge:_,event:a,localPoint:u,globalPoint:l})),this._events.emit(ot.MOUSE_CLICK,{subject:_,event:a,localPoint:u,globalPoint:l}),(f.isStateChanged||f.changedSubject)&&this._renderer.render(this._graph)}},this.mouseRightClicked=a=>{let l=this.getCanvasMousePosition(a),u=this._renderer.getSimulationPosition(l);if(this._strategy.onMouseRightClick){let f=this._strategy.onMouseRightClick(this._graph,u),_=f.changedSubject;_&&(Qt(_)&&this._events.emit(ot.NODE_RIGHT_CLICK,{node:_,event:a,localPoint:u,globalPoint:l}),Ce(_)&&this._events.emit(ot.EDGE_RIGHT_CLICK,{edge:_,event:a,localPoint:u,globalPoint:l})),this._events.emit(ot.MOUSE_RIGHT_CLICK,{subject:_,event:a,localPoint:u,globalPoint:l}),(f.isStateChanged||f.changedSubject)&&this._renderer.render(this._graph)}},this.mouseDoubleClicked=a=>{let l=this.getCanvasMousePosition(a),u=this._renderer.getSimulationPosition(l);if(this._strategy.onMouseDoubleClick){let f=this._strategy.onMouseDoubleClick(this._graph,u),_=f.changedSubject;_&&(Qt(_)&&this._events.emit(ot.NODE_DOUBLE_CLICK,{node:_,event:a,localPoint:u,globalPoint:l}),Ce(_)&&this._events.emit(ot.EDGE_DOUBLE_CLICK,{edge:_,event:a,localPoint:u,globalPoint:l})),this._events.emit(ot.MOUSE_DOUBLE_CLICK,{subject:_,event:a,localPoint:u,globalPoint:l}),(f.isStateChanged||f.changedSubject)&&this._renderer.render(this._graph)}},this._container=i.container,this._graph=i.graph,this._events=i.events,this._strategy=i.strategy,this._settings=Object.assign(Object.assign({getPosition:o==null?void 0:o.getPosition,zoomFitTransitionMs:200,isOutOfBoundsDragEnabled:!1,areCoordinatesRounded:!0,isSimulationAnimated:!0,areCollapsedContainerDimensionsAllowed:!1},o),{simulation:Object.assign({isPhysicsEnabled:!1},o==null?void 0:o.simulation),render:Object.assign({},o==null?void 0:o.render)}),mr(this._container,this._settings.areCollapsedContainerDimensionsAllowed),this._canvas=this._initCanvas();try{this._renderer=Fi.getRenderer(this._canvas,(s=o==null?void 0:o.render)===null||s===void 0?void 0:s.type,this._settings.render)}catch(a){throw this._container.textContent=a.message,a}this._renderer.on(re.RENDER_START,()=>{this._events.emit(ot.RENDER_START,void 0)}),this._renderer.on(re.RENDER_END,a=>{this._events.emit(ot.RENDER_END,a)}),this._renderer.translateOriginToCenter(),this._settings.render=this._renderer.getSettings(),this._resizeObs=new ResizeObserver(()=>this._handleResize()),this._resizeObs.observe(this._container),this._handleResize(),this._d3Zoom=nr().scaleExtent([this._renderer.getSettings().minZoom,this._renderer.getSettings().maxZoom]).on("zoom",this.zoomed),Pt(this._canvas).call(Uo().container(this._canvas).subject(this.dragSubject).on("start",this.dragStarted).on("drag",this.dragged).on("end",this.dragEnded)).call(this._d3Zoom).on("click",this.mouseClicked).on("mousemove",this.mouseMoved).on("contextmenu",this.mouseRightClicked).on("dblclick.zoom",this.mouseDoubleClicked),this._simulator=Zi.getSimulator(),this._simulator.on(ht.SIMULATION_START,()=>{this._isSimulating=!0,this._simulationStartedAt=Date.now(),this._events.emit(ot.SIMULATION_START,void 0)}),this._simulator.on(ht.SIMULATION_PROGRESS,a=>{this._graph.setNodePositions(a.nodes),this._events.emit(ot.SIMULATION_STEP,{progress:a.progress}),this._settings.isSimulationAnimated&&this._renderer.render(this._graph)}),this._simulator.on(ht.SIMULATION_END,a=>{var l;this._graph.setNodePositions(a.nodes),this._renderer.render(this._graph),this._isSimulating=!1,(l=this._onSimulationEnd)===null||l===void 0||l.call(this),this._onSimulationEnd=void 0,this._events.emit(ot.SIMULATION_END,{durationMs:Date.now()-this._simulationStartedAt})}),this._simulator.on(ht.NODE_DRAG,a=>{this._graph.setNodePositions(a.nodes),this._renderer.render(this._graph)}),this._simulator.on(ht.SETTINGS_UPDATE,a=>{this._settings.simulation=a.settings}),this._simulator.setSettings(this._settings.simulation)}isInitiallyRendered(){return this._renderer.isInitiallyRendered}getSettings(){return zt(this._settings)}setSettings(i){i.getPosition&&(this._settings.getPosition=i.getPosition),i.simulation&&(this._settings.simulation=Object.assign(Object.assign({},this._settings.simulation),i.simulation),this._simulator.setSettings(this._settings.simulation)),i.render&&(this._renderer.setSettings(i.render),this._settings.render=this._renderer.getSettings())}render(i){if(this._isSimulating){this._renderer.render(this._graph),i==null||i();return}if(this._settings.getPosition){let o=this._graph.getNodes();for(let s=0;s<o.length;s++){let a=this._settings.getPosition(o[s]);a&&(o[s].position=Object.assign({id:o[s].id},a))}}this._isSimulating=!0,this._onSimulationEnd=i,this._startSimulation()}recenter(i){let o=this._renderer.getFitZoomTransform(this._graph);Pt(this._canvas).transition().duration(this._settings.zoomFitTransitionMs).ease(Ho).call(this._d3Zoom.transform,o).call(()=>{this._renderer.render(this._graph),i==null||i()})}destroy(){this._resizeObs.unobserve(this._container),this._renderer.removeAllListeners(),this._simulator.terminate(),this._canvas.outerHTML=""}getCanvasMousePosition(i){var o,s,a,l;let u=this._canvas.getBoundingClientRect(),f=(s=(o=i.clientX)!==null&&o!==void 0?o:i.pageX)!==null&&s!==void 0?s:i.x,_=(l=(a=i.clientY)!==null&&a!==void 0?a:i.pageY)!==null&&l!==void 0?l:i.y;return f=f-u.left,_=_-u.top,this._settings.areCoordinatesRounded&&(f=Math.floor(f),_=Math.floor(_)),this._settings.isOutOfBoundsDragEnabled||(f=Math.max(0,Math.min(this._renderer.width,f)),_=Math.max(0,Math.min(this._renderer.height,_))),{x:f,y:_}}_initCanvas(){let i=document.createElement("canvas");return i.style.position="absolute",i.style.top="0",i.style.left="0",this._container.appendChild(i),i}_handleResize(){let i=this._container.getBoundingClientRect();this._canvas.width=i.width,this._canvas.height=i.height,this._renderer.width=i.width,this._renderer.height=i.height,this._renderer.isInitiallyRendered&&this._renderer.render(this._graph)}_startSimulation(){let i=this._graph.getNodePositions(),o=this._graph.getEdgePositions();this._simulator.updateData(i,o),this._simulator.simulate()}fixNodes(){this._simulator.fixNodes()}releaseNodes(){this._simulator.releaseNodes()}};var eo=Wu(ll());var o_='<a href="https://leafletjs.com/" target="_blank" >Leaflet</a> | Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',Qw={instance:new eo.TileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),attribution:o_};var ul=()=>new vr,vr=class{onMouseClick(i,o){let s=i.getNearestNode(o);if(s)return pr(i,s),{isStateChanged:!0,changedSubject:s};let a=i.getNearestEdge(o);if(a)return gr(i,a),{isStateChanged:!0,changedSubject:a};let{changedCount:l}=Ui(i);return{isStateChanged:l>0}}onMouseMove(i,o){let s=i.getNearestNode(o);if(s&&!s.isSelected())return s===this.lastHoveredNode?{changedSubject:s,isStateChanged:!1}:(s_(i,s),this.lastHoveredNode=s,{isStateChanged:!0,changedSubject:s});if(this.lastHoveredNode=void 0,!s){let{changedCount:a}=cl(i);return{isStateChanged:a>0}}return{isStateChanged:!1}}onMouseRightClick(i,o){let s=i.getNearestNode(o);if(s)return pr(i,s),{isStateChanged:!0,changedSubject:s};let a=i.getNearestEdge(o);if(a)return gr(i,a),{isStateChanged:!0,changedSubject:a};let{changedCount:l}=Ui(i);return{isStateChanged:l>0}}onMouseDoubleClick(i,o){let s=i.getNearestNode(o);if(s)return pr(i,s),{isStateChanged:!0,changedSubject:s};let a=i.getNearestEdge(o);if(a)return gr(i,a),{isStateChanged:!0,changedSubject:a};let{changedCount:l}=Ui(i);return{isStateChanged:l>0}}},pr=(e,i)=>{Ui(e),fl(i,St.SELECTED,{isStateOverride:!0})},gr=(e,i)=>{Ui(e),a_(i,St.SELECTED,{isStateOverride:!0})},Ui=e=>{let i=e.getNodes(s=>s.isSelected());for(let s=0;s<i.length;s++)i[s].clearState();let o=e.getEdges(s=>s.isSelected());for(let s=0;s<o.length;s++)o[s].clearState();return{changedCount:i.length+o.length}},s_=(e,i)=>{cl(e),fl(i,St.HOVERED)},cl=e=>{let i=e.getNodes(s=>s.isHovered());for(let s=0;s<i.length;s++)i[s].clearState();let o=e.getEdges(s=>s.isHovered());for(let s=0;s<o.length;s++)o[s].clearState();return{changedCount:i.length+o.length}},fl=(e,i,o)=>{me(e,o)&&(e.state=i),e.getInEdges().forEach(s=>{s&&me(s,o)&&(s.state=i),s.startNode&&me(s.startNode,o)&&(s.startNode.state=i)}),e.getOutEdges().forEach(s=>{s&&me(s,o)&&(s.state=i),s.endNode&&me(s.endNode,o)&&(s.endNode.state=i)})},a_=(e,i,o)=>{me(e,o)&&(e.state=i),e.startNode&&me(e.startNode,o)&&(e.startNode.state=i),e.endNode&&me(e.endNode,o)&&(e.endNode.state=i)},me=(e,i)=>{let o=i==null?void 0:i.isStateOverride;return o||!o&&!e.state};var dl=["label","name"],h_={size:5,color:new Pe("#1d87c9")},l_={color:new Pe("#ababab"),width:.3},yr=()=>({getNodeStyle(e){return Object.assign(Object.assign({},h_),{label:_l(e)})},getEdgeStyle(e){return Object.assign(Object.assign({},l_),{label:_l(e)})}}),_l=e=>{for(let i=0;i<dl.length;i++){let o=e.data[dl[i]];if(o!=null)return`${o}`}};var Hi=class{constructor(i,o){var s;this.container=i,this._events=new Vn,this._graph=new cn(void 0,{onLoadedImages:()=>{this._view.isInitiallyRendered()&&this._view.render()}}),this._graph.setDefaultStyle(yr()),this._context={container:this.container,graph:this._graph,events:this._events,strategy:(s=o==null?void 0:o.strategy)!==null&&s!==void 0?s:ul()},o!=null&&o.view?this._view=o.view(this._context):this._view=new ti(this._context)}get data(){return this._graph}get view(){return this._view}get events(){return this._events}setView(i){this._graph.getNodeCount()>0&&this._graph.clearPositions(),this._view&&this._view.destroy(),this._view=i(this._context)}};function Eb(e,i){function o(){let s=e.root,a=i.nodes,l=i.edges,u=new Hi(s);u.data.setup({nodes:a,edges:l}),u.view.render(()=>{u.view.recenter()}),e.handleEvent("push",f=>{let _=f.nodes,m=f.edges;u.data.merge({nodes:_,edges:m}),u.view.render(()=>{u.view.recenter()})})}window.innerWidth===0?window.addEventListener("resize",()=>o(),{once:!0}):o()}export{Eb as init};
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.8.0, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)
*/
